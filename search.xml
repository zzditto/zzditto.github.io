<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[kerberos和ranger使用记录]]></title>
    <url>%2F2019%2F12%2F26%2FLearn%2Fkerberos%E5%92%8Cranger%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[创建testc用户测试 linux创建testc用户，密码：123456testc。使用adduser，用于创建home文件夹和同名的组 kerberos创建testc/testc主体，密码123456testc注：由于ranger对密码有要求，故设置密码应该保持有数字和字母统一管理用户，组可以使用freeIPA，但由于DNS映射的原因，不可以和ambari的节点安装在一起，所以暂时使用人工管理 Hadoop生态圈-使用FreeIPA安装Kerberos和LDAP testc用户登录基本操作权限认证为hdfs用户12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788#跳转到此路径下，或者后面在命令中加上路径[root@vm01 keytabs]# pwd/etc/security/keytabs[root@vm01 keytabs]# lltotal 48-r-------- 1 root root 368 Dec 25 14:29 activity-analyzer.headless.keytab-r-------- 1 root root 368 Dec 25 14:29 activity-explorer.headless.keytab-r--r----- 1 root root 348 Dec 25 14:29 ambari.server.keytab-r-------- 1 hdfs hadoop 293 Dec 25 14:29 dn.service.keytab-r-------- 1 hdfs hadoop 303 Dec 25 14:29 hdfs.headless.keytab-r-------- 1 hive hadoop 303 Dec 25 14:29 hive.service.keytab-r-------- 1 yarn hadoop 293 Dec 25 14:29 nm.service.keytab-r-------- 1 hdfs hadoop 293 Dec 25 14:29 nn.service.keytab-r--r----- 1 ambari-qa hadoop 328 Dec 25 14:29 smokeuser.headless.keytab-r-------- 1 spark hadoop 308 Dec 25 14:29 spark.headless.keytab-r--r----- 1 root hadoop 303 Dec 25 14:29 spnego.service.keytab-r-------- 1 zookeeper hadoop 328 Dec 25 14:29 zk.service.keytab#查看kerberos主体,记住常用的即可。但这种ambari生成的用户，通常不知道密码，推荐使用keyta方式## hdfs-&gt;hdfs-hhhhh## hive-&gt;hive/vm01; hive/vm02; hive/vm03 在哪一台节点则需要将名称改为哪一台的主机名[root@vm01 keytabs]# kadmin.localAuthenticating as principal hdfs-hhhhh/admin@TEST.COM with password.kadmin.local: listprincsHTTP/vm01@TEST.COMHTTP/vm02@TEST.COMHTTP/vm03@TEST.COMK/M@TEST.COMactivity_analyzer/vm01@TEST.COMactivity_explorer/vm01@TEST.COMambari-qa-hhhhh@TEST.COMambari-server-hhhhh@TEST.COMamshbase/vm03@TEST.COMamszk/vm03@TEST.COMdn/vm01@TEST.COMdn/vm02@TEST.COMdn/vm03@TEST.COMhdfs-hhhhh@TEST.COMhive/vm01@TEST.COMhive/vm02@TEST.COMhive/vm03@TEST.COMjhs/vm02@TEST.COMkadmin/admin@TEST.COMkadmin/changepw@TEST.COMkadmin/vm01@TEST.COMkiprop/vm01@TEST.COMkrbtgt/TEST.COM@TEST.COMnm/vm01@TEST.COMnm/vm02@TEST.COMnm/vm03@TEST.COMnn/vm01@TEST.COMnn/vm02@TEST.COMrangeradmin/vm03@TEST.COMrangerlookup/vm03@TEST.COMrangertagsync/vm03@TEST.COMrangerusersync/vm03@TEST.COMrm/vm02@TEST.COMspark-hhhhh@TEST.COMtestc/testc@TEST.COMyarn/vm02@TEST.COMzookeeper/vm01@TEST.COMzookeeper/vm02@TEST.COMzookeeper/vm03@TEST.COM#kerberos认证#kerberos认证有时间限制，默认为1d## kinit -kt 【keytab文件路径，上边若没有跳转，则添加全路径】 kerberos的主体【@TEST.CO可省略】[root@vm01 keytabs]# kinit -kt ./hdfs.headless.keytab hdfs-hhhhh[root@vm01 keytabs]# kinit -kt /etc/security/keytabs/hdfs.headless.keytabhdfs-hhhhh#查看是否生效[root@vm01 keytabs]# klistTicket cache: FILE:/tmp/krb5cc_0Default principal: hdfs-hhhhh@TEST.COMValid starting Expires Service principal12/25/2019 16:51:51 12/26/2019 16:51:51 krbtgt/TEST.COM@TEST.COM#此时，当前用户(root)已经被认证为hdfs用户，即已经成为hdfs用户，不需要su切换，直接可以进hdfs操作##演示[root@vm01 keytabs]# hadoop fs -ls /Found 9 itemsdrwxrwxrwx - yarn hadoop 0 2019-12-19 17:44 /app-logsdrwxr-xr-x - hdfs hdfs 0 2019-12-19 17:07 /appsdrwxr-xr-x - yarn hadoop 0 2019-12-19 16:58 /atsdrwxr-xr-x - hdfs hdfs 0 2019-12-19 16:58 /hdpdrwxr-xr-x - mapred hdfs 0 2019-12-19 16:58 /mapreddrwxrwxrwx - mapred hadoop 0 2019-12-19 16:59 /mr-historydrwxrwxrwx - spark hadoop 0 2019-12-25 16:57 /spark2-historydrwxrwxrwx - hdfs hdfs 0 2019-12-25 14:45 /tmpdrwxr-xr-x - hdfs hdfs 0 2019-12-24 17:23 /user##进入hive，创建几张空表[root@vm01 keytabs]# hive 使用testc用户，ranger给予部分权限给予testc用户访问test数据库，只能访问test2表，可进行所有操作的权限 12345678910111213141516171819202122232425262728#kerberos认证##认证方式有两种，1.上边提到的[keytab文件] 2.当前这种输入密码的形式##区别：keytab文件避免了输入密码，可使用在执行任务，需要切换用户的时候。ambari和kerbero集成时自动生成了上边路径下的keytab文件。我们对新建的用户也可以生成keytab文件。[root@vm01 keytabs]# kinit testc/testcPassword for testc/testc@TEST.COM:[root@vm01 keytabs]# klistTicket cache: FILE:/tmp/krb5cc_0Default principal: testc/testc@TEST.COMValid starting Expires Service principal12/25/2019 17:04:38 12/26/2019 17:04:38 krbtgt/TEST.COM@TEST.COM#在生产集群中，使用ranger给chedejian设置权限，只能使用hiveserver2对其进行权限控制，只切换用户到chendejian是可以访问整个数据库的。`https://blog.csdn.net/wangpei1949/articledetails/87908785`#`https:/www.cnblogs.com/love-yh/p/10099962.html`。推荐beeline方式#使用hive cli方式即直接输入hive，进入hive。控制权限即为控制hdfs中hive表的路径,使用ranger`https://blog.csdn.net/u013850277/article/details/78953759`#由此文看出，需要提前设置hdfs中的文件权限为其他用户不可查看#这里设置其他用户不可read进行测试`[root@vm01 ~]# hadoop fs -chmod -R o-r /apps/hive`#ambari页面也不可能查看，创建hdfs用户进行登录即可#kerberos无论开启多少个窗口，使用kinit，就是统一变成认证的用户。解决方法可能是需要为每登陆的人创建一个用户#ranger使用不可直接在ranger中创建用户，而是在ranger的Ranger Usersync所在的主机中创建用户可自动同步到ranger中，且需要在ranger参数设置中设置开启hdfs plugin功能。#Ranger开启hdfs plugin组件，会自动在ranger生成选项。在新的选项中设置用户权限即可。#创建用户，ranger同步用户。此时删除linux和ranger上的用户，再在linux上创建同名同组的户，ranger不会更新，所以一般不要删除ranger上的用户。如果删除。可使用ranger自行创建同名组用户。##使用kerberos ranger控制用户权限步骤如下：1. Ranger Usersync所在节点创建用户和用户组2. kerberos将新建的用户加入认证用户列表3. 使用ranger设置权限4. 切换为新创建的用户5. 使用kinit认证新创建的用户6. 新用户认证+授权完成 使用testc用户进行kerberos用户认证，ranger设置权限操作123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155#kerberos认证##认证方式有两种，1.上边提到的[keytab文件] 2.当前这种输入密码的形式##ambari自动生成的用户使用keytab形式认证。自己创建的用户使用输入密码形式1.Ranger Usersync所在节点创建用户和用户组[root@vm03 home]# adduser testc[root@vm03 home]# lltotal 0drwx------ 3 ambari-qa hadoop 87 Dec 19 16:29 ambari-qadrwx------ 3 ams hadoop 87 Oct 16 16:58 amsdrwx------ 2 druid hadoop 62 Dec 12 13:51 druiddrwx------ 2 elasticsearch hadoop 62 Dec 24 10:03 elasticsearchdrwx------ 3 flume hadoop 87 Dec 9 14:26 flumedrwx------ 2 flume1 hadoop 62 Dec 24 10:03 flume1drwx------ 2 hcat hadoop 62 Dec 19 16:14 hcatdrwx------ 3 hdfs hadoop 108 Dec 24 16:55 hdfsdrwx------ 2 hive hadoop 83 Dec 24 17:02 hivedrwx------ 2 kibana hadoop 62 Dec 24 10:03 kibanadrwx------ 2 livy hadoop 62 Dec 19 16:14 livydrwx------ 2 ranger hadoop 62 Dec 24 18:38 rangerdrwx------ 2 spark hadoop 62 Dec 19 16:14 sparkdrwx------ 2 testc testc 62 Dec 26 14:50 testcdrwx------ 2 tez hadoop 83 Dec 24 17:07 tezdrwx------ 3 zookeeper hadoop 87 Oct 16 16:57 zookeeper2.kerberos将testc加入认证库[root@vm01 ~]# kadmin.localAuthenticating as principal root/admin@TEST.COM with password.kadmin.local: add_principal testc/testcWARNING: no policy specified for testc/testc@TEST.COM; defaulting to no policyEnter password for principal "testc/testc@TEST.COM":Re-enter password for principal "testc/testc@TEST.COM":Principal "testc/testc@TEST.COM" created.3.ranger设置权限4.kinit认证【若能够切换用户，尽量切换用户操作】[root@vm03 home]# su testc[testc@vm03 home]$ kinit testc/testcPassword for testc/testc@TEST.COM:[testc@vm03 home]$ klistTicket cache: FILE:/tmp/krb5cc_1016Default principal: testc/testc@TEST.COMValid starting Expires Service principal12/26/2019 15:00:45 12/27/2019 15:00:45 krbtgt/TEST.COM@TEST.COM【若切换不了用户，就不切换用户也可操作】[root@vm01 ~]# klistklist: No credentials cache found (filename: /tmp/krb5cc_0)[root@vm01 ~]# kinit testc/testcPassword for testc/testc@TEST.COM:[root@vm01 ~]# klistTicket cache: FILE:/tmp/krb5cc_0Default principal: testc/testc@TEST.COMValid starting Expires Service principal12/26/2019 15:02:05 12/27/2019 15:02:05 krbtgt/TEST.COM@TEST.COM6.验证认证和授权#使用hdfs用户，查看test.txt文件。该文件设置其他用户无法进行读，写，执行[root@vm01 ~]# kinit -kt /etc/security/keytabs/hdfs.headless.keytab hdfs-hhhhh[root@vm01 ~]# klistTicket cache: FILE:/tmp/krb5cc_0Default principal: hdfs-hhhhh@TEST.COMValid starting Expires Service principal12/26/2019 15:04:55 12/27/2019 15:04:55 krbtgt/TEST.COM@TEST.COM[root@vm01 ~]# hadoop fs -ls /apps/hive/warehouse/test/Found 1 items-rwxrwx--- 3 hdfs hadoop 23 2019-12-26 11:12 /apps/hive/warehouse/test/test.txt#使用testc用户进行读取[testc@vm03 home]$ klistTicket cache: FILE:/tmp/krb5cc_1016Default principal: testc/testc@TEST.COMValid starting Expires Service principal12/26/2019 15:00:45 12/27/2019 15:00:45 krbtgt/TEST.COM@TEST.COM[testc@vm03 home]$ hadoop fs -cat /apps/hive/warehouse/test/test.txthellohiapplepvmware##读取成功#使用ranger设置hive表的路径的权限，以此控制testc对hive的访问##无权限设置[testc@vm03 home]$ hivelog4j:WARN No such property [maxFileSize] in org.apache.log4j.DailyRollingFileAppender.Logging initialized using configuration in file:/etc/hive/2.6.5.0-292/0/hive-log4j.propertieshive&gt; show databases;OKdefaulttesttest1test2Time taken: 1.534 seconds, Fetched: 4 row(s)##设置hdfs的权限，控制hive表的路径##设置hdfs中hive路径，其他用户不能访问[hdfs@vm01 root]$ klistTicket cache: FILE:/tmp/krb5cc_1003Default principal: hdfs-hhhhh@TEST.COMValid starting Expires Service principal12/26/2019 14:25:24 12/27/2019 14:25:24 krbtgt/TEST.COM@TEST.COM12/26/2019 14:25:24 12/27/2019 14:25:24 HTTP/vm01@12/26/2019 14:25:24 12/27/2019 14:25:24 HTTP/vm01@TEST.COM[hdfs@vm01 root]$[hdfs@vm01 root]$[hdfs@vm01 root]$ hadoop fs -chmod -R o-r /apps/hive/##ranger设置testc用户可以访问test.db##但是会显示其他不能操作的数据库名，使用hiveserver2即可解决[testc@vm03 home]$ hivelog4j:WARN No such property [maxFileSize] in org.apache.log4j.DailyRollingFileAppender.Logging initialized using configuration in file:/etc/hive/2.6.5.0-292/0/hive-log4j.propertieshive&gt; show databases;OKdefaulttesttest1test2Time taken: 1.236 seconds, Fetched: 4 row(s)hive&gt; use test;OKTime taken: 0.73 secondshive&gt; show tables;OKtesttest1test2Time taken: 0.269 seconds, Fetched: 3 row(s)hive&gt; use test1;FAILED: SemanticException MetaException(message:java.security.AccessControlException: Permission denied: user=testc, access=READ, inode="/apps/hive/warehouse/test1.db":hdfs:hadoop:drwxr-x--x at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.check(FSPermissionChecker.java:353) at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.checkPermission(FSPermissionChecker.java:252) at org.apache.ranger.authorization.hadoop.RangerHdfsAuthorizer$RangerAccessControlEnforcer.checkDefaultEnforcer(RangerHdfsAuthorizer.java:427) at org.apache.ranger.authorization.hadoop.RangerHdfsAuthorizer$RangerAccessControlEnforcer.checkPermission(RangerHdfsAuthorizer.java:303) at org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.checkPermission(FSPermissionChecker.java:190) at org.apache.hadoop.hdfs.server.namenode.FSDirectory.checkPermission(FSDirectory.java:1950) at org.apache.hadoop.hdfs.server.namenode.FSDirectory.checkPermission(FSDirectory.java:1934) at org.apache.hadoop.hdfs.server.namenode.FSDirectory.checkPathAccess(FSDirectory.java:1908) at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkAccess(FSNamesystem.java:8800) at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.checkAccess(NameNodeRpcServer.java:2089) at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.checkAccess(ClientNamenodeProtocolServerSideTranslatorPB.java:1466) at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:640) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:982) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2351) at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2347) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:422) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1869) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2347)) hiveserver2Hbase shellspark代码本地运行和集群运行flume写入hdfsprestoazkaban]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Ranger</tag>
        <tag>kerberos</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ambari使用kerberos做身份认证]]></title>
    <url>%2F2019%2F12%2F26%2FLearn%2Fambari%E4%BD%BF%E7%94%A8kerberos%E5%81%9A%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%2F</url>
    <content type="text"><![CDATA[一、安装jce在群集中启用Kerberos之前，必须在Ambari服务器和群集中的所有主机上部署Java密码学扩展（JCE）安全策略文件。 下载jce策略文件 Oracle JDK 1.8 将jce解压到$JAVA_HOME/jre/lib/security/.路径下 举例：unzip -o -j -q jce_policy-8.zip -d /opt/apps/jdk1.8.0_231/jre/lib/security/ 重启ambari-server服务 二、安装KDCKDC(Key Distribution Center)密匙分配中心，其在kerberos中通常提供两种服务： Authentication Service (AS)：认证服务 Ticket-Granting Service (TGS)：授予票据服务 即安装krb5【主节点】：[root@vm01 opt]# yum install krb5-server krb5-libs krb5-workstation【从节点，只安装客户端】：[root@vm01 opt]# yum install krb5-libs krb5-workstation 三、编辑krb配置文件 krb5.conf kdc.conf kadm5.acl krb5.conf123456789101112131415161718192021222324252627282930[root@vm01 opt]# cat /etc/krb5.conf# Configuration snippets may be placed in this directory as wellincludedir /etc/krb5.conf.d/[logging] default = FILE:/var/log/krb5libs.log kdc = FILE:/var/log/krb5kdc.log admin_server = FILE:/var/log/kadmind.log[libdefaults] dns_lookup_realm = false ticket_lifetime = 24h renew_lifetime = 7d forwardable = true rdns = false pkinit_anchors = /etc/pki/tls/certs/ca-bundle.crt default_realm = EXAMPLE.COM default_ccache_name = KEYRING:persistent:%&#123;uid&#125;[realms]#为`default_realm = EXAMPLE.COM`的值 EXAMPLE.COM = &#123;#主节点ip kdc = 192.168.133.3 admin_server = 192.168.133.3 &#125;[domain_realm]# .example.com = EXAMPLE.COM# example.com = EXAMPLE.COM krb5.conf的参数说明[libdefaults]：每种连接的默认配置，需要注意以下几个关键的小配置default_realm = EXAMPLE.COM 默认的realm，必须跟要配置的realm的名称一致。ticket_lifetime 表明凭证生效的时限，一般为24小时。renew_lifetime 表明凭证最长可以被延期的时限，一般为7天。当凭证过期之后， 对安全认证的服务的后续访问则会失败。 [logging]：表示server端的日志的打印位置 [realms]：列举使用的realmkdc：代表安装 kdc server的机器。格式是机器ip或者主机名admin_server：代表安装 admin server的机器。格式是机器ip或者主机名EXAMPLE.COM：是设定的realm。名字随意。Kerberos可以支持多个realms，会增加复杂度。本文不探讨。大小写敏感，一般为了识别使用全部大写。这个realm跟机器的hostname没有关系。 kdc.conf1234567891011121314[root@vm01 opt]# cat /var/kerberos/krb5kdc/kdc.conf[kdcdefaults] kdc_ports = 88 kdc_tcp_ports = 88[realms]#此处realms要与上文设置的一致，都采用默认值 EXAMPLE.COM = &#123; #master_key_type = aes256-cts acl_file = /var/kerberos/krb5kdc/kadm5.acl dict_file = /usr/share/dict/words admin_keytab = /var/kerberos/krb5kdc/kadm5.keytab supported_enctypes = aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal arcfour-hmac:normal camellia256-cts:normal camellia128-cts:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal &#125; kdc.conf的参数说明EXAMPLE.COM：是设定的realm，名称随意。Kerberos可以支持多个realms，会增加复杂度。本文不探讨。书写大小写敏感，一般为了识别使用全部大写。这个realm跟机器的hostname没有关系。 master_key_type：和 supported_enctypes默认使用 aes256-cts。JAVA 使用 aes256-cts 验证方式需要安装 JCE 包。 acl_file：标注文件路径，用于设置 principal的权限，需要用户自己创建。文件格式： Kerberos_principalpermissions[target_principal][restrictions] admin_keytab：KDC 进行校验的 keytab。 supported_enctypes：支持的校验方式。 kadm5.acl12[root@vm01 opt]# cat /var/kerberos/krb5kdc/kadm5.acl*/admin@EXAMPLE.COM * principal permissions[target_principal][restrictions] principal： */admin@EXAMPLE.COM permissions：* # *代表所有权限 target_principal：选填 restrictions：选填 该文件可扩展，扩展链接：https://web.mit.edu/kerberos/krb5-1.12/doc/admin/conf_files/kadm5_acl.html 注：修改完配置参数之后。将三个配置文件从主节点手动复制到从节点【需要创建krd5kdc文件夹】 kerberos配置创建kerberos数据库12345678[root@vm01 opt]# /usr/sbin/kdb5_util create -s -r EXAMPLE.COMLoading random dataInitializing database '/var/kerberos/krb5kdc/principal' for realm 'EXAMPLE.COM',master key name 'K/M@EXAMPLE.COM'You will be prompted for the database Master Password.It is important that you NOT FORGET this password.Enter KDC database master key: adminRe-enter KDC database master key to verify: admin 参数说明：其中，[-s]表示生成stash file，并在其中存储master server key（krb5kdc）；还可以用[-r]来指定一个krb5.conf 文件中存在的realm name保存路径为/var/kerberos/krb5kdc 如果需要重建数据库，将该目录下的principal所有相关的文件删除即可在此过程中，我们会输入database的管理密码。这里设置的密码一定要记住，如果忘记了，就无法管理Kerberos server。 创建管理员1234567891011#进入kerberos数据库[root@vm01 krb5kdc]# kadmin.localAuthenticating as principal root/admin@EXAMPLE.COM with password.#创建admin/admin管理员kadmin.local: addprinc admin/adminWARNING: no policy specified for admin/admin@EXAMPLE.COM; defaulting to no policyEnter password for principal "admin/admin@EXAMPLE.COM": 123456Re-enter password for principal "admin/admin@EXAMPLE.COM": 123456Principal "admin/admin@EXAMPLE.COM" created.#退出kadmin.local: exit 启动并设置开机自启动123456[root@vm01 krb5kdc]# systemctl start krb5kdc[root@vm01 krb5kdc]# systemctl start kadmin[root@vm01 krb5kdc]# systemctl enable krb5kdcCreated symlink from /etc/systemd/system/multi-user.target.wants/krb5kdc.service to /usr/lib/systemd/system/krb5kdc.service.[root@vm01 krb5kdc]# systemctl enable kadminCreated symlink from /etc/systemd/system/multi-user.target.wants/kadmin.service to /usr/lib/systemd/system/kadmin.service. ambari页面配置 开始使用 2.配置kerberos 后面的配置一路下一步即可 参考基于ambari的Kerberos安装配置官方文档 注 更换jdk之后，需要重新对ambari进行设置，Change the JDK Version kerberos常用命令参考文档 用户命令： 123456789101112131415161718#当前用户下 认证为其他用户（例如hdfs用户），就可以直接执行hadoop命令，即不用su切换用户，当前用户已经是hdfs用户#kinit（认证）kerder的admin用户【输密码方式】[root@vm01 logs]# kinit admin/admin@EXAMPLE.COMPassword for admin/admin@EXAMPLE.COM: 123456#kinit keytab 【keytab方式】【输密码和keytab不能共存】kinit -kt /xx/xx/kerberos.keytab hdfs/hadoop1#查询认证状态[root@vm01 logs]# klistTicket cache: FILE:/tmp/krb5cc_0Default principal: admin/admin@EXAMPLE.COMValid starting Expires Service principal12/24/2019 15:07:58 12/25/2019 15:07:58 krbtgt/EXAMPLE.COM@EXAMPLE.COM#退出认证[root@vm01 logs]# kdestroy[root@vm01 logs]# klistklist: No credentials cache found (filename: /tmp/krb5cc_0) 管理员命令： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101#登录后台[root@vm01 logs]# kadmin.localAuthenticating as principal root/admin@EXAMPLE.COM with password.#查看用户列表kadmin.local: listprincsHTTP/vm01@EXAMPLE.COMHTTP/vm02@EXAMPLE.COMHTTP/vm03@EXAMPLE.COM#修改账号密码（可修改忘记密码）kadmin.local: change_password admin/admin@EXAMPLE.COMEnter password for principal "admin/admin@EXAMPLE.COM": 123456Re-enter password for principal "admin/admin@EXAMPLE.COM": 123456Password for "admin/admin@EXAMPLE.COM" changed.#增加主体kadmin.local: add_principal testWARNING: no policy specified for test@EXAMPLE.COM; defaulting to no policyEnter password for principal "test@EXAMPLE.COM": 123456Re-enter password for principal "test@EXAMPLE.COM": 123456Principal "test@EXAMPLE.COM" created.#删除主体kadmin.local: delete_principal testAre you sure you want to delete the principal "test@EXAMPLE.COM"? (yes/no): yesPrincipal "test@EXAMPLE.COM" deleted.Make sure that you have removed this principal from all ACLs before reusing.#导出keytab文件##keytab是包含principals和加密principal key的文件。##keytab文件对于每个host是唯一的，因为key中包含hostname。keytab文件用于不需要人工交互和保存纯文本密码，实现到kerberos上验证一个主机上的principal。##因为服务器上可以访问keytab文件即可以以principal的身份通过kerberos的认证，所以，keytab文件应该被妥善保存，应该只有少数的用户可以访问。###登录后台[root@vm01 keytabs]# kadmin.localAuthenticating as principal test/admin@EXAMPLE.COM with password.###为新增的test用生成keytab，名称自定义为test.keytab###ambari自生成的hdfs，hive等用户，不要更改密码。更改密码之后需要重新生成keytab，再分发到各主机上kadmin.local: xst -k test.keytab -norandkey test@EXAMPLE.COMEntry for principal test@EXAMPLE.COM with kvno 1, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type des3-cbc-sha1 added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type arcfour-hmac added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type camellia256-cts-cmac added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type camellia128-cts-cmac added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type des-hmac-sha1 added to keytab WRFILE:test.keytab.Entry for principal test@EXAMPLE.COM with kvno 1, encryption type des-cbc-md5 added to keytab WRFILE:test.keytab.###keytab文件[root@vm01 keytabs]# pwd/etc/security/keytabs[root@vm01 keytabs]# lltotal 56-r-------- 1 root root 383 Dec 24 14:35 activity-analyzer.headless.keytab-r-------- 1 root root 383 Dec 24 14:35 activity-explorer.headless.keytab-rw------- 1 root root 1594 Dec 24 16:02 admin.keytab-r--r----- 1 root root 363 Dec 24 14:35 ambari.server.keytab-r-------- 1 hdfs hadoop 308 Dec 24 14:35 dn.service.keytab-r-------- 1 hdfs hadoop 854 Dec 24 16:39 hdfs.headless.keytab-r--r----- 1 hive hadoop 318 Dec 24 14:35 hive.service.keytab-r-------- 1 yarn hadoop 308 Dec 24 14:35 nm.service.keytab-r-------- 1 hdfs hadoop 308 Dec 24 14:35 nn.service.keytab-r--r----- 1 ambari-qa hadoop 343 Dec 24 14:35 smokeuser.headless.keytab-r-------- 1 spark hadoop 323 Dec 24 14:35 spark.headless.keytab-r--r----- 1 root hadoop 318 Dec 24 14:35 spnego.service.keytab-rw------- 1 root root 978 Dec 24 16:45 test.keytab-r-------- 1 zookeeper hadoop 343 Dec 24 14:35 zk.service.keytab#查看命令kadmin.local: ?Available kadmin.local requests:add_principal, addprinc, ank Add principaldelete_principal, delprinc Delete principalmodify_principal, modprinc Modify principalrename_principal, renprinc Rename principalchange_password, cpw Change passwordget_principal, getprinc Get principallist_principals, listprincs, get_principals, getprincs List principalsadd_policy, addpol Add policymodify_policy, modpol Modify policydelete_policy, delpol Delete policyget_policy, getpol Get policylist_policies, listpols, get_policies, getpols List policiesget_privs, getprivs Get privilegesktadd, xst Add entry(s) to a keytabktremove, ktrem Remove entry(s) from a keytablock Lock database exclusively (use with extreme caution!)unlock Release exclusive database lockpurgekeys Purge previously retained old keys from a principalget_strings, getstrs Show string attributes on a principalset_string, setstr Set a string attribute on a principaldel_string, delstr Delete a string attribute on a principallist_requests, lr, ? List available requests.quit, exit, q Exit program. ambari中kerberos的卸载参考:如何基于Ambari禁用KerberosAmbari+HDP集群关闭kerberos认证后遇到的问题 需注意(freeIPA 服务器的身份认证管理组件)：Hadoop生态圈-开启Ambari的Kerberos安全选项 点击ambari卸载 检查 主要服务都能够顺利启动，并没有出现和参考文档中一样的问题 检查kerberos相关参数 hdfs：无kerberos相关参数 hive：含有四个kerberos相关参数前两个参数是有关于hive使用keytab做认证的keytab路径和principal名称，不会造成启动的影响后两个参数是hiveserver2的认证的keytab路径和principal名称，也不会造成启动的影响这里无法进行删除 停止并卸载各节点的kerberos服务器和客户端 12345678910111213141516171819202122232425262728293031323334 #主节点 [root@vm01 keytabs]# systemctl stop krb5kdc [root@vm01 keytabs]# systemctl stop kadmin [root@vm01 keytabs]# yum remove krb5-server [root@vm01 keytabs]# yum remove krb5-libs #出现报错信息，可不管 ##Error: Trying to remove "systemd", which is protected ##Error: Trying to remove "yum", which is protected [root@vm01 keytabs]# yum remove krb5-workstation #查看keytabs文件夹，可删除。这里将其删除 [root@vm01 keytabs]# ll total 20 -rw------- 1 root root 1594 Dec 24 16:02 admin.keytab -r--r----- 1 root root 363 Dec 24 14:35 ambari.server.keytab -r-------- 1 ranger root 353 Dec 24 18:47 rangeradmin.service.keytab -r-------- 1 ranger root 358 Dec 24 18:47 rangerlookup.service.keytab -r-------- 1 ranger root 368 Dec 24 18:47 rangerusersync.service.keytab## 安装ranger参考：[Ambari安装Ranger详细教程](https://blog.csdn.net/MH_Tan/article/details/99677395)1. 密码设置为Lenovo@123?2. 在mysql中进行刷新3. 测试连接mysql报错 ```shell java.sql.SQLException: null, message from server: "Host '192.168.133.5' is blocked because of many connection errors; unblock with 'mysqladmin flush-hosts'" #解决： [root@vm01 apps]# mysqladmin -uroot -p123456 flush-hosts mysqladmin: [Warning] Using a password on the command line interface can be insecure. 报错 123452019-12-25 12:07:49,967 [I] Java patch PatchPasswordEncryption_J10001 is being applied by some other process#解决：[设置mysql的ssl认证为false](https://www.cnblogs.com/felixzh/p/10792051.html)[删除ranger中的J1000*数据（或许不删除也可以，需要多等待）](https://community.cloudera.com/t5/Support-Questions/quot-Java-patch-PatchPasswordEncryption-J10001-is-being/td-p/188553)]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Kerberos</tag>
        <tag>Ambari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OLAP引擎调研测试]]></title>
    <url>%2F2019%2F12%2F23%2FToWork%2FOLAP%E5%BC%95%E6%93%8E%E8%B0%83%E7%A0%94%E6%B5%8B%E8%AF%95%2F</url>
    <content type="text"><![CDATA[Please enter the password to read the blog. Incorrect Password! No content to display! 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]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[presto和yanagishima的安装记录]]></title>
    <url>%2F2019%2F12%2F23%2FToWork%2Fpresto%E5%92%8Cyanagishima%E7%9A%84%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[Please enter the password to read the blog. Incorrect Password! No content to display! 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]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
      <tags>
        <tag>presto</tag>
        <tag>yanagishima</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ambari2.6.2和Flume1.7集成]]></title>
    <url>%2F2019%2F12%2F16%2FLearn%2FAmbari2-6-2%E5%92%8CFlume1-7%E9%9B%86%E6%88%90%2F</url>
    <content type="text"><![CDATA[前言Ambari支持自定义服务扩展，大致步骤分为以下四步： 创建服务文件夹 创建描述信息服务的metainfo.xml 创建关于安装，启动，停止，配置等命令的py脚本 给自定义服务添加配置 注：Ambari自带服务也含有类似的脚本和模板，可将其视为参考，路径如下： 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950(base) [root@vm50 1.4.0.2.0]# pwd/var/lib/ambari-server/resources/common-services/FLUME/1.4.0.2.0(base) [root@vm50 1.4.0.2.0]# lltotal 24-rwxr-xr-x 1 root root 797 May 30 2018 alerts.jsondrwxr-xr-x 2 root root 81 May 23 2019 configuration-rwxr-xr-x 1 root root 2367 May 30 2018 metainfo.xml-rwxr-xr-x 1 root root 14302 May 30 2018 metrics.jsondrwxr-xr-x 5 root root 84 May 23 2019 package(base) [root@vm50 1.4.0.2.0]# tree.├── alerts.json├── configuration│ ├── flume-conf.xml│ ├── flume-env.xml│ └── flume-logsearch-conf.xml├── metainfo.xml├── metrics.json└── package ├── alerts │ ├── alert_flume_agent_status.py │ ├── alert_flume_agent_status.pyc │ └── alert_flume_agent_status.pyo ├── archive.zip ├── scripts │ ├── flume_check.py │ ├── flume_check.pyc │ ├── flume_check.pyo │ ├── flume_handler.py │ ├── flume_handler.pyc │ ├── flume_handler.pyo │ ├── flume.py │ ├── flume.pyc │ ├── flume.pyo │ ├── params_linux.py │ ├── params_linux.pyc │ ├── params_linux.pyo │ ├── params.py │ ├── params.pyc │ ├── params.pyo │ ├── params_windows.py │ ├── params_windows.pyc │ ├── params_windows.pyo │ ├── service_mapping.py │ ├── service_mapping.pyc │ └── service_mapping.pyo └── templates ├── flume.conf.j2 ├── flume-metrics2.properties.j2 └── log4j.properties.j2 ambari集成flume1.7ambari 2.6.2以及之前版本，自带flume组件。但是自带的flume组件版本太低，1.5。无法满足实际生产中数据采集的需求，所以决定将flume1.7集成到ambari之上。以能够通过ambari web页面对flume进行配置参数，启动，停止，且可以通过实时追踪日志观察fluem运行情况为集成目标。与自带的flume监控有所差别，但是不重要，满足需要即可。 flume1.7集成后展示flume1.7服务的目录结构： 1234567891011121314151617181920212223242526272829303132333435363738394041#官方展示目录结构|_ stacks |_ &lt;stack_name&gt; |_ &lt;stack_version&gt; metainfo.xml |_ hooks |_ repos repoinfo.xml |_ services |_ &lt;service_name&gt; metainfo.xml metrics.json |_ configuration &#123;configuration files&#125; |_ package &#123;files, scripts, templates&#125;#自定义Flume完整目录结构[root@test FLUME-1.7]# tree.├── configuration│ ├── flume1.7-conf.xml│ ├── flume1.7-env.xml│ ├── flume-log4j-properties.xml│ └── org│ ├── flume-env.sh│ └── log4j.properties├── metainfo.xml├── package│ ├── scripts│ │ ├── flume_1.7_server.py│ │ ├── params.py│ │ ├── service_check.py│ │ └── status_params.py│ └── templates│ ├── flume.conf.j2│ ├── flume.env.j2│ └── log4j.j2├── quicklinks│ └── quicklinks.json└── quicklinks.zip flume1.7的ambari展示：flume1.7实时查看日志： 步骤一 服务文件夹 在自用电脑上创建自定义服务文件夹flume1.7 在flume1.7中创建metainfo.xml文件 在flume1.7中创建package，configuration，quicklinks文件夹 在package文件夹中创建scripts，templates文件夹 步骤二 metainfo.xmlmetainfo.xml为服务整体描述完整文件如下： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869[root@test FLUME-1.7]# cat metainfo.xml&lt;?xml version="1.0"?&gt;&lt;metainfo&gt; &lt;schemaVersion&gt;2.0&lt;/schemaVersion&gt; &lt;services&gt; &lt;service&gt; &lt;name&gt;FLUME_1.7&lt;/name&gt; &lt;displayName&gt;FLUME_1.7&lt;/displayName&gt; &lt;comment&gt;FLUME_1.7&lt;/comment&gt; &lt;version&gt;1.7.0&lt;/version&gt; &lt;components&gt; &lt;component&gt; &lt;name&gt;FLUME_1.7_SERVER&lt;/name&gt; &lt;displayName&gt;Flume_1.7 Server&lt;/displayName&gt; &lt;category&gt;MASTER&lt;/category&gt; &lt;cardinality&gt;1&lt;/cardinality&gt; &lt;versionAdvertised&gt;true&lt;/versionAdvertised&gt; &lt;commandScript&gt; &lt;script&gt;scripts/flume_1.7_server.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1500&lt;/timeout&gt; &lt;/commandScript&gt; &lt;logs&gt; &lt;log&gt; &lt;logId&gt;flume_1.7_server&lt;/logId&gt; &lt;primary&gt;true&lt;/primary&gt; &lt;/log&gt; &lt;/logs&gt; &lt;/component&gt; &lt;/components&gt; &lt;osSpecifics&gt; &lt;osSpecific&gt; &lt;osFamily&gt;any&lt;/osFamily&gt; &lt;packages&gt; &lt;package&gt; &lt;name&gt;flume_1.7&lt;/name&gt; &lt;/package&gt; &lt;/packages&gt; &lt;/osSpecific&gt; &lt;/osSpecifics&gt; &lt;commandScript&gt; &lt;script&gt;scripts/service_check.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;300&lt;/timeout&gt; &lt;/commandScript&gt; &lt;configuration-dependencies&gt; &lt;config-type&gt;flume1.7-conf&lt;/config-type&gt; &lt;config-type&gt;flume1.7-env&lt;/config-type&gt; &lt;config-type&gt;flume-log4j-properties&lt;/config-type&gt; &lt;/configuration-dependencies&gt; &lt;restartRequiredAfterChange&gt;true&lt;/restartRequiredAfterChange&gt; &lt;quickLinksConfigurations&gt; &lt;quickLinksConfiguration&gt; &lt;fileName&gt;quicklinks.json&lt;/fileName&gt; &lt;default&gt;true&lt;/default&gt; &lt;/quickLinksConfiguration&gt; &lt;/quickLinksConfigurations&gt; &lt;/service&gt; &lt;/services&gt;&lt;/metainfo&gt; xml文件解析如下 名称定义自定义服务的名称，显示名称，描述，版本号 1234&lt;name&gt;FLUME_1.7&lt;/name&gt;&lt;displayName&gt;FLUME_1.7&lt;/displayName&gt;&lt;comment&gt;FLUME_1.7&lt;/comment&gt;&lt;version&gt;1.7.0&lt;/version&gt; 组件信息组件包括master，slave，client。根据组件的类型不同，能够实现的功能也不一样，且一个自定义服务可同时按照master，slave，client。以flume1.7为例： 1234567891011121314151617181920&lt;components&gt; &lt;component&gt; &lt;name&gt;FLUME_1.7_SERVER&lt;/name&gt; &lt;displayName&gt;Flume_1.7 Server&lt;/displayName&gt; &lt;category&gt;MASTER&lt;/category&gt; &lt;cardinality&gt;1&lt;/cardinality&gt; &lt;versionAdvertised&gt;true&lt;/versionAdvertised&gt; &lt;commandScript&gt; &lt;script&gt;scripts/flume_1.7_server.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1500&lt;/timeout&gt; &lt;/commandScript&gt; &lt;logs&gt; &lt;log&gt; &lt;logId&gt;flume_1.7_server&lt;/logId&gt; &lt;primary&gt;true&lt;/primary&gt; &lt;/log&gt; &lt;/logs&gt; &lt;/component&gt;&lt;/components&gt; 其中基础信息包括组件名称(name),组件显示名称(displayname)。其他几个重要参数，包括： category：描述组件是主服务，节点从服务或是客户端 category类别 默认生命周期命令实现 MASTER install, start, stop, configure, status SLAVE install, start, stop, configure, status CLIENT install, configure, status cardinality：描述组件的数量限制 cardinality格式 格式说明举例 数字 1：表示只能有一个 数字区间 0-1：表示最少有零个，最多有一个 数字单增区间 1+：表示最少有1个 ALL ALL：表示所有节点都需要 commandScript：组件生命周期命令的执行脚本实现 12345&lt;commandScript&gt; &lt;script&gt;scripts/flume_1.7_server.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1500&lt;/timeout&gt;&lt;/commandScript&gt; Ambari支持py写的不同命令的脚本，如果组件需要支持除了默认生命周期命令以外，还可以自定义命令。例如，yarn服务中自定义的resourcemanager服务命令。 123456789101112131415161718192021&lt;component&gt; &lt;name&gt;RESOURCEMANAGER&lt;/name&gt; &lt;category&gt;MASTER&lt;/category&gt; &lt;commandScript&gt; &lt;script&gt;scripts/resourcemanager.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;600&lt;/timeout&gt; &lt;/commandScript&gt; &lt;customCommands&gt; &lt;customCommand&gt; &lt;name&gt;DECOMMISSION&lt;/name&gt; &lt;commandScript&gt; &lt;script&gt;scripts/resourcemanager.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;600&lt;/timeout&gt; &lt;/commandScript&gt; &lt;/customCommand&gt; &lt;/customCommands&gt;&lt;/component&gt; os系统定义12345678910&lt;osSpecifics&gt; &lt;osSpecific&gt; &lt;osFamily&gt;any&lt;/osFamily&gt; &lt;packages&gt; &lt;package&gt; &lt;name&gt;flume_1.7&lt;/name&gt; &lt;/package&gt; &lt;/packages&gt; &lt;/osSpecific&gt;&lt;/osSpecifics&gt; osFamily可定义如：Redhat6，Redhat7，ubuntu14，ubuntu16,any等。package-name，即为yum install或apt-get install的软件包名称 服务检查脚本12345&lt;commandScript&gt; &lt;script&gt;scripts/service_check.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;300&lt;/timeout&gt;&lt;/commandScript&gt; 配置文件12345&lt;configuration-dependencies&gt; &lt;config-type&gt;flume1.7-conf&lt;/config-type&gt; &lt;config-type&gt;flume1.7-env&lt;/config-type&gt; &lt;config-type&gt;flume-log4j-properties&lt;/config-type&gt;&lt;/configuration-dependencies&gt; 配置修改后是否重启1&lt;restartRequiredAfterChange&gt;true&lt;/restartRequiredAfterChange&gt; flume1.7更多的是修改conf文件，所以设置为不重启(需要测试是否能够改动参数) 快速链接123456&lt;quickLinksConfigurations&gt; &lt;quickLinksConfiguration&gt; &lt;fileName&gt;quicklinks.json&lt;/fileName&gt; &lt;default&gt;true&lt;/default&gt; &lt;/quickLinksConfiguration&gt;&lt;/quickLinksConfigurations&gt; 官方示例12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version="1.0"?&gt;&lt;metainfo&gt; &lt;schemaVersion&gt;2.0&lt;/schemaVersion&gt; &lt;services&gt; &lt;service&gt; &lt;name&gt;SAMPLESRV&lt;/name&gt; &lt;displayName&gt;New Sample Service&lt;/displayName&gt; &lt;comment&gt;A New Sample Service&lt;/comment&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;components&gt; &lt;component&gt; &lt;name&gt;SAMPLESRV_MASTER&lt;/name&gt; &lt;displayName&gt;Sample Srv Master&lt;/displayName&gt; &lt;category&gt;MASTER&lt;/category&gt; &lt;cardinality&gt;1&lt;/cardinality&gt; &lt;commandScript&gt; &lt;script&gt;scripts/master.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;600&lt;/timeout&gt; &lt;/commandScript&gt; &lt;/component&gt; &lt;component&gt; &lt;name&gt;SAMPLESRV_SLAVE&lt;/name&gt; &lt;displayName&gt;Sample Srv Slave&lt;/displayName&gt; &lt;category&gt;SLAVE&lt;/category&gt; &lt;cardinality&gt;1+&lt;/cardinality&gt; &lt;commandScript&gt; &lt;script&gt;scripts/slave.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;600&lt;/timeout&gt; &lt;/commandScript&gt; &lt;/component&gt; &lt;component&gt; &lt;name&gt;SAMPLESRV_CLIENT&lt;/name&gt; &lt;displayName&gt;Sample Srv Client&lt;/displayName&gt; &lt;category&gt;CLIENT&lt;/category&gt; &lt;cardinality&gt;1+&lt;/cardinality&gt; &lt;commandScript&gt; &lt;script&gt;scripts/sample_client.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;600&lt;/timeout&gt; &lt;/commandScript&gt; &lt;/component&gt; &lt;/components&gt; &lt;osSpecifics&gt; &lt;osSpecific&gt; &lt;osFamily&gt;any&lt;/osFamily&gt; &lt;!-- note: use osType rather than osFamily for Ambari 1.5.0 and 1.5.1 --&gt; &lt;/osSpecific&gt; &lt;/osSpecifics&gt; &lt;/service&gt; &lt;/services&gt;&lt;/metainfo&gt; 参数详解metoinfo.xml官方文档metoinfo.xml参数汉化 步骤三 configuration服务配置项描述12345678910[root@test configuration]# pwd/opt/apps/flume1.7/FLUME-1.7/configuration[root@test configuration]# tree.├── flume1.7-conf.xml├── flume1.7-env.xml├── flume-log4j-properties.xml└── ori ├── flume-env.sh └── log4j.properties 自定义服务中，服务配置项简单可分为-env和其他配置项（服务自带参数） env配置项要求必须存在，主要描述安装包路径，用户，组，pid文件目录，根目录等。 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768[root@test configuration]# cat flume1.7-env.xml&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;&lt;configuration supports_adding_forbidden="true"&gt; &lt;property&gt; &lt;name&gt;flume.download.url&lt;/name&gt; &lt;value&gt;&lt;/value&gt; &lt;display-name&gt;Flume Download Url&lt;/display-name&gt; &lt;description&gt;Flume package download url.&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;fluem.user&lt;/name&gt; &lt;value&gt;flume1&lt;/value&gt; &lt;property-type&gt;USER&lt;/property-type&gt; &lt;display-name&gt;Flume User&lt;/display-name&gt; &lt;description&gt;flume unix user&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;flume.group&lt;/name&gt; &lt;value&gt;hadoop&lt;/value&gt; &lt;property-type&gt;GROUP&lt;/property-type&gt; &lt;display-name&gt;Flume Group&lt;/display-name&gt; &lt;description&gt;flume unix group&lt;/description&gt; &lt;/property&gt;#flume的安装路径 &lt;property&gt; &lt;name&gt;flume.base.dir&lt;/name&gt; &lt;value&gt;/opt/flume1.7&lt;/value&gt; &lt;display-name&gt;Flume Base Directory&lt;/display-name&gt; &lt;description&gt;flume base directory&lt;/description&gt; &lt;/property&gt;#flume的pid文件路径 &lt;property&gt; &lt;name&gt;pid.file.dir&lt;/name&gt; &lt;value&gt;/var/run/flume1.7&lt;/value&gt; &lt;display-name&gt;Flume Pid File Directory&lt;/display-name&gt; &lt;description&gt;Specifies the path where flume creates the process ID file.&lt;/description&gt; &lt;/property&gt;#flume的日志文件（一般来说不建议放安装路径下，放/var/log下较好，flume安装路径在启动时会更改整个文件夹权限） &lt;property&gt; &lt;name&gt;flume.log.dir&lt;/name&gt; &lt;value&gt;/var/log/flume1.7/logs&lt;/value&gt; &lt;display-name&gt;Flume_Log_Dir&lt;/display-name&gt; &lt;description&gt;flume采集日志&lt;/description&gt; &lt;/property&gt;#flume运行的agent名称，自定义 &lt;property&gt; &lt;name&gt;agent.name&lt;/name&gt; &lt;value&gt;a1&lt;/value&gt; &lt;display-name&gt;Agent Name&lt;/display-name&gt; &lt;description&gt;agent名称&lt;/description&gt; &lt;/property&gt;#flume运行用户，一般为，flume1，root，hdfs &lt;property&gt; &lt;name&gt;flume.ng.user&lt;/name&gt; &lt;value&gt;root&lt;/value&gt; &lt;display-name&gt;Flume-ng User&lt;/display-name&gt; &lt;description&gt;flume启动指定用户&lt;/description&gt; &lt;/property&gt;&lt;/configuration&gt; conf文件conf文件即组件运行需要的参数文件。对flume来说，即为flume运行时读取的conf文件。 123456789101112131415161718192021[root@test configuration]# cat flume1.7-conf.xml&lt;?xml version="1.0"?&gt;&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;&lt;configuration supports_final="false" supports_adding_forbidden="true"&gt; &lt;property&gt; &lt;name&gt;content&lt;/name&gt; &lt;display-name&gt;flume-conf template&lt;/display-name&gt; &lt;description&gt;Flume agent configurations. Specifying the configuration here applies to all hosts in this configuration-group. Please use host specific configuration-groups to provide different configurations on different hosts. For configuring multiple agents on the same host, provide the combined agent configurations here. Each agent should have a different name.&lt;/description&gt; &lt;value&gt;# Flume agent config &lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;content&lt;/type&gt; &lt;empty-value-valid&gt;true&lt;/empty-value-valid&gt; &lt;show-property-name&gt;false&lt;/show-property-name&gt; &lt;/value-attributes&gt; &lt;on-ambari-upgrade add="true"/&gt; &lt;/property&gt;&lt;/configuration&gt; 效果图如下： 注意flume的conf文件需要完全自定义，所以没有其他的内容。对于需要设置的参数的conf文件，可参考env文件中设置，如下： 123456&lt;property&gt; &lt;name&gt;elasticsearch.base.dir&lt;/name&gt; &lt;value&gt;/opt/elasticsearch&lt;/value&gt; &lt;display-name&gt;Elasticsearch Base Directory&lt;/display-name&gt; &lt;description&gt;Elasticsearch base directory.&lt;/description&gt;&lt;/property&gt; 默认情况下，&lt;value&gt;值不能为空，如果想允许值为空，可在&lt;value-attributes&gt;下添加&lt;empty-value-valid&gt;为true，即在web页面设置参数时，此值可以为空。 12345678&lt;property&gt; &lt;name&gt;server.basePath&lt;/name&gt; &lt;value&gt;none&lt;/value&gt; &lt;value-attributes&gt; &lt;empty-value-valid&gt;true&lt;/empty-value-valid&gt; &lt;/value-attributes&gt; &lt;display-name&gt;Server Base Path&lt;/display-name&gt;&lt;/property&gt; &lt;value-attributes&gt;还支持一些常见的格式，例如boolean：此处要注意，xml文件中填写值的时候需要小写（false，true）。但后续代码在获取参数时，获取的是boolean类型的False和True 12345678910&lt;property&gt; &lt;name&gt;server.rewriteBasePath&lt;/name&gt; &lt;value&gt;false&lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;boolean&lt;/type&gt; &lt;overridable&gt;false&lt;/overridable&gt; &lt;/value-attributes&gt; &lt;display-name&gt;Server Rewrite Base Path&lt;/display-name&gt; &lt;description&gt;xxxx&lt;/description&gt;&lt;/property&gt; &lt;value-attributes&gt;针对密码类型的支持：将值显示为*号 123456789&lt;property&gt; &lt;name&gt;zeppelin.ssl.keystore.password&lt;/name&gt; &lt;value&gt;change me&lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;password&lt;/type&gt; &lt;/value-attributes&gt; &lt;property-type&gt;PASSWORD&lt;/property-type&gt; &lt;description&gt;Keystore password. Can be obfuscated by the Jetty Password tool&lt;/description&gt;&lt;/property&gt; &lt;value-attributes&gt;针对数字类型的支持，其中type可以为int,long等，minimum和maximum为可选参数用于给定范围，unit为单位显示等，例如： 123456789101112131415&lt;property&gt; &lt;name&gt;ops.interval&lt;/name&gt; &lt;value&gt;5000&lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;int&lt;/type&gt; &lt;minimum&gt;100&lt;/minimum&gt; &lt;maximum&gt;50000&lt;/maximum&gt; &lt;unit&gt;Milliseconds&lt;/unit&gt; &lt;increment-step&gt;100&lt;/increment-step&gt; &lt;overridable&gt;false&lt;/overridable&gt; &lt;/value-attributes&gt; &lt;display-name&gt;Ops Interval&lt;/display-name&gt; &lt;description&gt;Set the interval in milliseconds to sample system and process performance metrics. Minimum is 100ms. Defaults to 5000.&lt;/description&gt;&lt;/property&gt; 步骤四 package服务交互代码实现1234567891011121314151617[root@test package]# pwd/opt/apps/flume1.7/FLUME-1.7/package[root@test package]# ll总用量 0drwxr-xr-x. 2 root root 98 11月 29 10:47 scriptsdrwxr-xr-x. 2 root root 63 12月 2 18:25 templates[root@test package]# tree.├── scripts│ ├── flume_1.7_server.py│ ├── params.py│ ├── service_check.py│ └── status_params.py└── templates ├── flume.conf.j2 ├── flume.env.j2 └── log4j.j2 scripts-py脚本flume_1.7_server为mateinfo.xml定义的组件执行脚本，params，service_check，status_params为必须实现且不能改名的脚本，主要实现参数的获取和加工、服务检查、为服务检查提供参数。 脚本 具体实现 要求及说明 params 通过Script类的方法读取之前configuration文件夹中.xml文件定义的各个配置变量，有需要的话进行进一步加工,例如单位的添加，列表的解析，布尔值的转换等 脚本名称不可修改 service_check 组件运行状态检查 脚本名称要与metainfo.xml中定义的保持一致 status_params 引用pid文件目录及文件参数即可 内容参数可以与params中的对应项保持一致（之所以独立，是受ambari的检查机制读所限，其在做检查时是不会走params的） flume_1.7_server 组件的install，start，stop等命令的实现 脚本名称要与metainfo.xml中定义的保持一致 flume_1.7_server官方模板如下: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#组件安装分为master，slave，client。不同类型需要实现的命令也不同，将命令实现即可##masterimport sysfrom resource_management import *class Master(Script): def install(self, env): print 'Install the Sample Srv Master'; def stop(self, env): print 'Stop the Sample Srv Master'; def start(self, env): print 'Start the Sample Srv Master'; def status(self, env): print 'Status of the Sample Srv Master'; def configure(self, env): print 'Configure the Sample Srv Master';if __name__ == "__main__": Master().execute()##slaveimport sysfrom resource_management import *class Slave(Script): def install(self, env): print 'Install the Sample Srv Slave'; def stop(self, env): print 'Stop the Sample Srv Slave'; def start(self, env): print 'Start the Sample Srv Slave'; def status(self, env): print 'Status of the Sample Srv Slave'; def configure(self, env): print 'Configure the Sample Srv Slave';if __name__ == "__main__": Slave().execute()##clientimport sysfrom resource_management import *class SampleClient(Script): def install(self, env): print 'Install the Sample Srv Client'; def configure(self, env): print 'Configure the Sample Srv Client';if __name__ == "__main__": SampleClient().execute() 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174[root@test scripts]# cat flume_1.7_server.py# -*- coding: utf-8 -*-import sys, os, glob, pwd, grp, signal, timefrom resource_management import *reload(sys)sys.setdefaultencoding("utf-8")class FlumeServer(Script): #Install flume def install(self,env): import params env.set_params(params) #create group try: grp.getgrnam(params.flume_group) except KeyError: Group(group_name=params.flume_group) #create user try: pwd.getpwnam(params.flume_user) except KeyError: User(username=params.flume_user, gid=params.flume_group, groups=[params.flume_group], ignore_failures=True ) # Create directories Directory([params.flume_base_dir, params.pid_file_dir], mode=0755, cd_access='a', owner=params.flume_user, group=params.flume_group, create_parents=True ) # Download flume cmd = format("cd &#123;flume_base_dir&#125;; wget &#123;flume_download_url&#125; -O flume.tar.gz") Execute(cmd, user=params.flume_user) # Install flume cmd = format("cd &#123;flume_base_dir&#125;; tar -xf flume.tar.gz --strip-components=1") Execute(cmd, user=params.flume_user) # Ensure all files owned by Kiflumebana user cmd = format("chown -R &#123;flume_user&#125;:&#123;flume_group&#125; &#123;flume_base_dir&#125;") Execute(cmd) # Remove flume installation file cmd = format("cd &#123;flume_base_dir&#125;; rm -fr flume.tar.gz") Execute(cmd, user=params.flume_user) Execute('echo "Flume1.7 install complete"') # configure flume def configure(self, env): import params env.set_params(params) #设置env的参数模板被赋值之后生成为组件运行的参数文件 env_configurations = params.config['configurations']['flume1.7-env'] File(format("&#123;flume_base_dir&#125;/conf/flume-env.sh"), content=Template("flume.env.j2", configurations=env_configurations), owner=params.flume_user, group=params.flume_group ) configurations = params.config['configurations']['flume1.7-conf'] File(format("&#123;flume_base_dir&#125;/conf/myflume.conf"), content=Template("flume.conf.j2", configurations=configurations), owner=params.flume_user, group=params.flume_group ) # log4j log_configurations = params.config['configurations']['flume-log4j-properties'] File(format("&#123;flume_base_dir&#125;/conf/log4j.properties"), content=Template("log4j.j2", configurations=configurations), owner=params.flume_user, group=params.flume_group ) cmd = format("chown -R &#123;flume_user&#125;:&#123;flume_group&#125; &#123;flume_base_dir&#125;") Execute(cmd) # Make sure pid directory exist Directory([params.pid_file_dir,params.flume_log_dir], mode=0755, cd_access='a', owner=params.flume_ng_user, group=params.flume_group, create_parents=True ) Execute('echo "Configuration complete"') def stop(self, env): import params env.set_params(params) # Stop flume """ Kill the process by pid file, then check the process is running or not. If the process is still running after the kill command, it will try to kill with -9 option (hard kill) """ pid_file = params.pid_file pid_file_bak = params.pid_file_bak pid = os.popen('cat &#123;pid_file&#125;'.format(pid_file=pid_file)).read() # process_id_exists_command = format("ls &#123;pid_file&#125; &gt; /dev/null 2&gt;&amp;1 &amp;&amp; ps -p &#123;pid&#125; &gt;/dev/null 2&gt;&amp;1") # process_id_exists_command = format("echo 'stop'") kill_cmd = format("kill &#123;pid&#125;") Execute(kill_cmd) # wait_time = 5 time.sleep(8) hard_kill_cmd = format("kill -9 &#123;pid&#125;") Execute(hard_kill_cmd,ignore_failures=True) File(pid_file_bak, action="delete" ) File(pid_file, action="delete" ) def start(self, env): import params env.set_params(params) # Configure flume self.configure(env) # Start flume # nohup ./bin/flume-ng agent -n a1 -c ./conf/ -f ./conf/myconf/avro_memory_hdfs.conf &amp; # cmd = format("nohup &#123;flume_base_dir&#125;/bin/flume-ng agent -n &#123;agent_name&#125; -c &#123;flume_base_dir&#125;/conf -f &#123;flume_base_dir&#125;/conf/myflume.conf &amp;") #服务启动需要将启动日志取消显示，否则会启动不成功 cmd = format("&#123;flume_base_dir&#125;/bin/flume-ng agent -n &#123;agent_name&#125; -c &#123;flume_base_dir&#125;/conf -f &#123;flume_base_dir&#125;/conf/myflume.conf &gt; &#123;flume_log_dir&#125;/flume-&#123;agent_name&#125;-&#123;flume_ng_user&#125;.out 2&gt;&amp;1 &amp;") Execute(cmd, user=params.flume_ng_user) time.sleep(5) # sometimes startup spawns a couple of threads - so only the first line may count # os.system("echo `sudo -u &#123;flume_ng_user&#125; pgrep -f flume | awk 'NR == 1'` &gt; &#123;pid_file&#125;") pid_cmd = format("echo `pgrep -f flume` &gt; &#123;pid_file_bak&#125;") Execute(pid_cmd,user=params.flume_ng_user) time.sleep(5) #os.system("echo 'hello') # os.system中传入变量出错，不使用成功 # os.system("echo `cat /var/run/flume1.7/flume.pidbak | awk '&#123;print $2&#125;'` &gt; /var/run/flume1.7/flume.pid") # python中要想输出&#123;&#125; 就加两层&#123;&#123;&#125;&#125; #通过ps命令获取flume的pid进程号，再将此进程号写入pid文件，以用于进程检测和杀死进程 pid_cmd2 = format("echo `cat &#123;pid_file_bak&#125; | awk '&#123;&#123;print $2&#125;&#125;'` &gt; &#123;pid_file&#125;") Execute(pid_cmd2,user=params.flume_ng_user) print("启动完成") def status(self, env): import status_params env.set_params(status_params) # Use built-in method to check status using pidfile check_process_status(status_params.pid_file)if __name__ == "__main__": FlumeServer().execute() params1234567891011121314151617181920212223242526272829303132# -*- coding: utf-8 -*-#!/usr/bin/env python"""Kibana Params configurations"""from resource_management.libraries.functions.version import format_hdp_stack_version, compare_versionsfrom resource_management import *import osconfig = Script.get_config()# flume envflume_user = config['configurations']['flume1.7-env']['fluem.user']flume_group = config['configurations']['flume1.7-env']['flume.group']flume_base_dir = config['configurations']['flume1.7-env']['flume.base.dir']flume_download_url = config['configurations']['flume1.7-env']['flume.download.url']pid_file_dir = config['configurations']['flume1.7-env']['pid.file.dir']pid_file = pid_file_dir + '/flume.pid'pid_file_bak = pid_file_dir + '/flume.pidbak'flume_ng_user = config['configurations']['flume1.7-env']['flume.ng.user']flume_agent_conf_content = config['configurations']['flume1.7-conf']['content']#logflume_log_dir = config['configurations']['flume1.7-env']['flume.log.dir']#agentagent_name = config['configurations']['flume1.7-env']['agent.name']java_home = '/opt/apps/jdk1.8.0_144' service_check12345678910111213# -*- coding: utf-8 -*-import sys, os, glob, pwd, grp, signal, timefrom resource_management import *class ServiceCheck(Script): def service_check(self, env): import params env.set_params(params) time.sleep(5) check_process_status(params.pid_file)if __name__ == "__main__": ServiceCheck().execute() status_params123456789# -*- coding: utf-8 -*-#!/usr/bin/env python"""flume service params"""from resource_management import *config = Script.get_config()pid_file_dir = config['configurations']['flume1.7-env']['pid.file.dir']pid_file = format("&#123;pid_file_dir&#125;/flume.pid") templates-参数文件模板用户通过web页面设置参数，即conf和env文件中得到参数，通过python脚本再将此参数赋值给模板[params脚本获取值并将值赋予变量，模板通过变量获取具体值]，再将设置好参数的模板文件生成到组件安装文件夹的对应路径下，这就完成了参数的设置和更新。 12345678#模板的名称需要和py脚本中一致[root@test templates]# pwd/opt/apps/flume1.7/FLUME-1.7/package/templates[root@test templates]# ll总用量 12-rw-r--r--. 1 root root 1094 12月 2 18:15 flume.conf.j2-rw-r--r--. 1 root root 1715 12月 3 10:06 flume.env.j2-rw-r--r--. 1 root root 3172 12月 9 11:13 log4j.j2 flume.conf.j212[root@test templates]# cat flume.conf.j2&#123;&#123;flume_agent_conf_content&#125;&#125; flume.env.j212345678910111213141516[root@test templates]# cat flume.env.j2# Enviroment variables can be set here.export JAVA_HOME=/opt/apps/jdk1.8.0_144# Give Flume more memory and pre-allocate, enable remote monitoring via JMX# export JAVA_OPTS="-Xms100m -Xmx2000m -Dcom.sun.management.jmxremote"export JAVA_OPTS="-Xms2048m -Xmx2048m -Xss256k -Xmn1g -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:-UseGCOverheadLimit"# Let Flume write raw event data and configuration information to its log files for debugging# purposes. Enabling these flags is not recommended in production,# as it may result in logging sensitive user information or encryption secrets.# export JAVA_OPTS="$JAVA_OPTS -Dorg.apache.flume.log.rawdata=true -Dorg.apache.flume.log.printconfig=true "# Note that the Flume conf directory is always included in the classpath.#FLUME_CLASSPATH="" log4j.j21234567891011121314151617181920212223242526272829303132333435363738394041424344454647[root@test templates]# cat log4j.j2# Define some default values that can be overridden by system properties.## For testing, it may also be convenient to specify# -Dflume.root.logger=DEBUG,console when launching flume.#flume.root.logger=DEBUG,consoleflume.root.logger=INFO,LOGFILEflume.log.dir=&#123;&#123;flume_log_dir&#125;&#125;flume.log.file=flume-&#123;&#123;agent_name&#125;&#125;-&#123;&#123;flume_ng_user&#125;&#125;.loglog4j.logger.org.apache.flume.lifecycle = INFOlog4j.logger.org.jboss = WARNlog4j.logger.org.mortbay = INFOlog4j.logger.org.apache.avro.ipc.NettyTransceiver = WARNlog4j.logger.org.apache.hadoop = INFO# Define the root logger to the system property "flume.root.logger".log4j.rootLogger=$&#123;flume.root.logger&#125;# Stock log4j rolling file appender# Default log rotation configurationlog4j.appender.LOGFILE=org.apache.log4j.RollingFileAppenderlog4j.appender.LOGFILE.MaxFileSize=100MBlog4j.appender.LOGFILE.MaxBackupIndex=10log4j.appender.LOGFILE.File=$&#123;flume.log.dir&#125;/$&#123;flume.log.file&#125;log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayoutlog4j.appender.LOGFILE.layout.ConversionPattern=%d&#123;dd MMM yyyy HH:mm:ss,SSS&#125; %-5p [%t] (%C.%M:%L) %x - %m%n# Warning: If you enable the following appender it will fill up your disk if you don't have a cleanup job!# This uses the updated rolling file appender from log4j-extras that supports a reliable time-based rolling policy.# See http://logging.apache.org/log4j/companions/extras/apidocs/org/apache/log4j/rolling/TimeBasedRollingPolicy.html# Add "DAILY" to flume.root.logger above if you want to use thislog4j.appender.DAILY=org.apache.log4j.rolling.RollingFileAppenderlog4j.appender.DAILY.rollingPolicy=org.apache.log4j.rolling.TimeBasedRollingPolicylog4j.appender.DAILY.rollingPolicy.ActiveFileName=$&#123;flume.log.dir&#125;/$&#123;flume.log.file&#125;log4j.appender.DAILY.rollingPolicy.FileNamePattern=$&#123;flume.log.dir&#125;/$&#123;flume.log.file&#125;.%d&#123;yyyy-MM-dd&#125;log4j.appender.DAILY.layout=org.apache.log4j.PatternLayoutlog4j.appender.DAILY.layout.ConversionPattern=%d&#123;dd MMM yyyy HH:mm:ss,SSS&#125; %-5p [%t] (%C.%M:%L) %x - %m%n# console# Add "console" to flume.root.logger above if you want to use thislog4j.appender.console=org.apache.log4j.ConsoleAppenderlog4j.appender.console.target=System.errlog4j.appender.console.layout=org.apache.log4j.PatternLayoutlog4j.appender.console.layout.ConversionPattern=%d (%t) [%p - %l] %m%n 步骤五 quicklinks12345[root@test quicklinks]# pwd/opt/apps/flume1.7/FLUME-1.7/quicklinks[root@test quicklinks]# ll总用量 4-rw-r--r--. 1 root root 642 12月 6 13:51 quicklinks.json quicklinks.json123456789101112131415161718192021222324252627282930[root@test quicklinks]# cat quicklinks.json#一般来说只需要改动端口即可，ip地址默认是组件安装的地址&#123; "name": "default", "description": "default quick links configuration", "configuration": &#123; "protocol": &#123; "type":"http", "checks":[ ] &#125;, "links": [ &#123; "name": "flume_logs", "label": "FLUME LOGS", "requires_user_name": "false", "component_name": "FLUME_1.7_SERVER", "url":"%@://%@:%@", "port":&#123; "http_property": "http_port", "http_default_port": "28778", "https_property": "http_port", "https_default_port": "28778", "regex": "\\w*:(\\d+)", "site": "flume1.7-conf" &#125; &#125; ] &#125;&#125; 步骤六 设置安装包在http服务文件夹中新建目录，并将flume1.7的安装包上传，不用解压缩 12345[root@vm01 ambari_server]# pwd/var/www/html/ambari_server[root@vm01 ambari_server]# lltotal 54408-rw-r--r-- 1 root root 55711670 Dec 21 21:24 apache-flume-1.7.0-bin.tar.gz 步骤七 上传安装将已经完成的服务文件夹在个人电脑内压缩打包，上传至Ambari集群的主节点上，解压缩，然后将解压缩的文件复制到ambari services路径之下： 1[root@vm01 apps]# cp -r ./FLUME-1.7 /var/lib/ambari-server/resources/stacks/HDP/2.6/services 重启ambari-server，然后在web页面进行安装并设置参数： 设置参数设置conf文件【必须设置，不可为空】示例文件： 1234567891011121314151617181920212223242526272829#采集本机日志文件到控制台打印#配置一个采集器a1.sources=r1a1.channels=c1a1.sinks=k1#source的配置a1.sources = r1a1.channels = c1a1.sources.r1.type = netcata1.sources.r1.bind = 0.0.0.0a1.sources.r1.port = 6666a1.sources.r1.channels = c1#channel的配置a1.channels = c1a1.channels.c1.type = memorya1.channels.c1.capacity = 10000a1.channels.c1.transactionCapacity = 10000a1.channels.c1.byteCapacityBufferPercentage = 20a1.channels.c1.byteCapacity = 800000#sinka1.channels = c1a1.sinks = k1a1.sinks.k1.type = loggera1.sinks.k1.channel = c1 设置download下载地址，此地址为httpd服务安装包地址设置flume运行的用户，默认为root用户 安装完结果如下： 注：flume log需要安装log.io组件，并设置监测路径为flume的日志，out和log。暂时未把此组件加入flume1.7之中。可单独设置，也可和flume1.7一并进行集成。但一并集成其实也就相当于集成一个新的组件，推荐将log.io作为新增的自定义服务，且可以将除了flume1.7之外的其他组件的日志一并进行监控。（log.io并不是通过压缩包安装，而是使用node.js命令安装，只需要更改下载地址，并把python脚本的安装命令更改即可。且node安装log.io需要6.17版本，参考） Ambari集成flume1.7的简便方法下载本人已经完成的flume1.7文件夹]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>HDP</tag>
        <tag>Ambari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MongoDB学习]]></title>
    <url>%2F2019%2F11%2F28%2FLearn%2FMongoDB%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[简介数据库数据库就是存放各种数据的一个仓库。但是现实中数据何其多，和其复杂，所以数据并不是随意的放入数据库，而是有一定规则，以此来保证查询的效率。数据库不仅仅要满足存储数据，还需要满足增删改查 关系型数据库关系型数据库是指采用了关系模型来组织数据的数据库。关系模型就指的是二维表格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。 使用sql语言进行数据操作 oracle，mysql，sql server，postgresql，db2 非关系型数据库非关系型数据库是指非关系型的，分布式的，且一般不保证遵循ACID原则的数据存储系统。以键值对存储，结构不固定，每一个元组可以有不一样的字段，每个元组可以根据需要增加一些自己的键值对，不局限与固定的结构。 redis，MongoDB MongoDb的安装下载上传解压MongoDB压缩包123456789101112131415161718192021222324[root@test mongodb]# pwd/opt/apps/mongodb[root@test mongodb]# ll总用量 83228-rw-r--r--. 1 root root 85223276 11月 18 15:56 mongodb-linux-x86_64-4.0.13.tgz[root@test mongodb]# tar -zxvf mongodb-linux-x86_64-4.0.13.tgzmongodb-linux-x86_64-4.0.13/THIRD-PARTY-NOTICES.gotoolsmongodb-linux-x86_64-4.0.13/READMEmongodb-linux-x86_64-4.0.13/THIRD-PARTY-NOTICESmongodb-linux-x86_64-4.0.13/MPL-2mongodb-linux-x86_64-4.0.13/LICENSE-Community.txtmongodb-linux-x86_64-4.0.13/bin/mongodumpmongodb-linux-x86_64-4.0.13/bin/mongorestoremongodb-linux-x86_64-4.0.13/bin/mongoexportmongodb-linux-x86_64-4.0.13/bin/mongoimportmongodb-linux-x86_64-4.0.13/bin/mongostatmongodb-linux-x86_64-4.0.13/bin/mongotopmongodb-linux-x86_64-4.0.13/bin/bsondumpmongodb-linux-x86_64-4.0.13/bin/mongofilesmongodb-linux-x86_64-4.0.13/bin/mongoreplaymongodb-linux-x86_64-4.0.13/bin/mongodmongodb-linux-x86_64-4.0.13/bin/mongosmongodb-linux-x86_64-4.0.13/bin/mongomongodb-linux-x86_64-4.0.13/bin/install_compass 添加MongoDB环境变量12export MONGODB_HOME=/opt/apps/mongodb/mongodb-linux-x86_64-4.0.13export PATH=$PATH:$JAVA_HOME/bin:$NODE_HOME/bin:$MAVEN_HOME/bin:$MONGODB_HOME/bin 启动MongoDB数据库目录需要手动创建，是存储MongoDB的数据的目录 12#mongodb默认的数据库路径为/data/db，使用--dbpath指定路径[root@test data]# mongod --dbpath /opt/apps/mongodb/mongodb-linux-x86_64-4.0.13/data MongoDB后台管理界面执行MongoDB目录下Mongo命令文件，可进入MongoDB的shell命令行 1234567891011121314151617181920212223242526272829303132333435363738394041424344#配置了环境变量之后，可以很方便的进入#MongoDB的shell是一个JavaScript shell，所以可以进行简单的运算操作[root@test ~]# mongoMongoDB shell version v4.0.13connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName=mongodbImplicit session: session &#123; "id" : UUID("d1a116d7-fff3-48b0-9bc6-61e61db2bad2") &#125;MongoDB server version: 4.0.13Welcome to the MongoDB shell.For interactive help, type "help".For more comprehensive documentation, see http://docs.mongodb.org/Questions? Try the support group http://groups.google.com/group/mongodb-userServer has startup warnings:2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten]2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** WARNING: Access control is not enabled for the database.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** Read and write access to data and configuration is unrestricted.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** WARNING: You are running this process as the root user, which is not recommended.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten]2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** WARNING: This server is bound to localhost.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** Remote systems will be unable to connect to this server.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** Start the server with --bind_ip &lt;address&gt; to specify which IP2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** addresses it should serve responses from, or with --bind_ip_all to2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** bind to all interfaces. If this behavior is desired, start the2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** server with --bind_ip 127.0.0.1 to disable this warning.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten]2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten]2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** We suggest setting it to 'never'2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten]2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'.2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten] ** We suggest setting it to 'never'2019-11-18T16:11:43.802+0800 I CONTROL [initandlisten]&gt;&gt; 2 + 24&gt; 36+3672#插入数据&gt; db.runoob.insert(&#123;x:10&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)#查询数据&gt; db.runoob.find()&#123; "_id" : ObjectId("5dd2546583144dbb205ea39c"), "x" : 10 &#125; MongoDB操作MongoDB概念 SQL术语/概念 MongoDB术语/概念 解释/说明 database database 数据库 table collection 数据库表/集合 row document 数据记录行/文档 column field 数据字段/域 index index 索引 table joins 表连接，MongoDb不支持 primary key primary key 主键，MongoDB自动将_id字段设置为主键 数据库一个MongoDB可以建立多个数据库MongoDB的默认数据库为“db”，该数据库存储在data目录中。MongoDB的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限 1234567891011121314#"show dbs"展示所有数据的列表&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBtest 0.000GB#"db"显示当前数据库对象和集合&gt; dbtest#"use dbname"使用指定的数据库&gt; use localswitched to db local&gt; dblocal 默认存在的数据库：admin：从权限的角度来看，这是“root”数据库。要是将一个用户添加到这个数据库，那么这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行local：config： 文档文档是一组键值对(即BSON)。MongoDB的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型。相当于RDBMS的数据记录行 1&#123;"site":"www.runoob.com","name":"菜鸟教程"&#125; 集合集合是MongoDB的文档组，类似于RDBMS的表格 123&#123;"site":"www.baidu.com"&#125;&#123;"site":"www.google.com","name":"Google"&#125;&#123;"site":"www.runoob.com","name":"菜鸟教程","num":5&#125; MongoDB创建数据库123456789101112131415161718192021222324# `use db_name`#如果数据库不存在，则创建数据库，否则切换到指定数据库&gt; use test3switched to db test3&gt; dbtest3#查看所有数据库&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBtest 0.000GBtest2 0.000GB#如果数据库中没有数据，是不会真正被创建。所以我们需要在里面插入点数据#插入数据，需要指定数据类型&gt; db.runoob.insert(&#123;name:"zz"&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBtest 0.000GBtest2 0.000GBtest3 0.000GB MongoDB删除数据库1234567891011121314151617181920212223&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBtest 0.000GBtest2 0.000GBtest3 0.000GB&gt; dbtest&gt; use test3switched to db test3&gt; dbtest3# "db.dropDatabase()"删除数据库# db是当前所使用的数据库&gt; db.dropDatabase()&#123; "dropped" : "test3", "ok" : 1 &#125;&gt; show dbsadmin 0.000GBconfig 0.000GBlocal 0.000GBtest 0.000GBtest2 0.000GB MongoDB创建集合集合MongoDB中的文档组，类似于RDBMS中的表格 语法：db.createCollection(name,options)参数说明：name:要创建的集合名称options:可选参数，指定有关内存大小及索引的选项 option参数如下： 字段 类型 描述 capped 布尔值 如果为true，则创建固定集合，固定集合是指由固定大小的集合，当达到最大值时，它会自动覆盖最早的文档【当该值为true时，必须指定size参数】 size 数值 为固定集合指定一个最大值，以千字节计（KB） autoIndexId 布尔 如果为true，自动在_id字段创建索引。默认为false max 数值 指定固定集合中包含文档的最大数量 插入文档时，MongoDB首先检查固定集合的size字段，然后检查max字段 12345678910111213141516171819202122232425262728&gt; use testswitched to db test&gt; dbtest#创建一个test_c集合&gt; db.createCollection("test_c")&#123; "ok" : 1 &#125;#查看已有集合`show collections`或者`show tables`&gt; show collectionsrunoobtest_c&gt; show tablesrunoobtest_c#创建一个带有参数的集合【注：autoIndexId参数已经在4.0以上版本被弃用】&gt; db.createCollection("test_c2",&#123;capped:true,size:6142800,max:100,autoIndexId:true&#125;)&#123; "note" : "the autoIndexId option is deprecated and will be removed in a future release", "ok" : 1&#125;#MongoDB中也可以不创建集合，直接在插入内容时自动创建，所以一般来说需要设置参数时使用命令行创建集合&gt; db.test_c3.insert(&#123;name:"cainiaojioacheng"&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; show tablesrunoobtest_ctest_c2test_c3 MongoDB删除集合语法：db.collection.drop()成功删除选定集合，返回true，否则返回false 1234567891011121314&gt; show tablesrunoobtest_ctest_c2test_c3&gt; dbtest&gt; db.test_c3.drop()true&gt; db.test_c2.drop()true&gt; show collectionsrunoobtest_c 插入文档文档的数据结构和json基本一样，存储在集合中的数据都是bson格式，bson是一种类似于json的二进制形式的存储格式，是binary json的简称 语法：db.collection_name.insert(document) 12345678910111213141516171819202122232425262728293031&gt; show collectionsrunoobtest_c&gt; dbtest#插入文档【集合不存在，自动创建集合并插入内容】&gt; db.test_c3.insert(&#123;title2:"mongodb2",descripeion:"mongodb是一个nosql数据库",by:"菜鸟教程",tags:['mongodb','database','nosql']&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c3.insert(&#123;title2:"mongodb2"&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)#查看文档&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb2", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ] &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "title2" : "mongodb2" &#125;#将documetn文档赋值给一个变量，然后将变量插入&gt; document=(&#123;title:"菜鸟教程",desc:"nosql数据库",tags:['mongodb','nosql']&#125;)&#123; "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ]&#125;&gt; db.test_c3.insert(document)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb2", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ] &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "title2" : "mongodb2" &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125; 更新文档MongoDB使用update()方法和save()方法来更新集合中的文档 update()语法：用于更新已存在的文档 1db.collection.update(&lt;query&gt;,&lt;update&gt;,&#123;upsert:&lt;boolean&gt;,multi:&lt;boolean&gt;,writeConcern:&lt;document&gt;&#125;) 参数说明： query：update的查询条件【类似于sql语句中where后面，{key:value}】 update：update的对象和一些更新的操作符（$set:{key:value2}） upsert：可选，意思是如果不存在update的记录，是否插入objNew，true为插入，默认是false multi：可选，默认false，只更新找到的第一条记录，如果参数为true，就会将查询出来的多条记录全部更新 writeConcern：可选，抛出异常的级别 12345678910111213141516171819202122232425262728293031323334&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb2", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "title2" : "mongodb2" &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125;#update更新文档&gt; db.test_c3.update(&#123;"title2":"mongodb2"&#125;,&#123;$set:&#123;"title2":"mongodb教程"&#125;&#125;)WriteResult(&#123; "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 &#125;)&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "title2" : "mongodb2" &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125;&gt; db.test_c3.find().pretty()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程"&#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "title2" : "mongodb2" &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ]&#125; 12345678910111213141516171819202122232425&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "title2" : "mongodb2" &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125;#没有使用$set，在update时，会将query查询出来的文档整个替换&gt; db.test_c3.update(&#123;"title2":"mongodb2"&#125;,&#123;upsert:true&#125;)WriteResult(&#123; "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 &#125;)&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "upsert" : true &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125;#使用$set，但是key值不同，无法更新，只是插入内容&gt; db.test_c3.update(&#123;"upsert":true&#125;,&#123;$set:&#123;"upsert2":false&#125;&#125;)WriteResult(&#123; "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 &#125;)&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "upsert" : true, "upsert2" : false &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125;#使用$set，key相同，成功update&gt; db.test_c3.update(&#123;"upsert":true&#125;,&#123;$set:&#123;"upsert":false&#125;&#125;)WriteResult(&#123; "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 &#125;)&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "upsert" : false, "upsert2" : false &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125; save()语法：通过传入的文档来替换已有文档 1234567891011121314#通过_id确定文档，然后替换整个文档的内容&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "title2" : "mongodb教程", "descripeion" : "mongodb是一个nosql数据库", "by" : "菜鸟教程", "tags" : [ "mongodb", "database", "nosql" ], "title" : "mongodb教程" &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "upsert" : false, "upsert2" : false &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125;&gt;&gt;&gt;&gt; db.test_c3.save(&#123;"_id":ObjectId("5dd3577dba3cfd6cf854f5dc"),"name":"zx","age":18&#125;)WriteResult(&#123; "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 &#125;)&gt; db.test_c3.find()&#123; "_id" : ObjectId("5dd3577dba3cfd6cf854f5dc"), "name" : "zx", "age" : 18 &#125;&#123; "_id" : ObjectId("5dd3578cba3cfd6cf854f5dd"), "upsert" : false, "upsert2" : false &#125;&#123; "_id" : ObjectId("5dd3586bba3cfd6cf854f5de"), "title" : "菜鸟教程", "desc" : "nosql数据库", "tags" : [ "mongodb", "nosql" ] &#125; 删除文档语法： 1234567db.collection.remove(&lt;query&gt;,&#123; justOne:&lt;boolean&gt;, writeConcern:&lt;document&gt;&#125;) 参数说明： query：（可选），删除文档的条件 justOne：（可选）如果设置为true或者1，则只删除一个文档，如果不设置该参数，默认为false，则删除所有匹配条件的文档 writeConcern：（可选），抛出异常的级别 123456789101112131415&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125;&gt; db.test_c2.insert(&#123;name:"zz",age:18,score:99&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c2.insert(&#123;name:"zz",age:18,score:99&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125;&#123; "_id" : ObjectId("5dd384d1ba3cfd6cf854f5df"), "name" : "zz", "age" : 18, "score" : 99 &#125;&#123; "_id" : ObjectId("5dd384d9ba3cfd6cf854f5e0"), "name" : "zz", "age" : 18, "score" : 99 &#125;#删除满足条件的文档&gt; db.test_c2.remove(&#123;name:"zz"&#125;)WriteResult(&#123; "nRemoved" : 2 &#125;)&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125; 12345678910111213141516&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125;&gt; db.test_c2.insert(&#123;name:"zz",age:18,score:99&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c2.insert(&#123;name:"zz",age:18,score:99&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125;&#123; "_id" : ObjectId("5dd3855aba3cfd6cf854f5e1"), "name" : "zz", "age" : 18, "score" : 99 &#125;&#123; "_id" : ObjectId("5dd3855bba3cfd6cf854f5e2"), "name" : "zz", "age" : 18, "score" : 99 &#125;#设置justOne，只删除一个文档&gt; db.test_c2.remove(&#123;name:"zz"&#125;,&#123;justOne:true&#125;)WriteResult(&#123; "nRemoved" : 1 &#125;)&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125;&#123; "_id" : ObjectId("5dd3855bba3cfd6cf854f5e2"), "name" : "zz", "age" : 18, "score" : 99 &#125; 12345678&gt; db.test_c2.find()&#123; "_id" : ObjectId("5dd3569eba3cfd6cf854f5db"), "title" : "mongodb" &#125;&#123; "_id" : ObjectId("5dd3855bba3cfd6cf854f5e2"), "name" : "zz", "age" : 18, "score" : 99 &#125;&#123; "_id" : ObjectId("5dd385ddba3cfd6cf854f5e3"), "name" : "zz", "age" : 18, "score" : 99 &#125;#删除所有文档，类似于truncate&gt; db.test_c2.remove(&#123;&#125;)WriteResult(&#123; "nRemoved" : 3 &#125;)&gt; db.test_c2.find() 查询文档123456789101112131415161718192021222324252627282930313233343536&gt; db.test_c.insert(&#123;name:"zz",age:18,score:22&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)&gt; db.test_c.insert(&#123;name:"nn",age:18,score:23&#125;)WriteResult(&#123; "nInserted" : 1 &#125;)#无条件查询&gt; db.test_c.find()&#123; "_id" : ObjectId("5dd38759ba3cfd6cf854f5e4"), "name" : "zz", "age" : 18, "score" : 22 &#125;&#123; "_id" : ObjectId("5dd38778ba3cfd6cf854f5e5"), "name" : "nn", "age" : 18, "score" : 23 &#125;&gt; db.test_c.find(&#123;name:"zz"&#125;)&#123; "_id" : ObjectId("5dd38759ba3cfd6cf854f5e4"), "name" : "zz", "age" : 18, "score" : 22 &#125;#查询返回所有符合条件的语句&gt; db.test_c.find(&#123;age:18&#125;)&#123; "_id" : ObjectId("5dd38759ba3cfd6cf854f5e4"), "name" : "zz", "age" : 18, "score" : 22 &#125;&#123; "_id" : ObjectId("5dd38778ba3cfd6cf854f5e5"), "name" : "nn", "age" : 18, "score" : 23 &#125;#格式化显示&gt; db.test_c.find(&#123;age:18&#125;).pretty()&#123; "_id" : ObjectId("5dd38759ba3cfd6cf854f5e4"), "name" : "zz", "age" : 18, "score" : 22&#125;&#123; "_id" : ObjectId("5dd38778ba3cfd6cf854f5e5"), "name" : "nn", "age" : 18, "score" : 23&#125;#findOne，只返回一个&gt; db.test_c.findOne(&#123;age:18&#125;)&#123; "_id" : ObjectId("5dd38759ba3cfd6cf854f5e4"), "name" : "zz", "age" : 18, "score" : 22&#125; 问题 什么是关系数据库，什么是非关系数据库？ ACID原则数据库事务正常执行的四个【原子性，一致性，独立性和持久性】 参考简述关系型数据库和非关系型数据库ACID原则如何开启远程连接mongodb数据库mongodb-菜鸟教程]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ambari汉化2]]></title>
    <url>%2F2019%2F11%2F28%2FBigData%2FAmbari%E6%B1%89%E5%8C%962%2F</url>
    <content type="text"><![CDATA[说明已经部署好的Ambari集群使用brunch汉化之后，已经可以正常使用，但是web页面的平台管理是属于不同的js文件。ambari的大部分web页面可通过翻译messages.js文件进行汉化，但是平台管理则是i18n.config.js。win源码路径如下： 123D:\develop_installation_package\Ambari\源码\源码汉化\ambari-release-2.6.2-change\ambari-release-2.6.2\ambari-admin\src\main\resources\ui\admin-web\app\scripts\i18n.config.jsD:\develop_installation_package\Ambari\源码\源码汉化\ambari-release-2.6.2-change\ambari-release-2.6.2\ambari-web\app\messages.js messages.js的汉化见ambari汉化，这里将进行汉化i18n.config.js 汉化步骤配置编译环境安装node.js上传解压 123456[root@test npm]# pwd/opt/apps/npm[root@test npm]# ll总用量 12736-rw-r--r--. 1 root root 13040896 9月 6 07:33 node-v10.16.3-linux-x64.tar.xz[root@test npm]# tar -xvf node-v10.16.3-linux-x64.tar.xz 编辑环境变量 12345[root@test opt]# cat /etc/profileexport JAVA_HOME=/opt/apps/jdk/jdk1.8.0_144export NODE_HOME=/opt/apps/npm/node-v10.16.3-linux-x64export PATH=$PATH:$JAVA_HOME/bin:$NODE_HOME/bin 检测是否安装成功 12345[root@mm01 img]# source /etc/profile[root@mm01 img]# npm -v6.9.0[root@mm01 img]# node -vv10.16.0 安装依赖bzip2和git 1234567891011121314151617181920[root@test opt]# yum install bzip2已加载插件：fastestmirror, prioritiesLoading mirror speeds from cached hostfile * base: mirrors.aliyun.com * extras: mirrors.aliyun.com * updates: mirrors.aliyun.combase | 3.6 kB 00:00:00extras | 2.9 kB 00:00:00mysql | 2.9 kB 00:00:00updates | 2.9 kB 00:00:00软件包 bzip2-1.0.6-13.el7.x86_64 已安装并且是最新版本无须任何处理[root@test opt]# yum -y install git已加载插件：fastestmirror, prioritiesLoading mirror speeds from cached hostfile * base: mirrors.aliyun.com * extras: mirrors.aliyun.com * updates: mirrors.aliyun.com软件包 git-1.8.3.1-20.el7.x86_64 已安装并且是最新版本无须任何处理 编译修改.bowerrc配置切换目录 12[root@test admin-web]# pwd/opt/ambari-release-2.6.2-change/ambari-release-2.6.2/ambari-admin/src/main/resources/ui/admin-web 修改.bowerrc 12345678910111213141516171819202122#添加一行：`"allow_root": true`,允许root用户只需bower命令。也可在执行命令时通过添加参数设定：`bower install –allow-root`#`.bowerrc`为隐藏文件，使用`-a`[root@test admin-web]# ll -a总用量 28drwxr-xr-x. 4 root root 152 9月 11 14:44 .drwxr-xr-x. 3 root root 23 9月 11 14:44 ..drwxr-xr-x. 6 root root 80 9月 11 14:44 app-rw-r--r--. 1 root root 538 4月 27 2018 bower.json-rw-r--r--. 1 root root 43 4月 27 2018 .bowerrc-rw-r--r--. 1 root root 103 4月 27 2018 .gitignore-rw-r--r--. 1 root root 2645 4月 27 2018 gulpfile.js-rw-r--r--. 1 root root 395 4月 27 2018 .jshintrc-rw-r--r--. 1 root root 1793 4月 27 2018 mock.js-rw-r--r--. 1 root root 1606 4月 27 2018 package.jsondrwxr-xr-x. 4 root root 128 9月 11 14:44 test[root@test admin-web]# cat .bowerrc&#123; "directory": "app/bower_components", "allow_root": true&#125; 安装npm依赖包 1[root@test admin-web]# npm install 安装全局gulp注：这里尝试使用brunch安装，安装失败 1[root@test admin-web]# npm install -g gulp 安装全局bower 1[root@test admin-web]# npm install -g bower 安装bower依赖包 1[root@test admin-web]# bower install 安装gulp-webserver 1[root@test admin-web]# npm install gulp-webserver --save-dev 修改gulpfile.js文件 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107'use strict';// generated on 2014-06-25 using generator-gulp-webapp 0.1.0var gulp = require('gulp');// load pluginsvar $ = require('gulp-load-plugins')();var webserver = require('gulp-webserver'); // add// add 这个地方current如果为test就以webserver的方式启动，如果为build直接构建var current = "build";var config = &#123; start_task:&#123; test:"webserver", build:"build" &#125;&#125;;/**#如果是test，websever启动的参数。所以设置为build，直接构建gulp.task('webserver', function()&#123; gulp.src('app').pipe(webserver(&#123; port: 8000,//端口号 host: '172.30.81.153',//域名ip livereload: true,//实时刷新代码 directoryListing: true, //fallback:'index.html', open:true &#125;))&#125;);*/gulp.task('styles', function () &#123; return gulp.src('app/styles/*.css') .pipe($.order([ 'app/styles/main.css', 'app/styles/custom-admin-ui.css' // This should always be the last stylesheet. So it can be dropped and be effective on build time ], &#123; base: './' &#125;)) .pipe($.concat('main.css')) .pipe($.autoprefixer('last 1 version')) .pipe(gulp.dest('.tmp/styles')) .pipe($.size());&#125;);gulp.task('html', ['styles'], function () &#123; var jsFilter = $.filter('**/*.js'); var cssFilter = $.filter('**/*.css'); return gulp.src('app/*.html') .pipe($.plumber()) .pipe($.useref.assets(&#123;searchPath: '&#123;.tmp,app&#125;'&#125;)) .pipe(jsFilter) .pipe(jsFilter.restore()) .pipe(cssFilter) .pipe(cssFilter.restore()) .pipe($.useref.restore()) .pipe($.useref()) .pipe(gulp.dest('dist')) .pipe($.size());&#125;);gulp.task('views', function () &#123; return gulp.src('app/views/**/*.html') .pipe(gulp.dest('dist/views'));&#125;);// addgulp.task('xml',function()&#123; return gulp.src('app/view.xml') .pipe(gulp.dest('dist'))&#125;);gulp.task('images', function () &#123; return gulp.src('app/images/**/*') .pipe(gulp.dest('dist/images')) .pipe($.size());&#125;);gulp.task('fonts', function () &#123; return $.bowerFiles() .pipe($.filter('**/*.&#123;eot,svg,ttf,woff&#125;')) .pipe($.flatten()) .pipe(gulp.dest('dist/fonts')) .pipe($.size());&#125;);gulp.task('extras', function () &#123; return gulp.src(['app/*.*', '!app/*.html'], &#123;dot: true&#125;) .pipe(gulp.dest('dist'));&#125;);//addgulp.task('clean', function () &#123; return gulp.src(['.tmp', 'dist'], &#123;read: false&#125;).pipe($.clean());&#125;);// gulp.task('build', ['html', 'views', 'images', 'fonts', 'extras']);gulp.task('build', ['html', 'views', 'images', 'fonts','xml', 'extras']);// gulp.task('default', ['clean'], function () &#123;// gulp.start('build');// &#125;);// addgulp.task('default', ['clean'], function () &#123; gulp.start(config.start_task[current]);&#125;); 编译 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576[root@test admin-web]# gulp[11:23:42] Using gulpfile /opt/ambari-release-2.6.2-change/ambari-release-2.6.2/ambari-admin/src/main/resources/ui/admin-web/gulpfile.js[11:23:42] Starting 'clean'...[11:23:42] Finished 'clean' after 27 ms[11:23:42] Starting 'default'...[11:23:42] Starting 'styles'...[11:23:42] Starting 'views'...[11:23:42] Starting 'images'...[11:23:42] Starting 'fonts'...[11:23:42] Starting 'xml'...[11:23:42] Starting 'extras'...[11:23:42] Finished 'default' after 261 ms[11:23:42] gulp-size: total 0 B[11:23:42] Finished 'images' after 184 ms[11:23:42] Finished 'xml' after 13 ms[11:23:42] Finished 'extras' after 13 ms[11:23:43] gulp-size: total 37.61 kB[11:23:43] Finished 'styles' after 511 ms[11:23:43] Starting 'html'...[11:23:43] gulp-size: total 2.23 MB[11:23:43] Finished 'html' after 375 ms[11:23:43] Finished 'views' after 865 ms[11:23:43] gulp-size: total 668.49 kB[11:23:43] Finished 'fonts' after 877 ms[11:23:43] Starting 'build'...[11:23:43] Finished 'build' after 32 μs#编译成功，会有dist文件夹[root@test admin-web]# ll总用量 344drwxr-xr-x. 7 root root 104 11月 27 18:19 app-rw-r--r--. 1 root root 538 4月 27 2018 bower.jsondrwxr-xr-x. 6 root root 79 11月 28 11:23 dist-rw-r--r--. 1 root root 3189 11月 27 18:35 gulpfile.js-rw-r--r--. 1 root root 1793 4月 27 2018 mock.jsdrwxr-xr-x. 529 root root 16384 11月 27 18:25 node_modules-rw-r--r--. 1 root root 1638 11月 27 18:25 package.json-rw-r--r--. 1 root root 300488 11月 27 18:25 package-lock.jsondrwxr-xr-x. 4 root root 128 9月 11 14:44 test#查看dist文件夹[root@test dist]# ll总用量 8drwxr-xr-x. 2 root root 4096 11月 28 11:23 fonts-rw-r--r--. 1 root root 3922 11月 28 11:23 index.htmldrwxr-xr-x. 2 root root 56 11月 28 11:23 scriptsdrwxr-xr-x. 2 root root 40 11月 28 11:23 stylesdrwxr-xr-x. 13 root root 264 11月 28 11:23 views#查看ambari平台对应的文件夹的内容[root@vm110 ~]# cd /var/lib/ambari-server/resources/views/work/[root@vm110 work]# lltotal 0drwxr-xr-x 7 root root 111 Sep 16 16:56 ADMIN_VIEW&#123;2.6.2.2&#125;drwxr-xr-x 9 root root 192 Sep 16 16:57 CAPACITY-SCHEDULER&#123;1.0.0&#125;drwxr-xr-x 7 root root 138 Sep 16 16:57 FILES&#123;1.0.0&#125;drwxr-xr-x 10 root root 223 Sep 16 16:57 HIVE&#123;1.5.0&#125;drwxr-xr-x 7 root root 162 Sep 16 16:57 HIVE&#123;2.0.0&#125;drwxr-xr-x 8 root root 209 Sep 16 16:57 HUETOAMBARI_MIGRATION&#123;1.0.0&#125;drwxr-xr-x 7 root root 155 Sep 16 16:57 PIG&#123;1.0.0&#125;drwxr-xr-x 10 root root 325 Sep 16 16:57 SLIDER&#123;2.0.0&#125;drwxr-xr-x 8 root root 213 Sep 16 16:57 SMARTSENSE&#123;1.4.5.2.6.2.2-1&#125;drwxr-xr-x 9 root root 162 Sep 16 16:57 Storm_Monitoring&#123;0.1.0&#125;drwxr-xr-x 9 root root 174 Sep 16 16:57 TEZ&#123;0.7.0.2.6.2.0-205&#125;drwxr-xr-x 8 root root 304 Sep 16 16:57 WORKFLOW_MANAGER&#123;1.0.0&#125;[root@vm110 work]# cd ADMIN_VIEW\&#123;2.6.2.2\&#125;/[root@vm110 ADMIN_VIEW&#123;2.6.2.2&#125;]# lltotal 8drwxr-xr-x 2 root root 292 Sep 16 16:56 fonts-rwxr-xr-x 1 root root 3922 Sep 16 16:56 index.htmldrwxr-xr-x 3 root root 19 Sep 16 16:56 META-INFdrwxr-xr-x 2 root root 56 Sep 16 16:56 scriptsdrwxr-xr-x 2 root root 40 Sep 16 16:56 stylesdrwxr-xr-x 13 root root 264 Sep 16 16:56 views-rwxr-xr-x 1 root root 1093 Sep 16 16:56 view.xml#可以看到编译之后的文件缺乏`META-INF`,`view.xml` 汉化文件123456789101112[root@test scripts]# pwd/opt/ambari-release-2.6.2-change/ambari-release-2.6.2/ambari-admin/src/main/resources/ui/admin-web/app/scripts#平台管理页面对应i18n.config.js文件[root@test scripts]# ll总用量 44-rw-r--r--. 1 root root 5424 4月 27 2018 app.jsdrwxr-xr-x. 10 root root 196 9月 11 14:44 controllersdrwxr-xr-x. 2 root root 100 9月 11 14:44 directives-rw-r--r--. 1 root root 23188 4月 27 2018 i18n.config.js-rw-r--r--. 1 root root 6382 4月 27 2018 routes.jsdrwxr-xr-x. 2 root root 4096 9月 11 14:44 services 在win段将此js文件汉化，然后上传，重新编译即可 全部步骤简化 汉化messages.js和i18n.config.js 将汉化完成的ambari2.6.2源码上传到虚拟机test上，解压 跳转到对应目录ambari-web 控制台页面的编译使用brunch buld编译，平台管理页面编译使用gulp编译 编译完成之后，将整个源码文件打包scp到ambari主服务器上，建立软连接，重启ambari-server即可 注：目前已经完成编译之前的软件和依赖包的安装，将test虚拟机上的整个源码包打包，下载，后续只需要替换js文件，再执行编译命令即可【就是说，这个编译后的源码用到老】 参考ambari-admin 中admin-web 前端二次开发]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
        <tag>Ambari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql的数据备份恢复记录2]]></title>
    <url>%2F2019%2F11%2F25%2FToWork%2Fmysql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E8%AE%B0%E5%BD%952%2F</url>
    <content type="text"><![CDATA[11月份拷贝数据恢复正在使用的mysql5.7修改datadir，重启mysql始终报错 123452019-06-18T07:00:27.793936Z 0 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it.2019-06-18T07:00:27.795845Z 0 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.user' doesn't exist2019-06-18T07:00:27.795874Z 0 [ERROR] Fatal error: Failed to initialize ACL/grant/time zones structures or failed to remove temporary table files.2019-06-18T07:00:27.795944Z 0 [ERROR] Aborting 百度，删除ibdata1等文件，重启报新的错误，重启失败安装mysql8.0【猜测是否是版本问题】mysql安装8.0使用rpm包安装时，出现缺乏依赖包的情况，但实际上此依赖包已经被安装过，暂时没有解决的方法1234567891011[root@bs41 mysql_8.0]# rpm -ivh mysql-community-libs-8.0.18-1.el8.x86_64.rpm错误：依赖检测失败： libc.so.6(GLIBC_2.28)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libcrypto.so.1.1()(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libcrypto.so.1.1(OPENSSL_1_1_0)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libssl.so.1.1()(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libssl.so.1.1(OPENSSL_1_1_0)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libssl.so.1.1(OPENSSL_1_1_1)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libstdc++.so.6(CXXABI_1.3.9)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libstdc++.so.6(GLIBCXX_3.4.20)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 libstdc++.so.6(GLIBCXX_3.4.21)(64bit) 被 mysql-community-libs-8.0.18-1.el8.x86_64 需要 离线安装方法失败，使用在线安装，成功设置密码1234567# 和mysql5.7不同# 参考：https://blog.csdn.net/qq_36850813/article/details/83717828mysql&gt; set global validate_password.policy=0;Query OK, 0 rows affected (0.00 sec)mysql&gt; alter user 'root'@'localhost' identified by 'sk7678unh';Query OK, 0 rows affected (0.02 sec) 设置远程登录1234567891011121314151617181920212223242526# 参考：https://www.jianshu.com/p/3fcaa9a1d071mysql&gt; use mysqlReading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; update user set host="%" where user="root";Query OK, 1 row affected (0.02 sec)Rows matched: 1 Changed: 1 Warnings: 0#设置密码永不过期mysql&gt; ALTER USER 'root'@'%' IDENTIFIED BY 'sk7678unh' PASSWORD EXPIRE NEVER;Query OK, 0 rows affected (0.02 sec)#修改加密规则mysql&gt; set global validate_password.policy=0;Query OK, 0 rows affected (0.00 sec)mysql&gt; ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'sk7678unh';Query OK, 0 rows affected (0.01 sec)#授权远程访问mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;Query OK, 0 rows affected (0.02 sec)mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.01 sec) 重装mysql5.7，更改datadir，使用skip-grant-tables设置密码，数据恢复成功设置密码步骤详见数据备份恢复1，且拷贝的数据三个文件没有被删除 123-rw-r--r-- 1 mysql mysql 19872612352 11月 9 08:20 ibdata1.bak-rw-r----- 1 mysql mysql 1073741824 11月 9 08:20 ib_logfile0.bak-rw-r----- 1 mysql mysql 1073741824 11月 9 08:20 ib_logfile1.bak]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[yarn的web页面显示资源申请不准确]]></title>
    <url>%2F2019%2F11%2F06%2FLearn%2Fyarn%E7%9A%84web%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E8%B5%84%E6%BA%90%E7%94%B3%E8%AF%B7%E4%B8%8D%E5%87%86%E7%A1%AE%2F</url>
    <content type="text"><![CDATA[前因工作期间，提交saprk任务到yarn上，却发现指定的申请资源数，计算得到的结果和yarn的web页面实际显示的资源申请数不相符合。 后果spark-submit默认参数 参数 值 含义 spark.yarn.am.cores 1 ApplicationMaster默认core数量 spark.yarn.am.memory 512m ApplicationMaster默认内存 spark.executor.instances 2 executor默认数量 spark.executor.cores 1 executor默认core spark.executor.memory 1g executor默认内存 安装参数默认值，yarn会生成3个containers。第一个是containers0，用来执行applicationmaster功能。另外两个containers分配给spark程序。 使用默认值运行程序 1234[hdfs@vm52 tycdata]$ saprk-submit \--master yarn \--queue Liu \--class cn.sic_credit.bigdata.tycdata.com_bus_risks_illegal.parseJsonETL ztgx3-1.0-SNAPSHOT.jar 2019-11-04 结果： 计算结果应该为：master-内存：512mmaster-vcore：1executor-内存：1gexecutor-vcore：1num-executor：2总的vcore：1+12=3总的内存：512m+1g2=2.5g 但是实际显示结果却并不是这样 分析yarn对于应用程序所要申请的内存资源，有两个参数来影响实际申请到的内存容量 1234第一个是yarn.scheduler.minimum-allocation-mb：最小可申请内存量，默认值为1024m 第二个是规整化因子。(FIFO和Capacity Scheduler时，规整化因子等于最小可申请资源量，不可单独配置；Fair Scheduler时，规整化因子通过参数yarn.scheduler.increment-allocation-mb设置，默认是1024)，其作用是应用程序申请的资源如果不是该因子的整数倍，则将被修改为最小的整数倍对应的值 每个containers申请内存时，都会多申请额外的堆外内存用于额外开销。 ApplicationMaster：默认程序申请512m内存，申请分配的堆外内存的量为max(${spark.yarn.am.memory}*0.1,384)=max(51.2m,384m)=384m,所以应该分配给applicationmaster的内存为：512m(程序申请)+384(堆外内存)= 896m。但是在实际分配中，由于规整化因子的作用，这个值会被修改为1024m的最小整数倍的值，即1G。所以Application master申请的实际内存为1G executor：默认申请1G内存，多余的用于额外开销的堆外内存为 max(${spark.yarn.am.memory}*0.1,384)=max(102.4m,384m)=384m,所以应该分配 1024m(程序申请)+384m(堆外内存)=1408m，在规整化因子的作用下，规整为2G 对应上图：实际内存数：1g(master)+2g*2(executor)=5g 实际案例1234567[hdfs@vm52 tycdata]$ spark-submit \--master yarn \--queue Liu \--num-executors 5 \--executor-memory 2g \--executor-cores 1 \--class cn.sic_credit.bigdata.tycdata.com_bus_risks_illegal.parseJsonETL ztgx3-1.0-SNAPSHOT.jar 2019-11-04 Am-内存：512m–》1g Am-vcore：1 executor-num：5 executor-memory：2g–》3g executor-core：1资源申请计算：core：1+51=6内存：1+53=16g实际资源如下： 参考YARN上显示应用程序使用的vcores、memory不准确？Spark on Yarn资源配置]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Yarn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[巧用按键宏处理excel表中的科学计数法表示的长数字编号]]></title>
    <url>%2F2019%2F11%2F01%2FEssays%2F%E5%B7%A7%E7%94%A8%E6%8C%89%E9%94%AE%E5%AE%8F%E5%A4%84%E7%90%86excel%E8%A1%A8%E4%B8%AD%E7%9A%84%E7%A7%91%E5%AD%A6%E8%AE%A1%E6%95%B0%E6%B3%95%E8%A1%A8%E7%A4%BA%E7%9A%84%E9%95%BF%E6%95%B0%E5%AD%97%E7%BC%96%E5%8F%B7%2F</url>
    <content type="text"><![CDATA[前因在平常使用excel表格的时候，如果数字出现了10位数以上的，很多情况下回出现E+这样的情况，这是科学计数法表示，是excel默认的情况。这个应该怎么怎么解决呢？ 后果输入之前如果是在输入长数字之前，则可以更改单元格格式为文本格式，接着输入长数字便可以正常显示 输入之后输入之后就是说，当我们打开一份已经导好数据的excel表格时，长数字会显示为科学计数法，但这个时候将单元格格式更改为文本，还需要一个一个的去双击单元格才能正常显示，如果数据量不太多，则可以这样，如果数据量过多，这样，无疑是不可取的 若长数字最后三位为0设置单元格格式，选择自定义，设置类型为0 此时，所有科学计数法的数字都会变成为后三位为0的数字 若长数字最后三位不为0下载按键精灵软件或者其他，使用按键脚本来自动化双击单元格即可 这里使用的是小米游戏盒子的按键脚本 Excel的编辑的快捷键为F2，确认编辑并跳到下一格的快捷键为Enter建，所以按键记录如下： 设置好按键脚本，再设置脚本规则为循环执行，直到下一次按键 打开需要更改为文本的excel表格，设置单元格格式为文本，点击第一行，开启按键脚本，等待即可。注：中途不要用鼠标点击别的窗口，否则按键脚本也会更改位置 效果如下：]]></content>
      <categories>
        <category>Essays</category>
      </categories>
      <tags>
        <tag>Excel</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[定时器任务错误记录]]></title>
    <url>%2F2019%2F10%2F31%2FLearn%2F%E5%AE%9A%E6%97%B6%E5%99%A8%E4%BB%BB%E5%8A%A1%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[前因长时间的观察，发现生产集群的54节点总是会失去心跳，但是其他组件的运行都很正常，这个时候只需要重启ambari-agent即可恢复。所以设置了一个定时器任务，每间隔8小时，定时重启ambari-agent。因为ambari-agent挂掉的时间大概在14个小时左右。但设置定时器任务之后发现，在shell环境下执行脚本可以执行命令，但是在定时器中会报命令无法找到的报错信息。经过查阅资料，发现是定时器中的环境变量和shell环境的环境变量不匹配。 后果环境变量验证12345678910111213141516171819202122#shell环境变量[root@vm54 ~]# echo $PATH/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/apps/jdk1.8.0_144/bin:/root/bin#定时器环境变量[root@vm54 ~]# crontab -l0 * * * * /usr/hdp/share/hst/bin/hst-scheduled-capture.sh sync0 2 * * 0 /usr/hdp/share/hst/bin/hst-scheduled-capture.sh* */8 * * * /usr/local/src/liu/utils/restartAMBARI-AGENT.sh*/1 * * * * echo $PATH[root@vm54 ~]# tail -F /var/spool/mail/rootX-Cron-Env: &lt;SHELL=/bin/sh&gt;X-Cron-Env: &lt;HOME=/root&gt;X-Cron-Env: &lt;PATH=/usr/bin:/bin&gt;X-Cron-Env: &lt;LOGNAME=root&gt;X-Cron-Env: &lt;USER=root&gt;Message-Id: &lt;20191031022001.31746400DB36@vm54.localdomain&gt;Date: Thu, 31 Oct 2019 10:20:01 +0800 (CST)/usr/bin:/bin 可以发现，在定时器任务的环境变量中，是不全的，这会导致可以执行单纯的脚本，但在脚本中需要引用其他环境变量的东西就无法执行。这就解释了为什么测试脚本能够执行，但是ambari-restart脚本无法执行。 脚本如下： 12345678910[root@vm54 utils]# cat test.sh#!/bin/bashecho 'hello-world'#ambari-agent也是需要导入环境变量的[root@vm54 utils]# cat restartAMBARI-AGENT.sh#!/bin/bashambari-agent restart 解决只需要在定时器任务中加上shell的环境变量即可解决 12345[root@vm54 utils]# cat restartAMBARI-AGENT.sh#!/bin/bashexport PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/apps/jdk1.8.0_144/bin:/root/binambari-agent restart 测试： 123456789101112131415161718192021222324252627[root@vm54 utils]# crontab -l0 * * * * /usr/hdp/share/hst/bin/hst-scheduled-capture.sh sync0 2 * * 0 /usr/hdp/share/hst/bin/hst-scheduled-capture.sh*/1 * * * * /usr/local/src/liu/utils/restartAMBARI-AGENT.sh#定时器任务邮件提示。重启ambari-agent成功Restarting ambari-agentVerifying Python version compatibility...Using python /usr/bin/pythonFound ambari-agent PID: 21644Stopping ambari-agentRemoving PID file at /run/ambari-agent/ambari-agent.pidtput: No value for $TERM and no -T specifiedambari-agent successfully stoppedtput: No value for $TERM and no -T specifiedVerifying Python version compatibility...Using python /usr/bin/pythonChecking for previously running Ambari Agent...Checking ambari-common dir...Starting ambari-agentVerifying ambari-agent process status...tput: No value for $TERM and no -T specifiedAmbari Agent successfully startedtput: No value for $TERM and no -T specifiedAgent PID at: /run/ambari-agent/ambari-agent.pidAgent out at: /var/log/ambari-agent/ambari-agent.outAgent log at: /var/log/ambari-agent/ambari-agent.log 注意由上可知：定时器任务中的环境变量为/usr/bin:/bin查看此路径： 123456789101112[root@vm110 bin]# cd /usr/bin/[root@vm110 bin]# ll---x--x--x. 1 root root 65720 Nov 6 2016 sudoreplay-rwxr-xr-x. 1 root root 37432 Nov 6 2016 sum-rwxr-xr-x. 3 root root 80872 Jun 10 2014 sx-rwxr-xr-x. 1 root root 28976 Nov 6 2016 sync-rwxr-xr-x. 1 root root 637680 Nov 7 2016 systemctl-rwxr-xr-x. 1 root root 1399376 Nov 7 2016 systemd-analyze-rwxr-xr-x. 1 root root 49512 Nov 7 2016 systemd-ask-password-rwxr-xr-x. 1 root root 32904 Nov 7 2016 systemd-cat#发现其中有systemctl命令,所以平常组件的启动命令是可以在定时器中执行的 参考定时任务内环境变量和shell环境变量的区别]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Crontab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[定时器简单解释]]></title>
    <url>%2F2019%2F10%2F31%2FLearn%2F%E5%AE%9A%E6%97%B6%E5%99%A8%E7%AE%80%E5%8D%95%E8%A7%A3%E9%87%8A%2F</url>
    <content type="text"><![CDATA[crontab格式{minute} {hour} {day-of-month} {month} {day-of-week} {full-path-to-shell-script}分钟 小时 天 月 周 全路径脚本 minute：区间-》0~59 hour：区间-》0~24 day-of-month：区间-》0~31 month：区间-》1~12 day-of-week：区间-》0~7，周日可以是0或7 crontab简单示例 在凌晨00:01运行1 0 * * * xxx.sh 每3分钟执行一次*/3 * * * * /usr/local/src/liu/utils/test.sh crontab命令选项1234567891011crontab –e : 修改 crontab 文件. 如果文件不存在会自动创建。 crontab –l : 显示 crontab 文件。 crontab -r : 删除 crontab 文件。crontab -ir : 删除 crontab 文件前提醒用户。在以上各个字段中，还可以使用以下特殊字符：星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。 参考Linux定时器详解]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Crontab</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql的数据备份恢复记录]]></title>
    <url>%2F2019%2F10%2F16%2FToWork%2Fmysql%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[描述数据使用Percona Xtrabackup进行备份。原mysql版本为5.6目标：拷贝数据，解压解包，使其能够在另一个台机器的mysql上恢复数据 解压解包数据原始数据123[root@localhost jcf1011]# ll总用量 291188028-rw-r--r-- 1 root root 298173185478 9月 6 16:40 01_gongshang_hins9129521_data_20190906122155_qp.xb 安装Percona XtraBackup注：根据阿里云文档说明。mysql5.6对应Percona XtraBackup2.3mysql5.7对应Percona XtraBackup2.4 但此次操作，mysql最终版本为5.6，Percona XtraBackup为2.4。仍然完成 Download Percona XtraBackup 2.4 选择对应的版本，进入在线安装命令 12345# 安装Percona存储库yum install https://repo.percona.com/yum/percona-release-latest.noarch.rpm# 安装软件包yum install percona-xtrabackup-24 解包1234xbstream -x -C /data/ &lt; ./test.xb/data 是解包文件目录 ./test.xb是xb格式备份文件# e.g.xbstream -x -C /d-2t/jcf1011/mysqldata/ &lt; 01_gongshang_hins9129521_data_20190906122155_qp.xb 解压1234#--remove-original解压完删除源文件innobackupex --decompress --remove-original /home/mysql/data#e.g.innobackupex --decompress --remove-original /d-2t/jcf1011/mysqldata 修改配置文件防止版本问题出错，修改解压文件下的配置文件，将部分注释掉 123456789101112131415161718192021[root@localhost mysqldata]# cat backup-my.cnf# This MySQL options file was generated by innobackupex.# The MySQL server[mysqld]innodb_checksum_algorithm=innodb#innodb_log_checksum_algorithm=innodbinnodb_data_file_path=ibdata1:200M:autoextendinnodb_log_files_in_group=2innodb_log_file_size=1572864000#innodb_fast_checksum=falseinnodb_page_size=16384#innodb_log_block_size=512innodb_undo_directory=.innodb_undo_tablespaces=0#rds_encrypt_data=false#innodb_encrypt_algorithm=aes_128_ecbskip-grant-tables 1234567891011121314## 阿里云说明#innodb_log_checksum_algorithm#innodb_fast_checksum#innodb_log_block_size#innodb_doublewrite_file#rds_encrypt_data#innodb_encrypt_algorithm#redo_log_version#master_key_id## 如果本地试用的是MylSAM引擎，和阿里云的innoDB不兼容，需要注释掉如下参数并增加skip-grant-tables参数：#innodb_log_checksum_algorithm=strict_crc32#redo_log_version=1skip-grant-tables 恢复解压好的备份文件12345678910111213141516171819202122232425262728293031323334353637383940innobackupex --defaults-file=/home/mysql/data/backup-my.cnf --apply-log /home/mysql/data#e.g.innobackupex --defaults-file=/d-2t/jcf1011/mysqldata/backup-my.cnf --apply-log /d-2t/jcf1011/mysqldata#mysql数据[root@localhost mysqldata]# pwd/d-2t/jcf1011/mysqldata[root@localhost mysqldata]# ll总用量 109431924-rw-rw---- 1 mysql mysql 56 10月 16 10:58 auto.cnf-rw-r--r-- 1 mysql mysql 474 10月 14 15:09 backup-my.cnf-rw-r--r-- 1 mysql mysql 7591690240 10月 16 11:57 ibdata1-rw-rw---- 1 mysql mysql 12582912 10月 16 11:52 ibdata1_bak2-rw-r----- 1 mysql mysql 12582912 10月 16 11:57 ibdata1_bak3-rw-rw---- 1 mysql mysql 50331648 10月 16 11:57 ib_logfile0-rw-rw---- 1 mysql mysql 50331648 10月 16 11:52 ib_logfile0_bak2-rw-r----- 1 mysql mysql 50331648 10月 16 11:57 ib_logfile0_bak3-rw-rw---- 1 mysql mysql 50331648 10月 16 11:57 ib_logfile1-rw-rw---- 1 mysql mysql 50331648 10月 16 10:58 ib_logfile1_bak2-rw-r----- 1 mysql mysql 50331648 10月 16 11:52 ib_logfile1_bak3-rw-r----- 1 root root 12582912 10月 15 19:31 ibtmp1-rw-r--r-- 1 mysql mysql 1435392 10月 14 13:46 log000000000002.tokulog29drwxr-x--- 2 mysql mysql 4096 10月 14 14:36 mysql-rw-r--r-- 1 root root 6140 11月 12 2015 mysql-community-release-el7-5.noarch.rpmdrwxr-x--- 2 mysql mysql 4096 10月 14 14:36 performance_schemadrwxr-x--- 2 mysql mysql 4096 10月 14 14:36 prism1-rw-r----- 1 mysql mysql 57242 10月 14 12:02 rds_table_info_json_123631.logdrwxr-x--- 2 mysql mysql 4096 10月 16 11:23 testdrwx------ 2 mysql mysql 4096 10月 16 11:48 test1-rw-r--r-- 1 mysql mysql 16384 10月 14 13:46 tokudb.directory-rw-r--r-- 1 mysql mysql 16384 10月 14 13:46 tokudb.environment-rw-r--r-- 1 mysql mysql 16384 10月 14 13:46 tokudb.rollback-rw-r--r-- 1 mysql mysql 74 10月 14 13:46 xtrabackup_binlog_info-rw-r--r-- 1 root root 27 10月 15 19:31 xtrabackup_binlog_pos_innodb-rw-r----- 1 mysql mysql 141 10月 15 19:31 xtrabackup_checkpoints-rw-r--r-- 1 mysql mysql 823 10月 14 13:46 xtrabackup_info-rw-r--r-- 1 mysql mysql 104125235200 10月 15 19:31 xtrabackup_logfile-rw-r--r-- 1 root root 1 10月 15 19:31 xtrabackup_master_key_id-rw-r--r-- 1 mysql mysql 81 10月 14 13:51 xtrabackup_slave_filename_info-rw-r--r-- 1 mysql mysql 114 10月 14 13:46 xtrabackup_slave_info 此时，mysql备份文件已经全部恢复。只需要安装好同版本【不同版本也可】的mysql，修改/my.cnf文件的datadir，重启mysql即可 问题记录修改datadir，无法启动mysql 首先安装的mysql版本是5.7，在修改datadir之后，mysql无法正常启动 修改回datadir，新建数据库和表，观察其目录结构如下。复制备份数据同样的文件，在数据库中出现表，但是表无法打开 1234567[root@localhost test1]# pwd/d-2t/jcf1011/mysqldata/test1[root@localhost test1]# ll总用量 112-rw-r----- 1 mysql mysql 61 10月 16 11:48 db.opt-rw-r----- 1 mysql mysql 8620 10月 16 11:48 test1.frm-rw-r----- 1 mysql mysql 98304 10月 16 11:48 test1.ibd 更换mysql5.7为mysql5.6版本使用在线安装 123[root@master ~]# wget http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm[root@master ~]# rpm -ivh mysql-community-release-el7-5.noarch.rpm[root@master ~]# yum install mysql-community-serve 【一般是没有此软件的，可以yum list | grep mysql 然后，安装mysql-community-serve........】 可通过修改/etc/yum.repo.d/中有关mysql的repo。将其中的5.6版本的enabled设置为1，其他版本的设置为0，yum中就会只显示5.6版本的mysql。此mysql在线安装可以通过下载官网最新文件，获取到最新版本以及历史版本 安装好5.6之后，仍旧无法启动，使用systemctl status mysqld命令查看 123456789101112131415[root@localhost mysqldata]# systemctl status mysql● mysqld.service - MySQL Community Server Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled) Active: active (running) since 三 2019-10-16 10:48:04 CST; 2min 19s ago Process: 18008 ExecStartPost=/usr/bin/mysql-systemd-start post (code=exited, status=0/SUCCESS) Process: 17993 ExecStartPre=/usr/bin/mysql-systemd-start pre (code=exited, status=0/SUCCESS) Main PID: 18007 (mysqld_safe) CGroup: /system.slice/mysqld.service ├─18007 /bin/sh /usr/bin/mysqld_safe --basedir=/usr └─18223 /usr/sbin/mysqld --basedir=/usr --datadir=/d-2t/mysql/data --plugin-dir=/usr/lib64/mysql/plugin --log-error=/var/log/mysqld.log --pid-file=/var...10月 16 10:48:03 localhost.localdomain systemd[1]: Starting MySQL Community Server...10月 16 10:48:03 localhost.localdomain mysqld_safe[18007]: 191016 10:48:03 mysqld_safe Logging to '/var/log/mysqld.log'.10月 16 10:48:03 localhost.localdomain mysqld_safe[18007]: 191016 10:48:03 mysqld_safe Starting mysqld daemon with databases from /d-2t/mysql/data10月 16 10:48:04 localhost.localdomain systemd[1]: Started MySQL Community Server. 从中发现，加载的目录为/d-2t/mysql/data,但是检查/etc/my.cnf，其中设置并没有此目录。说明mysql的启动读取了其他的配置参数，或者在其他地方设置了参数 使用查找命令： 123456789101112131415161718192021# 检查每个目录，发现没有设置[root@localhost data]# find / -name mysql/etc/logrotate.d/mysql/var/lib/mysql/var/lib/mysql/mysql/usr/bin/mysql/usr/lib/mysql/usr/lib64/perl5/vendor_perl/auto/DBD/mysql/usr/lib64/perl5/vendor_perl/DBD/mysql/usr/lib64/mysql/usr/share/mysql/home/mysql/d-2t/jcf1011/mysqldata/mysql/d-2t/mysql# 继续查找[root@localhost mysql]# find / -name my.ini[root@localhost mysql]# find / -name my.cnf/etc/my.cnf/usr/my.cnf#终于发现了`/usr/my.cnf`。并且确定，mysql优先读取`/usr/my.cnf`文件。删除此文件，重启mysql。但是mysql还是无法正常启动 /usr/my.cnf文件 1234567891011121314151617181920212223242526272829303132[root@localhost test1]# cat /usr/my.cnf_bak# For advice on how to change settings please see# http://dev.mysql.com/doc/refman/5.6/en/server-configuration-defaults.html[mysqld]# Remove leading # and set to the amount of RAM for the most important data# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.# innodb_buffer_pool_size = 128M# Remove leading # to turn on a very important data integrity option: logging# changes to the binary log between backups.# log_bin# These are commonly set, remove the # and set as required.# basedir = ..... datadir = /d-2t/mysql/data# datadir = /d-2t/mysql2/mysql# port = .....# server_id = .....# socket = .....wait_timeout=1814400# Remove leading # to set options mainly useful for reporting servers.# The server defaults are faster for transactions and fast SELECTs.# Adjust sizes as needed, experiment to find the optimal values.# join_buffer_size = 128M# sort_buffer_size = 2M# read_rnd_buffer_size = 2Msql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLESskip-grant-tables 还是无法启动，查看状态 1234562019-10-16 10:56:48 18892 [Note] InnoDB: Completed initialization of buffer pool2019-10-16 10:56:48 18892 [ERROR] InnoDB: ./ib_logfile0 can't be opened in read-write mode2019-10-16 10:56:48 18892 [ERROR] Plugin 'InnoDB' init function returned error.2019-10-16 10:56:48 18892 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.2019-10-16 10:56:48 18892 [ERROR] Unknown/unsupported storage engine: InnoDB2019-10-16 10:56:48 18892 [ERROR] Aborting 从中可以看出，ib_logfile0无法打开，查看实际文件，发现是user:group设置为了root，将其改为mysql。正常启动。正常启动了mysql5.6，修改datadir，重启mysql，打开mysq，发现数据备份完成。 临时密码无法登陆的问题修改：/etc/my.cnf添加：skip-grant-tables 重启mysql登陆：mysql -u root #此时不需要密码，可以直接登录修改密码：update mysql.user set password=password(&#39;root&#39;) where user=&#39;root&#39;;增加远程登录：grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;123456&#39;;刷新：FLUSH PRIVILEGES;推出，修改my.cnf，去掉添加的内容，再重启mysql即可 参考阿里云 RDS for MySQL 物理备份文件恢复到自建数据库mysql 备份文件.xb 数据库备份还原我的MySQL数据库里面明明存在一个表，可是查看表的时候又显示不存在是怎么回事安装mysql后无法找到临时密码的解决方案]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ambari和ES，kibana集成-案例]]></title>
    <url>%2F2019%2F10%2F11%2FLearn%2FAmbari%E5%92%8CES%EF%BC%8Ckibana%E9%9B%86%E6%88%90-%E6%A1%88%E4%BE%8B%2F</url>
    <content type="text"><![CDATA[简单介绍实现目的虽然上述两个生态应用软件在数据处理上都颇为重要，但是毕竟不是一家人。可是在打造工业产品的过程中，hadoop和elasticsearch经常是缺一不可的（一个用于高吞吐高延迟场景，一个用于低延迟搜索场景）。因此将二者合二为一的需求也是比较明显的。Ambari平台集成的是Apache自家的solr组件，但在实际应用中，ES对于大数据量的数据搜索来说，速度更加稳定。为了方便统一，以及大数据产品的易用操作性。将二者集成是有必要的。 集成实现过程详解ambari安装服务过程 Ambari Server 会读取 Stack 和 Service 的配置文件。当用 Ambari 创建服务的时候，Ambari Server 传送 Stack 和 Service 的配置文件以及 Service 生命周期的控制脚本到 Ambari Agent。Agent 拿到配置文件后，会下载安装公共源里软件包（Redhat，就是使用 yum 服务）。安装完成后，Ambari Server 会通知 Agent 去启动 Service。之后 Ambari Server 会定期发送命令到 Agent 检查 Service 的状态，Agent 上报给 Server，并呈现在 Ambari 的 GUI 上。 所以Ambari是支持服务扩展的，只需要，将我们的服务整理打包，在stack，service中设置好相应的配合文件。重启Ambari-server，就可以在ambari的增加服务页面找到我们的服务并且安装。 目录结构解析123456789101112131415|_ stacks |_ &lt;stack_name&gt; |_ &lt;stack_version&gt; metainfo.xml |_ hooks |_ repos repoinfo.xml #软件仓库的URL |_ services #服务目录 |_ &lt;service_name&gt; metainfo.xml metrics.json |_ configuration &#123;configuration files&#125; |_ package &#123;files, scripts, templates&#125; HDFS目录结构 1234567891011121314[root@vm01 HDFS]# pwd/var/lib/ambari-server/resources/stacks/HDP/2.6/services/HDFS[root@vm01 HDFS]# tree.├── configuration│ ├── core-site.xml│ ├── hadoop-env.xml│ ├── hadoop-metrics2.properties.xml│ ├── ranger-hdfs-audit.xml│ └── ranger-hdfs-plugin-properties.xml├── kerberos.json└── metainfo.xml1 directory, 7 files 安装好的ES的目录结构 1234567891011121314151617181920212223242526272829303132333435[root@vm01 ELASTICSEARCH-6.4.x]# pwd/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ELASTICSEARCH-6.4.x[root@vm01 ELASTICSEARCH-6.4.x]# tree.├── alerts.json├── configuration│ ├── elasticsearch-config.xml│ ├── elasticsearch-env.xml│ ├── elasticsearch-log4j.xml│ └── original│ ├── elasticsearch.yml│ ├── jvm.options│ ├── log4j2.properties│ ├── role_mapping.yml│ ├── roles.yml│ ├── users│ └── users_roles├── metainfo.xml├── package│ ├── archive.zip│ ├── scripts│ │ ├── es_master.py│ │ ├── es_slave.py│ │ ├── __init__.py│ │ ├── params.py│ │ ├── service_check.py│ │ └── status_params.py│ └── templates│ ├── elasticsearch.jvm.options.j2│ ├── elasticsearch.master.yml.j2│ └── elasticsearch.slave.yml.j2└── quicklinks └── quicklinks.json6 directories, 23 files metainfo.xml - 服务整体描述首先，通过metainfo.xml文件对elasticsearch这个服务进行一个标准的描述。完整文件如下： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&lt;?xml version="1.0"?&gt;&lt;metainfo&gt; &lt;schemaVersion&gt;2.0&lt;/schemaVersion&gt; &lt;services&gt; &lt;service&gt; &lt;name&gt;ELASTICSEARCH&lt;/name&gt; &lt;displayName&gt;Elasticsearch&lt;/displayName&gt; &lt;comment&gt;A highly scalable open-source full-text search and analytics engine. Including storage, searching, and analyzing big volumes of data quickly and in near real time. &lt;/comment&gt; &lt;version&gt;6.4.2&lt;/version&gt; &lt;components&gt; &lt;component&gt; &lt;name&gt;ELASTICSEARCH_MASTER&lt;/name&gt; &lt;displayName&gt;Elasticsearch Master&lt;/displayName&gt; &lt;category&gt;MASTER&lt;/category&gt; &lt;cardinality&gt;1+&lt;/cardinality&gt; &lt;versionAdvertised&gt;true&lt;/versionAdvertised&gt; &lt;commandScript&gt; &lt;script&gt;scripts/es_master.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1200&lt;/timeout&gt; &lt;/commandScript&gt; &lt;logs&gt; &lt;log&gt; &lt;logId&gt;elasticsearch_master&lt;/logId&gt; &lt;primary&gt;true&lt;/primary&gt; &lt;/log&gt; &lt;/logs&gt; &lt;/component&gt; &lt;component&gt; &lt;name&gt;ELASTICSEARCH_SLAVE&lt;/name&gt; &lt;displayName&gt;Elasticsearch Slave&lt;/displayName&gt; &lt;category&gt;SLAVE&lt;/category&gt; &lt;cardinality&gt;0+&lt;/cardinality&gt; &lt;versionAdvertised&gt;true&lt;/versionAdvertised&gt; &lt;commandScript&gt; &lt;script&gt;scripts/es_slave.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1200&lt;/timeout&gt; &lt;/commandScript&gt; &lt;logs&gt; &lt;log&gt; &lt;logId&gt;elasticsearch_slave&lt;/logId&gt; &lt;primary&gt;true&lt;/primary&gt; &lt;/log&gt; &lt;/logs&gt; &lt;/component&gt; &lt;/components&gt; &lt;osSpecifics&gt; &lt;osSpecific&gt; &lt;osFamily&gt;any&lt;/osFamily&gt; &lt;packages&gt; &lt;package&gt; &lt;name&gt;elasticsearch-6.4.2&lt;/name&gt; &lt;!-- Not using. Please make sure the os already contains all the dependencies. --&gt; &lt;/package&gt; &lt;/packages&gt; &lt;/osSpecific&gt; &lt;/osSpecifics&gt; &lt;commandScript&gt; &lt;script&gt;scripts/service_check.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;300&lt;/timeout&gt; &lt;/commandScript&gt; &lt;configuration-dependencies&gt; &lt;config-type&gt;elasticsearch-config&lt;/config-type&gt; &lt;config-type&gt;elasticsearch-env&lt;/config-type&gt; &lt;config-type&gt;elasticsearch-log4j&lt;/config-type&gt; &lt;/configuration-dependencies&gt; &lt;restartRequiredAfterChange&gt;true&lt;/restartRequiredAfterChange&gt; &lt;quickLinksConfigurations&gt; &lt;quickLinksConfiguration&gt; &lt;fileName&gt;quicklinks.json&lt;/fileName&gt; &lt;default&gt;true&lt;/default&gt; &lt;/quickLinksConfiguration&gt; &lt;/quickLinksConfigurations&gt; &lt;/service&gt; &lt;/services&gt;&lt;/metainfo&gt; 主要参数###############################################################################定义服务的名称，显示名称，描述，版本号等核心信息 12345&lt;name&gt;ELASTICSEARCH&lt;/name&gt;&lt;displayName&gt;Elasticsearch&lt;/displayName&gt;&lt;comment&gt;A highly scalable open-source full-text search and analytics engine. Including storage, searching, and analyzing big volumes of data quickly and in near real time. &lt;/comment&gt;&lt;version&gt;6.4.2&lt;/version&gt; ###############################################################################定义服务的组件信息，这里针对elasticsearch的实现，分了两种组件：master和slave，这里以master为例： 1234567891011121314151617181920212223242526272829303132333435363738&lt;components&gt; &lt;component&gt; &lt;name&gt;ELASTICSEARCH_MASTER&lt;/name&gt; &lt;displayName&gt;Elasticsearch Master&lt;/displayName&gt; &lt;category&gt;MASTER&lt;/category&gt; &lt;cardinality&gt;1+&lt;/cardinality&gt; &lt;versionAdvertised&gt;true&lt;/versionAdvertised&gt; &lt;commandScript&gt; &lt;script&gt;scripts/es_master.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1200&lt;/timeout&gt; &lt;/commandScript&gt; &lt;logs&gt; &lt;log&gt; &lt;logId&gt;elasticsearch_master&lt;/logId&gt; &lt;primary&gt;true&lt;/primary&gt; &lt;/log&gt; &lt;/logs&gt; &lt;/component&gt; &lt;component&gt; &lt;name&gt;ELASTICSEARCH_SLAVE&lt;/name&gt; &lt;displayName&gt;Elasticsearch Slave&lt;/displayName&gt; &lt;category&gt;SLAVE&lt;/category&gt; &lt;cardinality&gt;0+&lt;/cardinality&gt; &lt;versionAdvertised&gt;true&lt;/versionAdvertised&gt; &lt;commandScript&gt; &lt;script&gt;scripts/es_slave.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;1200&lt;/timeout&gt; &lt;/commandScript&gt; &lt;logs&gt; &lt;log&gt; &lt;logId&gt;elasticsearch_slave&lt;/logId&gt; &lt;primary&gt;true&lt;/primary&gt; &lt;/log&gt; &lt;/logs&gt; &lt;/component&gt;&lt;/components&gt; 其中基础信息包括组件名称(name),组件显示名称(displayname)。其他几个重要参数，包括： category：描述组件是主服务，节点从服务或是客户端 category类别 默认生命周期命令实现 MASTER install, start, stop, configure, status SLAVE install, start, stop, configure, status CLIENT install, configure, status cardinality：描述组件的数量限制 cardinality格式 格式说明举例 数字 1：表示只能有一个 数字区间 0-1：表示最少有零个，最多有一个 数字单增区间 1+：表示最少有1个 ALL ALL：表示所有节点都需要 commandScript：组件生命周期命令的执行脚本实现 脚本地址：/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ELASTICSEARCH-6.4.x/package/scriptsAmbari支持Python脚本，按照Ambari官方文档的模式化脚本进行修改 ###############################################################################所支持的os系统定义，以及需要安装的软件包 1234567891011&lt;osSpecifics&gt; &lt;osSpecific&gt; &lt;osFamily&gt;any&lt;/osFamily&gt; &lt;packages&gt; &lt;package&gt; &lt;name&gt;elasticsearch-6.4.2&lt;/name&gt; &lt;!-- Not using. Please make sure the os already contains all the dependencies. --&gt; &lt;/package&gt; &lt;/packages&gt; &lt;/osSpecific&gt;&lt;/osSpecifics&gt; osFamily可定义如：Redhat6，Redhat7，ubuntu14，ubuntu16等。package-name，即为yum install或apt-get install的软件包名称 ###############################################################################服务检查的脚本实现【此处py脚本的命名要保持一致】 12345&lt;commandScript&gt; &lt;script&gt;scripts/service_check.py&lt;/script&gt; &lt;scriptType&gt;PYTHON&lt;/scriptType&gt; &lt;timeout&gt;300&lt;/timeout&gt;&lt;/commandScript&gt; ###############################################################################配置文件依赖，即服务安装前需要填写或者修改的配置文件： 12345&lt;configuration-dependencies&gt; &lt;config-type&gt;elasticsearch-config&lt;/config-type&gt; &lt;config-type&gt;elasticsearch-env&lt;/config-type&gt; &lt;config-type&gt;elasticsearch-log4j&lt;/config-type&gt;&lt;/configuration-dependencies&gt; ###############################################################################配置修改后是否重启【一般都为true】： 1&lt;restartRequiredAfterChange&gt;true&lt;/restartRequiredAfterChange&gt; ###############################################################################界面快速链接的json脚本实现【注意，此json脚本的命名要保持一致】： 123456&lt;quickLinksConfigurations&gt; &lt;quickLinksConfiguration&gt; &lt;fileName&gt;quicklinks.json&lt;/fileName&gt; &lt;default&gt;true&lt;/default&gt; &lt;/quickLinksConfiguration&gt;&lt;/quickLinksConfigurations&gt; ###############################################################################其他参数：ambari自定义服务（二）metainfo.xml说明官方文档 configuration - 服务配置项描述configuration的目录及内容如下图所示(不包括original，这是为了方便开发放入的原始配置文件) 12345678[root@vm01 configuration]# pwd/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ELASTICSEARCH-6.4.x/configuration[root@vm01 configuration]# lltotal 24-rw-r--r-- 1 root root 4934 Oct 10 18:15 elasticsearch-config.xml-rw-r--r-- 1 root root 5406 Oct 10 18:15 elasticsearch-env.xml-rw-r--r-- 1 root root 4456 Oct 10 18:15 elasticsearch-log4j.xmldrwxr-xr-x 2 root root 148 Oct 10 18:15 original 配置类型这里可以简单的分为两种类型的配置文件，即-env和其他 -env.xml配置文件要求必须存在，主要描述安装包路径，用户，组，pid文件目录，根目录等。文件内容此处截取部分作为简单举例：【web页面上配置页面处的主要参数在此设置】 123456789101112131415161718192021222324252627282930313233343536&lt;property&gt; &lt;name&gt;elasticsearch.download.url&lt;/name&gt; &lt;value&gt;&lt;/value&gt; &lt;display-name&gt;Elasticsearch Download Url&lt;/display-name&gt; &lt;description&gt;Elasticsearch package download url. The official download url is: https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.2.tar.gz&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;elasticsearch.user&lt;/name&gt; &lt;value&gt;elasticsearch&lt;/value&gt; &lt;display-name&gt;Elasticsearch User&lt;/display-name&gt; &lt;property-type&gt;USER&lt;/property-type&gt; &lt;description&gt;Elasticsearch unix user.&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;elasticsearch.group&lt;/name&gt; &lt;value&gt;elasticsearch&lt;/value&gt; &lt;display-name&gt;Elasticsearch Group&lt;/display-name&gt; &lt;property-type&gt;GROUP&lt;/property-type&gt; &lt;description&gt;Elasticsearch unix group.&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;elasticsearch.base.dir&lt;/name&gt; &lt;value&gt;/opt/elasticsearch&lt;/value&gt; &lt;display-name&gt;Elasticsearch Base Directory&lt;/display-name&gt; &lt;description&gt;Elasticsearch base directory.&lt;/description&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;elasticsearch.pid.dir&lt;/name&gt; &lt;value&gt;/var/run/elasticsearch&lt;/value&gt; &lt;display-name&gt;Elasticsearch Pid Directory&lt;/display-name&gt; &lt;description&gt;Elasticsearch pid file directory.&lt;/description&gt; &lt;/property&gt; 其他应用配置文件 其他应用配置配置文件即值应用本身所需的配置文件，例如elasticsearch的核心配置文件：elasticsearch.yml。但是在实现的时候，不用严格按照原始配置文件的格式。可以将elasticsearch.yml分为多个部分。文件名就是配置参数的上的块名 此处的配置文件设置，具体的实现就在web页面，如下图：【对比看上面configuration目录设置】 配置格式默认使用最简单的key-value格式，如下： 1234&lt;property&gt; &lt;name&gt;elasticsearch.base.dir&lt;/name&gt; &lt;value&gt;/opt/elasticsearch&lt;/value&gt;&lt;/property&gt; 但是此种格式，缺少说明，且web页面显示不太友好。可以添加来替换的显示；添加,来显示说明和描述 1234567&lt;property&gt; &lt;name&gt;elasticsearch.base.dir&lt;/name&gt; &lt;value&gt;/opt/elasticsearch&lt;/value&gt; &lt;display-name&gt;Elasticsearch Base Directory&lt;/display-name&gt; &lt;description&gt;Elasticsearch base directory.&lt;/description&gt;&lt;/property&gt; 效果图： 默认情况下，值不能为空，如果想允许值为空，可在下添加为true： 12345678&lt;property&gt; &lt;name&gt;server.basePath&lt;/name&gt; &lt;value&gt;none&lt;/value&gt; &lt;value-attributes&gt; &lt;empty-value-valid&gt;true&lt;/empty-value-valid&gt; &lt;/value-attributes&gt; &lt;display-name&gt;Server Base Path&lt;/display-name&gt;&lt;/property&gt; 还支持一些常见的格式，例如boolean：此处要注意，xml文件中填写值的时候需要小写（false，true）。但后续代码在获取参数时，获取的是boolean类型的False和True 12345678910&lt;property&gt; &lt;name&gt;server.rewriteBasePath&lt;/name&gt; &lt;value&gt;false&lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;boolean&lt;/type&gt; &lt;overridable&gt;false&lt;/overridable&gt; &lt;/value-attributes&gt; &lt;display-name&gt;Server Rewrite Base Path&lt;/display-name&gt; &lt;description&gt;xxxx&lt;/description&gt;&lt;/property&gt; 针对密码类型的支持：将值显示为*号 123456789&lt;property&gt; &lt;name&gt;zeppelin.ssl.keystore.password&lt;/name&gt; &lt;value&gt;change me&lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;password&lt;/type&gt; &lt;/value-attributes&gt; &lt;property-type&gt;PASSWORD&lt;/property-type&gt; &lt;description&gt;Keystore password. Can be obfuscated by the Jetty Password tool&lt;/description&gt;&lt;/property&gt; 针对数字类型的支持，其中type可以为int,long等，minimum和maximum为可选参数用于给定范围，unit为单位显示等，例如： 123456789101112131415&lt;property&gt; &lt;name&gt;ops.interval&lt;/name&gt; &lt;value&gt;5000&lt;/value&gt; &lt;value-attributes&gt; &lt;type&gt;int&lt;/type&gt; &lt;minimum&gt;100&lt;/minimum&gt; &lt;maximum&gt;50000&lt;/maximum&gt; &lt;unit&gt;Milliseconds&lt;/unit&gt; &lt;increment-step&gt;100&lt;/increment-step&gt; &lt;overridable&gt;false&lt;/overridable&gt; &lt;/value-attributes&gt; &lt;display-name&gt;Ops Interval&lt;/display-name&gt; &lt;description&gt;Set the interval in milliseconds to sample system and process performance metrics. Minimum is 100ms. Defaults to 5000.&lt;/description&gt;&lt;/property&gt; 具体其他参数可参考Ambari平台的参数和对应的页面路径/var/lib/ambari-server/resources/common-services package-服务交互代码实现123456789101112131415161718192021[root@vm01 package]# pwd/var/lib/ambari-server/resources/stacks/HDP/2.6/services/ELASTICSEARCH-6.4.x/package[root@vm01 package]# lltotal 24-rwxr-xr-x 1 root root 23777 Oct 10 18:15 archive.zipdrwxr-xr-x 2 root root 129 Oct 10 18:15 scriptsdrwxr-xr-x 2 root root 111 Oct 10 18:15 templates[root@vm01 package]# tree.├── archive.zip├── scripts│ ├── es_master.py│ ├── es_slave.py│ ├── __init__.py│ ├── params.py│ ├── service_check.py│ └── status_params.py└── templates ├── elasticsearch.jvm.options.j2 ├── elasticsearch.master.yml.j2 └── elasticsearch.slave.yml.j2 scripts - 脚本实现 其中，params、service_check和status_params为必实现的脚本，分别用于参数的获取和加工、服务检查、为服务检查提供参数；es_master和es_slave是根据组件（component）区分的声明周期实现脚本，如下所示： 脚本 具体实现 要求及说明 params.py 通过Script类的方法读取之前configuration文件夹中.xml文件定义的各个配置变量，有需要的话进行进一步加工,例如单位的添加，列表的解析，布尔值的转换等 脚本名称不可修改 service_check.py 可直接使用内置方法实现，具体请见源码 脚本名称要与metainfo.xml中定义的保持一致 status_params.py 引用pid文件目录及文件参数即可 内容参数可以与params中的对应项保持一致（之所以独立，是受ambari的检查机制读所限，其在做检查时是不会走params的） es_master.py/es_slave.py 组件的install，start，stop等命令的实现 脚本名称要与metainfo.xml中定义的保持一致 templates - 配置模板【不懂，测试，可将此设置为变量】 通过.xml对配置的定义，以及params.py对配置项的处理，以jinjia2为基础的templates模板将最终完成配置映射到原始应用配置文件的过程。例如：在elasticsearch.master.yml.j2文件中引用params中定义好的用于master节点的配置，如： 123456789# ----------------------------------- Paths ------------------------------------## Path to directory where to store the data (separate multiple locations by comma):#path.data: &#123;&#123;master_path_data&#125;&#125;## Path to log files:#path.logs: &#123;&#123;master_path_logs&#125;&#125; 在configure方法的实现中，实现master模板和对应master配置文件的替换： 1234567configurations = params.config['configurations']['elasticsearch-config']File(format("&#123;es_master_conf_dir&#125;/elasticsearch.yml"), content=Template("elasticsearch.master.yml.j2", configurations=configurations), owner=params.es_user, group=params.es_group) 其他资源文件 quicklinks基础格式如下，只需改写显示名称，组件名称，对应的端口号即可。property请填写.xml中定义的端口参数名称（此处作者比较偷懒，直接走默认端口）： 12345678910111213141516171819202122232425262728&#123; "name": "default", "description": "default quick links configuration", "configuration": &#123; "protocol": &#123; "type":"http", "checks":[ ] &#125;, "links": [ &#123; "name": "elasticsearch_ui", "label": "Elasticsearch UI", "requires_user_name": "false", "component_name": "ELASTICSEARCH_MASTER", "url":"%@://%@:%@", "port":&#123; "http_property": "http_port", "http_default_port": "9200", "https_property": "http_port", "https_default_port": "9200", "regex": "\\w*:(\\d+)", "site": "elastic-config" &#125; &#125; ] &#125;&#125; 其它更为复杂的alerts.json配置同样请参考Ambari（HDP）下内置Hadoop组件的配置：/var/lib/ambari-server/resources/common-services。 参考从Elasticsearch详解Ambari与第三方软件的集成（一）从Elasticsearch详解Ambari与第三方软件的集成（二）从Elasticsearch详解Ambari与第三方软件的集成（三）Elasticsearch与Kibana的集成Redis的集成ambari 二次开发之增加ElasticSearch服务ElasticSearch和solr的差别自定义service服务官方文档]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>HDP</tag>
        <tag>Ambari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[scala[2]-基本类型及操作，程序控制结构]]></title>
    <url>%2F2019%2F10%2F10%2FLearn%2Fscala%2Fscala-2-%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%93%8D%E4%BD%9C%EF%BC%8C%E7%A8%8B%E5%BA%8F%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%2F</url>
    <content type="text"><![CDATA[参考Scala入门到精通—— 第二节Scala基本类型及操作、程序控制结构]]></content>
      <categories>
        <category>Learn</category>
        <category>scala</category>
      </categories>
      <tags>
        <tag>scala</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[scala[1]-简介，变量，函数]]></title>
    <url>%2F2019%2F10%2F10%2FLearn%2Fscala%2Fscala-1-%E7%AE%80%E4%BB%8B%EF%BC%8C%E5%8F%98%E9%87%8F%EF%BC%8C%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[scala简介 scala变量定义123456789101112131415161718192021#不可变变量scala&gt; val helloString="hello String"helloString: String = hello Stringscala&gt; helloString="hello"&lt;console&gt;:12: error: reassignment to val helloString="hello"#可变变量 ^scala&gt; var helloString2="hello String2"helloString2: String = hello String2scala&gt; helloString2="hello"helloString2: String = hello# 延迟加载变量scala&gt; lazy val helloString3="hello Stirng3"helloString3: String = &lt;lazy&gt;## 在使用时才会给变量赋值，scala&gt; helloString3res0: String = hello Stirng3 val,var用于声明变量val：不可变var：可变 scala函数1234567891011121314#定义一个函数，使用return返回结果【java是 `类型 值`;scala是`值:类型`】scala&gt; def add(a:Int,b:Int):Int=&#123;return a+b&#125;add: (a: Int, b: Int)Intscala&gt; add(25,36)res1: Int = 61#可以省略return，scala会将最后一句执行语句，作为返回结果#可以省略返回值类型，scala会自动进行类型推断scala&gt; def add(a:Int,b:Int)=&#123;a+b&#125;add: (a: Int, b: Int)Intscala&gt; add(25,36)res2: Int = 61 helloworld12345object helloworld &#123; def main(args: Array[String]): Unit = &#123; println("helloworld") &#125;&#125; 参考Scala入门到精通——第一节 Scala语言初步Scala惰性赋值：lazy的使用]]></content>
      <categories>
        <category>Learn</category>
        <category>scala</category>
      </categories>
      <tags>
        <tag>scala</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sparkStreamin+kafka实操]]></title>
    <url>%2F2019%2F10%2F10%2FLearn%2FsparkStreamin-kafka%E5%AE%9E%E6%93%8D%2F</url>
    <content type="text"><![CDATA[随机产生单词,写入kafka123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/*** @program: ztgx4-&gt;Scala_SetData* @description: 产生实时流数据* @author: lwz* @create: 2019-09-30 11:40* * while true实时产生数据，用于实时处理word-count * * 数据写入kafka * * 26个英文字母和1-9的数字随机组合 * * 设置不同时间段的间隔，用于不同时间的随机产生**/object Scala_SetData &#123; def main(args: Array[String]): Unit = &#123; /*生产数据*/// 定义字典表 val DicData=Array("a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9")// 定义随机时间 单位ms val DicDate=Array(1500,2000,3000,100,500,4000,10000)// 时间格式 val DateFramt : SimpleDateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:SS") while (true)&#123; var word=""// 获取单词,4字母单词,拼接成一行，一行有10个单词 for (i &lt;- 1 to 4) &#123; val num = Random.nextInt(36) word += DicData(num) &#125; println(word) /*数据写入kafka*/// 设置参数 val prop : Properties = new Properties() prop.setProperty("bootstrap.servers", "vm110:6667,vm111:6667,vm112:6667") prop.setProperty("key.serializer", classOf[StringSerializer].getName) prop.setProperty("value.serializer", classOf[StringSerializer].getName)// 生产者 val kafkaPro : KafkaProducer[String, String] = new KafkaProducer[String,String](prop)// 定义topic val topic="test"// val words=String.valueOf(word) val mes : ProducerRecord[String, String] = new ProducerRecord[String,String](topic,2,"",word) kafkaPro.send(mes) /*设置信息产生间隔*/// 随机数，获取随机时间角标 val DicDate_num = Random.nextInt(7)// 睡眠，按照随机时间 Thread.sleep(DicDate(DicDate_num).toLong) &#125; &#125;&#125; sparkstreaming从kafka读取数据，wordcount123456789101112131415161718192021222324252627282930313233343536373839404142434445464748object StreaminWordCount &#123; /*log4j*/ Logger.getLogger("org").setLevel(Level.ERROR) def main(args: Array[String]): Unit = &#123; /*ssc*/ val conf : SparkConf = new SparkConf() conf.setAppName(this.getClass.getSimpleName) conf.setMaster("local[*]") val ssc : StreamingContext = new StreamingContext(conf, Seconds(10)) /*kafkaparams*/ val kafkaPrams : mutable.HashMap[String, Object] = new mutable.HashMap[String,Object]() kafkaPrams += ("bootstrap.servers" -&gt; "vm110:6667,vm111:6667,vm112:6667") kafkaPrams += ("key.deserializer" -&gt; classOf[StringDeserializer].getName) kafkaPrams += ("value.deserializer" -&gt; classOf[StringDeserializer].getName) kafkaPrams += ("group.id" -&gt; "test7") kafkaPrams += ("auto.offset.reset" -&gt; "earliest") /*kafkaUtils*/ val dsStream: InputDStream[ConsumerRecord[String, String]] = KafkaUtils.createDirectStream(ssc, LocationStrategies.PreferConsistent, ConsumerStrategies.Subscribe(Array("test"), kafkaPrams: collection.Map[String, Object]) ) /*wordcount*/// map中for循环的，将for循环得到的数据放入集合中，使用flatmap压平，在使用map变成元组 dsStream.foreachRDD( rdds =&gt; &#123; val resWord= rdds.flatMap(values =&gt; &#123; val word = values.value().toString val arrs : Array[String] = word.split("") arrs &#125;) val resWc : RDD[(String, Int)] = resWord.map((_,1)).reduceByKey(_+_).filter(f =&gt; !f._1.isEmpty) resWc.foreach(println) &#125;) ssc.start() ssc.awaitTermination() &#125;&#125;]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>sparkStreaming</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[我的家庭菜单]]></title>
    <url>%2F2019%2F10%2F07%2FEssays%2F%E6%88%91%E7%9A%84%E5%AE%B6%E5%BA%AD%E8%8F%9C%E5%8D%95%2F</url>
    <content type="text"><![CDATA[Please enter the password to read the blog. Incorrect Password! No content to display! U2FsdGVkX1+VWioasXo5pVurz73DRt0fLgy+MdFUXqqAmwwajPOSRM4kqsrRj31jNmc7hUDdc3qeN7GkH1ibaWMg/mOj9NAHrWZm5nXbMS4MVyIPafXo2KlcgC0zMYnluDxhT50lmYMqiwEQi0JKfkSSvb5qrRMGx2rOe0dviANQ+ebun/vzoWT6FVN2KlK0ZGXpbPOSA2XFASEr7pMwl2EAThl3vI7SZXK5ZNP6NCu8tRUWXDO8A9/VD72qoWkMKhHu25YakYlwVfk+sys6Dip8HrjO+5bg3oUCGvXxiN97yiN2DwdkfgrnbLUeFrvbfCQbxFH0/BjCL4MGkJyVz2lZzkiikPTMyMdwpxcH4WZmGRTDWYNlA5QuU+C8EnlcKGYwBomUOzSd+DnVBUSiSarWlGoQ2/SDkFUrN6yUMdN6wctxmIMfuUTNSNr1WJZlMIqERhYW86wndUreoGIo3eagGiXSGhqP9bOF9QgR3DMRwH6DDEZ3qfb+ZnsKtQQ1yypUtMGgjNHpWlYMhu0AkWwnuuwu7lT02bcxvDahcSKjSptRk49umCSdlae4xnj7n1IUaiiXKM8jg/NnC8HdDEPUTaHj172mbPHmFpfnSK/Bz2XfGY92oiGFH4qjtvwCPDDcVhe+s/QGhJtUlYWN3HHvYm/IoYaCZuZmlq5CdUL+iAtxbNxhVdjkpeQrHdNjxC7dFDtEn1EDA0fqHo0ZB5boEfjENYgq3MFXlJcicEJPfeG/elP/nJuJky+sqM7qFtYrNfhK0hbOCVDQBQgv+qi1xMqCr0AKq7e1QbIppCChv84RZAKQ8ZWlYOmKGD4VhMdHn2nFVMTF9ALBub1rXtGSqJBeuEaj9ibJmLp4VK5s/+VE92TOvkO0+dPFMMOXBkqmpkkGJtSh4V/nyhDWws/OhZnYogOnsuDjBnW6o9yuxIwTXQVZPI/7OHW/CBgw2tZ6VvBF6gU0MZNuPtl+u/MS7j5DXvBlHUPcxCImAmNG/4PVjQT+RBLb1QVSpXBb0UwUCFQ8J3Gksq8cbrfxh4VdbIbOFg8Mtk2SXjxiG3czrv8ZGPhKrH9ah9u8TeNcpH98P8srqZI7y31thPfkXTwit4EoJb7prFs9XUZQtnhOa62hUbHFgpyqEma/rT2k9Cbpof2yrslV4IYLwxRD8vCPx87bTWgUSh/gc8pwEx7H0lnWuYozQr2G42wD3DDCE8leB2Kz6l2bZYgsbsw+sIQ6rQbjvSXd2ez9rsRnO+oeBqjgVSk+YKfWDLtRcgkV/ka7xDTsXh4RFFTo0XjvTj8NogbOc2SkSqiS27Arcx2a4QVxQyD+Gg3XSJFi3PpOCEcqGZ839zZHKA8OLN50DFPmInAAyNqcOptOdZflrWosSYAUDWA/v2rT//UQ/FPXlo0nsIpVJgzYxLfl+8jXndaWT7gJ0NRj9dhg3Lc+ecMCRstYJYsADMqZkfofmGzo8Xv0MjvwB9t0ynNpWOgIAoZfIn5wLZUPOViE3xtUrkiYW//Iy+x9IbhFGySrullzNlaw4wGl+agyPJMBpq7lY3fGiHHKviGxDXDs7VQksQhil46cxlcpzP2V0vCEun7Z7ZGDXVVnykcvv9luSR1JveLgzuQHmE3eDdTdZYXk3o2T2rOoD3z1ubxx7TLMC+aJ8UsmF86ImbBg9fdhzXuhSWERyBkRlZlWBiSxSn7nbHGIySX3OmQpvWnTxilrNwQ2gJh6WTUbnuMEUeStvI/p17TJ/AYXrstjirmRGkHLWHAo1biMv3GP21jvg6iuIFXB97vF7/S9Vx0cuNsVTCeRFkmQfg88T6e4hkpZGtRdLAH5je1y5kvDvh3DsJ4hfK0IFUOQnoCxdpsMsIObZt5Bewotg/CO0SINKVuAdw+/SVWACRN/PQ057KMgQaLdzSEIamunZcLgTo5mqVaRZLL3Dj7IFYxmgG8lwdnY6dK4ymCgnwTqbJcSLTkTOsLKvH54fj++rWTgC4Bx1nnv+yxI/WS7iI7HFYXQxqF5cOymujFN/4gfDDOLA7uhRZsCxWyx9hQ83BgAtCFzc6DBr4ivFSsWgpmiz21kSVbY8CFeFq0qsDn3aAcTNxZ3DeX3Sk5yGqS2XVELvV0b1RLXQt7SdFv5b+1mJ0xoULGLV89MMnuNIvjDM8SiBrGEmBTMQPPXYkfFqKGFyfcoepx3aEKECKkw4jLXy7W+HIec83XEDSesdTdE8ku5iKB8gdC6wjVl6THZXDIpEa6RhQptFbqgUpwi7rA2qR18QyiQjegb/7LY77OPDx+0usFyEUkF+D2BL2ktpQ7mFcrSXVvEn9XmksxCvSZbijq9BBabU0oq4CxrhJkkMMg4k7RZkybX34AjbwO0kvbbnlTYtOQNv/7/w7alG5exiLBTN0IytX1xtjf3DqyCKtq9UWLlUErd5CC2KOJYHBbt1Gcl4eoQ+3c5Tbj/bPCwPDhkAQ+3y1uJZn/iHlAzmzR6GVnxIDo3JJ8Xl54s2SN5kCayw2NHUdki9jn30jlhqIn4qDWXd1JeeBhrjGD06qSMby1GqjspWkEc2ymb3pPbM3UjXQMXuXKlumxwqm430LPSKgW8KZbkAPs/jvkXP8zIqi116gmjN1EEHBudWh67P2whdZNyw9BgRKbn1VHaxqEVM6ogrNJYLxP/jBZ/zpNweygp3qVXRauDUjsvVmOqBSKkfzmDMDRcbk16NapsSPWtX9oT/gSdqvWnoC3kaMmL5DqjhimtPcqWxU0tfGBTUfGk2ywOS7UBgK4RdZIlVpVt1BM10zUIu5WXpFCfRUA+KdImbg/NqRCqOBRRfpId0WYa9VJNBd4sT3LWyE2CWyVEseosdjWF05743ncujQWkGPYWZIY6uAnXnlFwE3LfarF4ymL0i6NYWHA2PDenqPdBMFiYtnQsr0EOBrWh+RWQki1vT5t67LeLJmmjereu+0sRYujxtBa4yy44xctpuZHlHEzlXFMZQShf37UYWUICBcOLYL/U7w5S9vH8Cwyu8Ia6cSlFU2NKNJw16uWYUGQYYJzbhwc3mswcIXQYffUTekeELvLiwb8Q5dMZ50qP6PvxoZF9B/JrgjvQvmxSX5mszVDapij5FV2m1wAgOQJn0HdzR75S51HTwNQEXaEZK4w1o8OgSSThYsN9erTlUn6DEJrw5juq8krY6MmLyd6WbDN78sdFCLFEvz1727nuxQXPaYInIjAzJczJoI3YxTc4x1winX0ocf38kKgxW61WalXGJKQ8b8zXIv6FVUUQei4fkAgVE6XpUl1PD3BwBTKhOhkawNE+5Ev2j+ILdFWQBXXfP+9MipGHmLqrwogF92YZeU8X7TRUk2SMdRZQZGmRDc/4oUDW7VkvJGnB30Ion504XeWoOPICgncN+khLdVLhfu/GM3UpMR5uc0VYOd4UT223jL86S2XhRKa7cR4LEKXPqct1tmSzdGIMVJZzdz6OCF75A+kh4zoeIg1ZU/t8onVHhR5JaLME0NOMK8d6rMll97+ZZaNEnqnlhTKlCutAnk+EKMPdVsYR3Bg40gFKjHvSvgbCpT0lJrpKtfrIH7USVe0pm30QyxB/0AhjwyqOko+tUkUVOo+X2FP69Le7+g3ydlhmbNV84iOG76mNsd0lg3fwiXwV5PackpZb1WEA0jNIvG89QyS58e9wdn3ra/Nv+37MXyeKkAzBx/9+VeZAL94bq2bDRhOv1MsoO65U0N00iHkVNrmKEUY/KyhT+Yg9D+PN92JYoINLH0QlOImRucmkabR972ghMc2FsBgTxb/gJ/QROer5M1YU2jOvcLZxJ/TftaonrB7AoHuiMFLcsjmx7JgOWxHCFjRklEYhZWzkelvRI1sjiP+JikMoxzPrvx+23GdBcKGz6EKHknrrQvVDZaGXLrGjKsvWia97VXbqw1uuSd17yvtF8CadRoUhp+b6TkaheZGJe/TfnJddR95N+8U2EwjvwEdcVaOng/68uIwxQGH7nkhINHKM5HbRLssxS91nwOJB9aAypZH2K48isTPKl7cHSIR4lCcDkErNZ8uAjCpspiyJziyaDCPIz0xLNBgsWToXYoaINxsGRkvj5IKXoHhZpOuHVfvkd7nqF2j9T/yNU8lM42j16bw0IsJz7A9uY3cJSyQLTP4MesVhTEM3UmBkXcyUpI6HM8goTkpiRrDKWPuyW77NxKv9BWu4bINHaH4AFfYtuWfuob6YFNHEd8z+FLbeVURA2V9p8U8WOOlkgBB39M8yeXjp41yGbRqeEtDrlwFvt6fyVqqBITu4zygr7/rCcAhtcMtyJcZTw7NczA42+k+FgSCoPky8EFq9FmNEHQ+ZEqa7gqDeANkwE48zdjKcUsbimaw0o9ZlGyQAmUW4ehFW+SxwrT44Gr6CNNHhdTIgEHcZ6AIc7JKWVjC+gF8XOqQbmmGE9v8FsrjmQfnfPdSXucAI/H4v9ca2HOoAQM1g8Kt2LyPVwOhHmZfCsaoCJvtE23NdIR/Sr9udicR+IH5HM2pVu711hNOCw89ySibfKB50SVzSVKTZwn63/MrT914o5MC3otQ7kGFkdV+K3Cwbqk25tVKvQ2xM0VCvtesO5fN3BgiYiyJexM/1i5FX410hAUSOygywWcjmalZ5yswSrrItJBY3eJxl5PNrvzZVqOOFQ5dSYjYWKVudDt5Dd1pZyVXlpqIKMODi74J3C6A52bOnbH/cngUG3pCZENZInwb74bf7I/5JeMkMuYdwua9gRjmQUdf97bqLsLa4mAKTz8rIOXYNC7s+7G1LXVL68uQs9hfopnkAVyyvVIrxjGg7NQnqOm6Asfw+wXdwfsNuQcZZwJYfLEDR1atJHVd2xLCow2VJ38Zn942NzlHxswZFBgaTY5s4mN+2icSfUpq8UDNqWEAUx94mCeGgY8qjXiWETYW60m5C9Yl5tJ6nHwD0FLubtBHjzbmsGGuBe9PZHUfYreIX0y9PpDtY/73LNEbfbk8xaFWyje2T9asRbrc4sd3Jqqh/Hf7Hj7INKcc86LUJLa8LxjtadyznsKWOXssDZOO2tJWXlpuxIfC1qiSOMM/XgURBBcXV9uH4iZ9a7x7KbtrZUXyFiDDGiFqPmj1F8m1sueTd7N6CdnEIfiBKBN2omJFoUmOOmQLoVGZfi6Q8gTVN06o4JCvLpD64cko6bQY3eFAT8SW5jImj53uURBmj4ysuTamHGCcmmrczBa+mIbJWc7NhggWlydXUzmKq+CmApB4k6CZf1u3ycK7vjVa3dUL+QqUsUxyHyh3fpDfixNNQjXAoBMW/4zDvyXauAOsUnN1nALKqabvN/75i/+D4k4g73FeCdHMHCF6jHCB0v1pZV5Ks4KjEFNtnbky+IclCWU1n5JFe17FQX7pEYvrtgBRmUGX1HD2phPHji0UA5ZiX/bhFf6X2Boo+SLlWb1GbZ5pbkHh2hJPhf8D7apxso+aXlgHGdafxeUCALX4yvAYHdKzbBJ8tPx/QY9pYt64gft/p2OAbJvi+qFrgTD7D7XFglHec/kNMy0orN63us4OvsdF9XQ0YxSCbHu/BV9OCGxhFbDszWMYX6hvvhN+0Dbmei2Hjpvwkwpo6zwjSB3Qq8+yKwybxrtwlHoXmsgjUmsJQK7Inld4BZa5vQA0RSSIgKFDCGgFF3YyfK4KMvkg2DaMNkEF9zNS+keU4lS85B3j5ma0GnrljXUfAYmoLCml8T3XCtsn/Vvx/WVvLrMcxfBFiwyS7q8cGOGbsZfFNHb2ZwKgj+N+tk1k9GamRgNPWs2/ZdNyhQGdrYbguq9MbGcKRiGio695PgAoFMBIFND5WRR41Y4JRvTdtiVto2Ex3s7tCWP4k/SE7VU7eiz1W6ya0yKqQ+azZWAq7biy6nTmWZFZMYs3AJ14tx6JkrDGpDXvWFUKZzXT4buqrPyMWNsJ67sBjN+aD+FqdI5sF1+uN4fDDOz2yfJ8Cg5RGPVbmJemLhTuKamVpQa96qqgSJixxve5RQzcQwCdLpX1ioEUw8vloxGW+k+NzIjxJym+a7duOJK7cw+KdYI7UiRqtInF1EslZi0sz81Thqck4IJ8IDsY1fBc5wLNhqyh02ge5jx4M7dok+YSn6VQFcnYFmE4gNXzC/Cy4E5+H0J7N06PtTFCJrFkhgfT/5ch3hQh4YFoIsqWvK6KJ/t4MLVRqD2WF4mbFbpbwthELf6VlcuboghNpGUrhVL002jom9n35ZLwZo3tL1mta0Wka+0u0KVS+DI5SU4noDXmsHOt43+rHWWuZuo0qfCtvxjZWO+0Wx21pqqLpU3sw+Ck7dNVk3nYBSHhRv+GivdPuERkUS1uPoyBHqmSwr+0XZ1aRneUEsRW8A8XSB7EWTTnC+6pNPGJcbAPmN19OcWx9goJzDcttSpIwxNsqa5VQG0PxrV1pUJBHWrKzcaR5sC1x6NKAUGSOfLnqgmV0WNCNFwrosIATMKJjb+OpA/DJMH/ztr8cLJl/u38vbvx/wzthfF0KhjN7pjaIT1btXSDf3sMmiX0EH+PfoAJvLKKzIc8c+/kGeUHI0Zt9Ndfte05TFsXK3EFWif6ACn7kQNTC1+/nGLkLzs/qcZuN6BCaPm0CUt57kBEwOyBVnFgdAGm/Gx5gINdzJ6nsBExwzy5JaMB50A23i5go4gh1kHLy7YClw/mZ4uY0OBEWPIDC4L/ITb4CqjeQo7b8TjGOqiHZ/ZctDr7iHJ4wSNIcvAnlR1afESzRUaDpOEqez2Tk+lDRNdxXmu9n+Gl+marqzTwRIwDEzr1fDq0C4AhGUg20uFJqnxOO0Wat924KVOL6c3JplW3LjSzGyFvlEMxMvlV0wGt4/Ip8hoQK0dmBWPlhgnDcVu7GVqKC81Eo3P6tRt02RjMZyMS2EQiTKI/+YJSIRGACxFv6kgPxBETWAWwZ1oNtiero4+kc7G5j4bAlGwRaaOLZartzkCtvoVm2NQQgOwckClAcJyEHhI+8lRYnH/ZmP4TYN4OdN8r7oYEaIPjFRr7vtPVM1jD/FpLZHJXTH3UrvV+cx9jCc1XL8oVLYoES5PuMKHhklnMz+loO/475Ba8iHcz5o4GOrVOqGkV7rOrP9uzOvjJumML7h7ZWY0Wghi5TGAmQB/E3dzsEMpz0GozZ1xv3tWbX2nY61mski/ZfKUzraqY1snh9qYPz1eNLlggjG0xuHh5/gZTK///O5QFuEY1Gpta3KhyfzZPw74Fb5MSamqvBVER7Z76PaGy7ovVPmA/uC6JLir6oHE1Tbfg5tUWH1qd4qem3C6q8OrszuoZ88QCBGqU6+PNBXEzwliPB0EfRzHnZmcsEYCgFPXjYfkXDjSBKu777gfvKVqcny5TjNQ0oSDtdJEKOcN8yef8Rd2A1cw4MQsWi+kY5lkPdrI9xBoCmE2sLuJab5wq/oRdy9WKPsdzurf5SVEV7o3BHIQeKRJJS11mzmplQPtKzCpPJqYlXRcCGWgrrvuz1YQ/exXSZlk+K9pZ4qQMFVLncCs4N0/XjqCzbvq8eEPaXHKcTjV4BTLUFpFkutQysPInFL8L2rCi9yDSKl6xXhzCA8YPsAYRGXhfsejZ8AQNn6ySGCRM8Xlah31pMdVHTytTvGRbY4OpFnsLKFMtg/Z6x7WQgy3IcZJn9HQkIGlFTn0WMDBvvVzawqntx+Xo20K+OQqggxTyUzQwfR0uxbl0fwVXfQ/mIgsWduMkppBxzzygpRKQZ1EZJ+AF0v5dgbpy+6m2ZzT5/ii8pdrdZCHuQxQ8LYrFCIIWzcuaQ8zoV11HOVAuVg/u//Bd2DU/n7z5AdOp3AcF/nxkGB2yj9jpRIOqNtlRMlu/KxLo0drfVqCj/2To7Qhl7MchNDgqpA/s+4HoJ4fRLzyDTaXVLMh62YEW+tbNcMjRHdCZgFCnfyF+StEfmksAfP/pImJUUr4wQlX64fEFBvMisGyMMSDHce2yaaeD5y80TpY68l8O9ucJ4nTSOpwUohTpaT7LCX153s501qbR/rCMRZOmz5fZCuwOEzq1oVCSnQw3aYCB3RMqy5Wl1sA1bUrz3Qz2/+MadthXtVoXHQj/dzc0DB6GJHveidkn0yME0vidTsngS+L8b/So7FlB5iyhhWftsYSC4rO5NlFHalYD16KeMPgu2I7bZDcc7wTiZs7koH2YQwQhW3ZEc+HCsb6gm1I/DgtgC5heoOtbBwRVRlcDg8GeJV7wt16dmnaVdAui0fwTO8XRSCydgFgghU7ZMMkje3wJOcbiSk5ntjjmIP5UXBD6n8HBtUTvzIOXfowYGb+1YtjcE69N4Fw1uEsHTAtoJCZgsXZSFawPbAJlwfbpXTyZw/ra43h7fJZqmhXicuadp/dkhHfOHKK+M9/DmlfCOCffdnCpGEv0RFnz1EI6OfOindYox5t65+0fE7+jUStPJ/VsRtFekYwwdTgXTer2hhH9i3AEIxOEIb393ECrWhptvtmsyVCSNWYQd9PJW0PtPI6jn4daq9TKjs7i7X08jjLDVybyP3UpPvPgMYhgfz8FW8CtXFmk4wUP3+cVybg5P4fUKwE3RU+nrBAH2ezH23AAUxxOAsXoyL4+ZuF8epR//YqRzhtVizm4WptLmdZzxxhg0O0/JZnCb6INyCk7T130a0FQQoYv9/0haeexfxSeeExyAJ7xRehsAM1/EbsGflu1EsgHdeQN+1A0kuImvN5NpL4Q3AXwgrVAQm+aszD0FEdU50ymA2MZ6Uk714mEKd8ppNTYNLsjc9g83kikPqRykdZ6yTF5eMpQUSMycGXuiqJWeOkjfwIC/YpYwY2QLVBLl+1gMxOcZW+IqinZ4L6YFU4I0z8/RI3DIlvDpguw2OpYHFVRggRf5bn6MlHc2sMQVw+lTe5Y5fS9p6QqvXuXN7+ODWx2pWrcuvWHfMcohJKQ4p8ooodrdJwKml6Su1TkkjZIweZXtEwWX4HxkB+8mdSLMdwzeg7qeKCwuMm/+8gDhd/bZV9fZ1tNpJBLS8OlS3HFlV5SZPgArzY6+dwQgTtq652c//LlwBynLSErY0OonFOJynJSg1qniQNVyBw87Tk43w+3K5Lr5miw14Qq0NkeDVM6F4ZEN5Rw9bJwuEyOeN0GWF/IwaYChLj79X/7sEDNvnN0D5Tc+X6zk5hA6ysTpg/pHNRkNqZWDtZThyjXlmjHaVi4uTOw8Q6UNXPlwq3PgfdxB/ZFbcfimDQFU8vmq9qUkYB/M55GqnmlUVQvwYoMOOF1R8enmmfYvVpHZNby6Mr3BSFzER2Ix4I+D60GHkgeB4Co0CCO4cO6vTzw/eExitNyjqgkDFuPnlupFOlSQxpx14hvW6FpXAJwezR9hqZs0My6GcIPsnmEFMSA0KwbJI5FkQhj9F2AY8X+UVXyZrcq0B72meoQvoIouIpzMkDdYVL+WbXQmkT3ctqfATJxRnkP9vNF5PaOUOmOyDglbk8SNPE4wOeq99/m5JEdC70IM4dW9VUSg2aS/GH4n31biD6PRKqhXHun7+dpBM3XQ3bXwbDLEVuwxbWyrIen18EV6GhDfUcXVM+3QbckFlJZsx/7sX/fPJEiAsWAtENUwrK/xFZSRQUWix1GAyCNmehgP4j4Ur7B8AhnQFYlZNmijN5RFoRe0jWYoBFHaXTpy/SRNK+ZsR/l2XBQMC4Qfo/1qkpUbzMwJEXAhNTsdqwBe56XgB4Qh/pQY8Msw2EXIjxij0b/qAStOpGXHKOkVjoPhbe0ur0vMtD1OpZF48etWSGMwSOoa397Sj5sFjxDq8S2jOF5FwHq60iPgZx/bau16yrZHf84JSYSxkNfXqdspkqjpSlw/QqnzP/mWiuPxfb1x4lpLhq6rzpceifhYvGkXFNLF32omLzXxsx5MNd1od3+fT0cth5QUjQWoDnGXdcrM5NWHPM5uLu/0OgqY2UI1vqZT6FHXaMK9j6eDoE8Bq5tz1RiADcEXHGlsTRQaH8AcrA7pXlcbC9PwlVGVlhLsBQzMh6g73zx3Pk+zN7gr2U6XZyw6zqpmpJi379RC8FYvt09ZKlzF9abfvNIVkp6hSMdn4DTLtrcias2ckObyqV/fuoqIApW7W77K/ETO3VIp83LO4WdE30bst3x4FRk9Op66p+l25eGM25s0IXStM9Rmtk7ufRTB4ZRjzSVwoSPKGHIlhl1VqpnQ1yR4Vt571kSXpmRZUbXUNaHDagwCOcKwX+j+5HhC9MZ2nP47JPNdTcX/hcd5lVAt55k3OHPSc28cV7JBiIR5wWJ9JiywbK41t69gCbA5i1vJSOOoLtzal66Hx54Kp3/qBXitWxipF2Y0tc8wQNFncmmEEfXaMPRMHj/mS7cw7zdaN83FskrtK6eLhoVEm1jsJ7z+MymjuRwdg+iPw1Hr6XM1yBkpwy2OBcDFtPZ0jO/MxFBlnB5c5lnfe5ftZZIfXOtCoDLnEQbDr8iQ++DFs8EYvKv1Xs6IAaNr0201DHCFO2YuuSdj5M9BaZosL6YapfttMU6b88MY64wcCCORP34m/S3iX/CoURVT6FZxv+m1jtFWIs608IivJ3aEV+xo1lJQiU1ADCSQtx9rERdJO5zajYjwjvYQE5Yf4dyc9LD1Y51Tp6Ki4e7A1/otneq4bbnsxkSIANCEXqVB/3rAgpwY6HcLlT2VbVH3Qa3V8zH5YbMprYuOQ3kMpJEU7nenpMhsbOashEEj1YjTE/YSYP036Vw+P83/4uAl/VvkNAxrUIuViJ+YcDbVoDzJfnISARZSBUjzMLv116h2rWkVBbIOXiK7PUM+AzSb+VV+T5bwQeIFN/3iXVB21Svrb/o0Vwjb/s/w0FrLKOd6u45AkdAW5HVeDx9+AxZ4+HNIl+ZJl4glL8iwraIJAiflgn9m0xrwXRewnfxju7U+IxvO2xnCkb7EaMHGZJZQWP3Sp9DnpdBXUGbmEUk0L+p5xaERlq7N3bTWTaNbqaudAxwknAUOL5IsxOA75ncrcpQv0w+U1VDaQb4d9mMzim+pKe8TdtLz9CzVsDt0HvHhCXlr71JDMpcO2rCFF8wXPHoC7XJ87mpN1RISLO+IU2ySNk6Q9yV4awzEWB6RAeR4+oxKynA1SkBryOMiUSIPn+EoaPGmpSXxLHbKLBCqfMKv/BNUeeAuLlg6ErjHYM7igJ+2zNNi2OX4rvwFlVl/LswKyrMWFLuA857qIIh3KzgGTuo3DDsSTeGWX6oNwWt2xoYMesW4+k3xoVjspEnjb19RfK6xRBhh58X4Gz6AC1/0SeFZW0g14s1q/LML+OCpl+VulhM2mpKfRM6DyTvJOVO7peYl5idjNnQOKDicYutpd3+dkEuWztjNhF1ctu+KboRQPhCMeqVK69V+aAzp8Sxf+8tJzgsgbI0COKYcnOm1XanvXD2GJ4pshzyrTYz7mBvFrUZsVnlRWPtIgT2JhtuGmMrb0n1nZdR1vLEilooCHbVA6lTqtJKVIrBKoKJta/6bRc+04t0eGJdHF4s+hGqE0TfhJax4tYADzhkutJ5EonNWRHnz1dpLz12bamwZ9QppanFF2NLtCtXbtTm/n+didHiRwUAha7vpGqsd047yQUxW8Wf+5Y2hgHfeXbAe+QxuYAdJcC8Uazv8PUKSfPD8ApX0muUzjFCyKq/08EYG9PAa4tPB1Ey3aFN18IN+1YCvf0/rNRvnJhW+wzCFbN958JwagPfxPlvep/n/vAQobL62aNcPSW7MpvAbEELJpaIP9Mxs3OOEgH2jOaWpdz9Rg8JgJDE5FRfr6ZE5uEk9yHYLLfLY4ZLRvOQ0F2cvv9xBaaXFYJ1xPKRNTIMlZiuPpQBdSq8S+JIk205DsOZkBVsemoxGInxTevbXdsrGwBKw/JjapuVpcixLCVQKQL1KmjF2u8M025rIG62T/bxSy3BUPBNsstXpd901ASNtuI+PgQzSDBf0t9WqiktPzxbQpNjgVS4skARmBdp63zRQGYOlXxhlq8uyYM0AJPS7YjR7rTLM8AB2G05UtCO6B8oVdQQJfUW5It+UPefG2ZToHPHNYfkRXit3FqYBDC8pE/wY+d5w/C1uAuKa/7hgeNAdSRCqTYyXYIXVsHK2xH1Q4GpdleOO7QF2C5Fiq5W+ATAPBWKIMIRt7BL/sSwB2o9qLUCNa540Mr/zlFg9PczZJNnbh3H9MULuOQ9eBR3u6lET0hoUOqWnEeCOXNhwwZgvf9UmwhX70KxoXMd8dHNnRMbfalZtyhHDbscNUI3Jwr98+ADF3ZQsp1moTMfqDZK/qMZ/3e8rZzYYJRd/yNIQHOwjJbsB0OeJvX2GryOPqHzaRi+FvZDBu5f6xTNwy6cGJzVTXqZvZDsiOx3kgsxXFUb5bzUM0QCA1oSIDSJ460P21cn1+kOy7kn3vS3hmOhpCBKmM6nY2FDGavw0e3aWVpprevAyYOZHL7K1fLN1eBfYMlUmFBcDML2dIQdCBWkSpW+LdZJ62yucpUOfqqP1H6yrI/HE0Ks94z2XI/lQ1w74bD0WVRUUXgYe1fLu+r+N62imSo+J3Lq9A3yiGAuL/KKlH3uk8OCktwkeVs7+tHN0zed5G+JOJq9P+VihJsRZXj6yK4QdS9iQPiqQfOJyzy9NLoeWA8NqnH7tFnW8f8sHfasnZYQi1sfGR6EmB6PuKRhDq6huC3OBuyOaTmuCDaQKMrnZPAjgOiQV4zZeFBMOzV5ZA2doRX4sFrQjBplRxFEasFqomGRoCnzaxrcHuFrsxSx7v0P7pvl/Frpj4uTdiocvctcz+Yf43pKCxIFLgs0mGyAfV69EoPzH1ByfzByV29y+ErSyX1ai/7sm9ujYzb5hrznZQRpK3U27j+n2KrnmpkWgP+SeYiOm0H/RdW60sWyllrroksuccwgUD5R3GcEBb9Re1eCJzCywIL8jidAJGw3tYyTtkYRHYmwFTG+Sb/mTx0QwVeQgchKohjTf1zHZLIxhlaQBXJdjz0l2N8GN9EeZu0JsNUcHMr+yCJW9LxXlclhOlPTWXviwq/MUUKMJ+uVxlcUMxUKBIED2MkuXAlWWRq50DurD6PFuddDLAk4gm7UT3u6ipyj0BT8MkFoy9Qd9EkW8VJQHDxpOXgnpye5Vg4sukxuCKniPV/4dVxqR9rb0eWibR6gHvmtQWKGGdFmtHZWqYU1GVmvceK6NWLuxVtASChliIDkekS2bWaokIwZzYZBnNPzDUE0UZJ9jUf0+xq9hZrSBYezb8r1WBdFzSJUbQeOutBWETCQ2f8LBnTxgrjtMzDB8x+R03aNrGpL03absYXkA0mHQyu4tupwIyX4zZyMWyS5SGXHetWEVgzI8mKObFR3h5UGat6tk4Bg1eea2oLr/hjIQNApYmaUT/LSVRNDE4CXtK+gWsMdwxLsT0itUUECdPXu4UWHD/qO8v4oldoePMzwWqxqKKBjajFm6ZEcZCHtyt2K3io0g/6cZb8zxSBbXymbLw/LvQOLL9EMYL4B7A6SCQO6SrZ15lVXO+N5U9iWKy8cdnz/FnXXstJ8+AmK9fAfoGEURUEX4WxXjdO7UztwbWHnmyqi93qde5qAWEPK5zE7jjFX4BRbVUGjrzu2O8M8FV9IRGy2y9fnoFSphehBFc3SplATG6vdwJ8fUVFwQfVezWORgWfbFTWtfYb5/szWqLqRtyDmsvULyRwRy4DFJTJt6ZTwuqC8ekd3ewJzB0TyJ3/D3ausGLgehbG+3ro3+bj7fnfy9tiZbrysFXQJHQX/RkTaZqUL//tTrDwBI6qdCJa9Jl8tb9OM/JJERje433Dd/zRAWRIpaVHN/3UGo8yKCLd0bk9YvhyhT4Xxmg4/MzEWAtsW33pmk6HT7RaX2v2Mrl7k21xuf3qVkhQ3JN8ULqRz/7Xegt4l/5vYS7soHNeiW6vsElfrfkiqSbxFy8Ix+/XL+mJVUB9CcyDrME0dqRigGIwT50wjGnsvOyxu6PdTSWxJQIlmkKzondO7RLRm7UvggDYh+5hQrb8whvW02K04DwJaOAqBl9MMo0/+tYhDmlzieOOj7YnVviSHm9jxjZ+oXfSmEjMmSkgJhEAEx3z09oBIf4iBPA+q02N4BHyvoBBuTcgA+WFJCyGm0Kw54AC/4LW0voIzbwUDdXtBnpNC4sMwgAE5fLAp6toU/09MZwlXdoyBKTj/nm4pYv57kcd35FsFbAeaAd+NqtfAthyNXLjWwKOPjDZbo/NGzN3ZVJAJbv+pj0oV7I4GCY3wCH4uxl4I62ufOMcy9OCPs8kgZO5gAr2xL5zlMDpQTaMJJicH2LRc8OGZAGQvRVRZS5sca7CSUhmxXajt7XnuH/H5b4EL6ErhQo65uIHnJ77mjoGHmH1k8HNPUVCuRSAyCiI2pKZy76Mee5HQS9vMPIuDUCbmj+FmsckO5IT552QnuVcv8dSTPbuLCv0uJlXKbDtsdnJJ4K3aloBS7nNG7JwZBwjW/Kq56Ce53qcSrSrYYU1IonP4IEgQaRRIurkDu1u8QSNO8AzL5t1f6QDNZMT9jOS7gGs8twfcpkA2TmXpIP45VLCiw7gigO/Zha8Vm3t845VV/CfgwEoeq/PXynZpVDMIlBOdfxovmrlOn3uTG7l/IerJgfA5DlMgJimT/GnunJt+RiHZeZy4gtfnk2IJ6ivwn8pWxCTxllzeA/FJXfkHKTXWzsg5vmFEDZ5l8LSYrkuVGVxPu28zhzhyxUvBJ87mxfz/MUSxIEYHdoduh78hNMMgvsM8CfHwtdlAbtEGPhS+JHHB7gQ6K+Y3eJEOezDBsfdEE0jm0yWQQzPUC0RPzcuGpzB5F/N4Yz57KAtERfOKZ2Hdv1lwnt5IKf2EqokcDgyBfcq0g2o0dQ68rLgYCo1tUKyHZz3LLfql2H/zq7wB8lFbXdakJr/vZKYJINaqc5rH4gWGZkZRlXRJS02wV2gcyJqeTGSg0jOSx0n8td1V8wYRTmZd6gSAK5HJP5fJ8JlveelNvLKqi6Qg4qeNEJcMwV/Gvro+0/ya+Idhh75TwrnpE1lfTHk0lsuU7teF536HPYJ3xfUZRDnBNcPpT9ui/yXObJL3hrjBp8gnnaUmAXDGn49yEAOBeqOn1ihbWbNQz1+CkdO/hnHDVuG/pq6k7NhlqBzTQ8d1gEzWQgQc+Dg6MJdvUHxnIODqGIsfwslsz0PP2EHiOChYstdrOF4ws9P3eTQjMdrAPMgT4AxDrp1oXI2BbKnGZTrsiUePESqW0Me5uXmQcZMEQWGG3ifpBOZMKpQgfySE5x64qrdEuTbO5YdXplilgAyR1M1d+tuDU2TStmB95HXDJseRBAxUempc9Sd3j+hotXvbRafDWw/0CN9PlchG3J37bOGnjtW8bgHnayjybRpVLh0b4bojrQih8Z+mbQqNrlemEw66aSC2MfA4DLnWI3IfMfUaG4SGLSkDJeIgNTkyD67iJf+nJS5Zunp6JtorTiCIawFidge2tPmzrRTXXiFarQkUhp9hcXQXRTmHpW6+Pe+lzVMPyt9kQIRCaIgYq/1RyHIVMNcpvsNPu//5MiDWnU25kTML4k7pdjBWO6pbuAIfB0iH8/TTOnXwhToCfXQuRPnpQIHO2/oOciB1d7kTzenxBuT2LsUzxtctMRxRkOBE8oLFXPPC111E60Wn66vdJ9HEbMPru2fZXOk4UhILCpgb2Eu31VqRqQIeYSH6bFvCBKWpi8jJClEjleiP7P8WN1jVb056LCoixTW9TJgHstpGIVWN+7ZrPD6+eIa3Xg9NmuUp4DAVdE8zvxGIIfsqLyrOC1kVyBZKpUmoRuZMheZN/samT6f5fHmUQXvEDvK6idFhJSwKjn89LGAKUA64/W+mGCyEq3Pqp93FKzHcJAzmplNv/vLmzeXr1nhJKmIoJlZ8SzwvaQTnsAkZkyaU/JE8oJ8g8EJCs+Tft/UKGEpVH9tJ4EpQzOFPqcIVJRNWoxUa/jxj00UxC2+s62bG62AsjtpM6KEk1qVQ=]]></content>
      <categories>
        <category>Essays</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[自我观察]]></title>
    <url>%2F2019%2F10%2F07%2FEssays%2F%E8%87%AA%E6%88%91%E8%A7%82%E5%AF%9F%2F</url>
    <content type="text"><![CDATA[Please enter the password to read the blog. Incorrect Password! No content to display! U2FsdGVkX1+Ph2TcXJ1JmLtDD9c3IRBBKaffHl9xc5d/k/1y5/1uLeuLlUkF65A+dA1pwXMO8vIpsxIt5YNBCq9aQevKWwBSE8b6+SGoBPRHsLS/kcw4QacFsJ4ZSV+ygsOgds/RHdebvhF2SY8FfRmMTaLOaid3MU+zAWZ8iRMnsQhvPqBzEDWPT3zIcggbVMN8WquEOm/2Ccp9tJXAw5GPp/5ZMkjMX0aO+v2BRfgbIqmHxq705lZYGSqFVmgx31h9eOvdoXotpZbw5AD5ksx+6ZfmQwwIjpQPhsivCH6EJtIVVkZKjzmtkChODkBfmmpiC8T4QU6Bn/VN4WJDA7aDg7bzeUCVRC3FMJLCOoJV+nhJzD2X3dIau0UKLV6p176hsJDsecRaxCGX6jnnYUMYum8v6dNIS/jaRuHyPN9Hy/8aW/K4SpznyxC/UQJ18uK4SdmUdTuOF9GN4qHEIA74hEhGsZ+gpk7EqMbOc/vj1cb3NQ7j2CNogFcmxEVZ/8u3mOXRr+He1ryU9TDXokVzBqDbDRGQbj+lZIaYUu5/O2TBDllM/UygtRDmiihjMEUcYEdZSQzioeS4nbmOTEFWg8A3fEFu257PYubVB19g2uEQFrn32MjVLNYf+iySS6P/ZA3chZ73JDTv9Bs1hELOkxV4ScxNRIwPNG0b6Fg0I46hNdzWJ905ewi69pAWZz8QuZGKq31PpOwxhidwb/7Wbp+3YCeuzs7WdxAPDs2+G8dYIaR9ceo6oCp89sJIky66EGrKatMBAPKAKgYmeiv7ixYJFA6v1g1lrqkZAnPoK0iiz2+pgw0aoyGYYW+FaJ0CRda/R1+CvxNh08piBSA+1n/4yImmhkfV6N5RtjpbIf97ZvSnosTN3/frr2YyJfcuqTUdBmmQwSMUx2si6ynZgL/c3ck+yQgrQ++dbPejiu3kWRkE6KMN6u52I5PC72nFFKZhzuB6IlnS45qFiUBNpLsPl5Eos+QTWIXiFm3UtADwuTPcpkcSyvNBs+PHzkdKrGpM9wm+lhevpPIJjA/gXrornPi4H0q/236trjkbySrpiA8Y6Ol7OHPD4BlRKTg2ZefpQiUwGzRKPhbFIXtjsr5f/CG+AB8tNxkk4ckraEU2pfOVkVER5wNI9LgHQBod82/yCcLcfnjh/UMSkLyWn6p9670vzFaBgOL5bca9HAsRySad0Tw+fCqbwEpzTDFwTNkiEwM2Ca4er4s6i29V9qqfprl2uazPRiwrvK0=]]></content>
      <categories>
        <category>Essays</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Hbase压缩]]></title>
    <url>%2F2019%2F09%2F29%2FBigData%2FHbase%E5%8E%8B%E7%BC%A9%2F</url>
    <content type="text"><![CDATA[Hbase压缩压缩算法的比较 算法 压缩比 压缩 解压 LZO 20.5% 135MB/s 410MB/s GZIP 13.4% 21MB/S 118MB/S Snappy/Zippy 22.2% 172MB/s 409MB/s 总结： GZIP的压缩率最高，但它是CPU密集型的，对CPU的消耗较多，压缩和解压速度也慢； LZO的压缩率居中，比GZIP要低一些，但是压缩和解压速度明显要比GZIP快很多，其中解压速度快的更多； Zippy/Snappy的压缩率最低，而压缩和解压速度要稍微比LZO要快一些 所以，一般情况下，推荐使用snappy和zippy压缩算法 hbase表启动压缩的步骤这里分两种情况：一是在创建表指定压缩算法，二是在创建表后指定压缩算法或者修改压缩算法 创建表时指定压缩算法123create 'test', &#123;NAME =&gt; 'info', VERSIONS =&gt; 1, COMPRESSION =&gt; 'snappy'&#125;# 表创建之后，使用describe命令查看表信息describe 'test' 创建表后指定或者修改压缩算法 disable需要修改的表 disable &#39;test&#39; 使用alter命令进行修改 alter &#39;test&#39;, NAME =&gt; &#39;info&#39;, COMPRESSION =&gt; &#39;snappy&#39; NAME即column family，列族。HBase修改压缩格式，需要一个列族一个列族的修改，注意大小写，不要弄错了。如果修改错了，将会创建一个新的列族，且压缩格式为snappy。当然，假如你还是不小心创建了一个新列族的话，可以通过以下方式删除： alter &#39;test&#39;, {NAME=&gt;&#39;info&#39;, METHOD=&gt;&#39;delete&#39;} 重新enable表 enable &#39;test&#39; 对表进行major_compact操作，使压缩生效 major_compact &#39;test&#39; 注意，如果表的数据较多，该操作需要较长时间，所以尽量选择一个不忙的时间，避免对服务造成影响。 修改完成后，可使用describe命令查看表信息]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Hbase</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[数据导入Hbase的四种方法]]></title>
    <url>%2F2019%2F09%2F27%2FBigData%2F%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5Hbase%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[put方法写入12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/** *classname:PutToHbase *auther:LWZ *date:2019/9/26 9:59 * put方法*/object PutToHbase &#123; def main(args: Array[String]): Unit = &#123; /*sparkcontext*/ /*sparkcontext可以makerdd*/ val conf : SparkConf = new SparkConf().setAppName(this.getClass.getSimpleName).setMaster("local[*]") val context : SparkContext = new SparkContext(conf) /*make RDD*/ val rdd : RDD[Int] = context.makeRDD(1 to 100000,4) println("count is:"+rdd.count()) rdd.take(20).foreach(println) /*family*/ val family : Array[Byte] = Bytes.toBytes("info") /*column*/ val column : Array[Byte] = Bytes.toBytes("column_name") rdd.foreachPartition(fore =&gt; &#123; val getTable : Table = gettable() fore.foreach( value =&gt; &#123; val put : Put = new Put(Bytes.toBytes(value)) put.addImmutable(family,column,Bytes.toBytes(value)) getTable.put(put) &#125;) getTable.close() &#125;) context.stop() &#125; def gettable():Table=&#123; /*获取hbase连接*/ val configuration : Configuration = HBaseConfiguration.create() configuration.set("hbase.zookeeper.quorum", "vm110,vm111,vm112") configuration.set("hbase.zookeeper.property.clientPort", "2181") configuration.set("hbase.defaults.for.version.skip", "true") configuration.set("zookeeper.znode.parent", "/hbase-unsecure") val conn : Connection = ConnectionFactory.createConnection(configuration) /*表名*/ val table="test01" /*gettable*/ val getTable : Table = conn.getTable(TableName.valueOf(table)) getTable &#125;&#125; 速度： put list方法写入123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** *classname:PutListToHbase *auther:LWZ *date:2019/9/26 10:49 * */object PutListToHbase &#123; def main(args: Array[String]): Unit = &#123; /*sparkcontext*/ val conf: SparkConf = new SparkConf() .setMaster("local[*]") .setAppName(this.getClass.getSimpleName) val context : SparkContext = new SparkContext(conf) /*make rdd*/ val rdd : RDD[Int] = context.makeRDD(1 to 100000,4) /*family*/ val family : Array[Byte] = Bytes.toBytes("info") /*column*/ val column : Array[Byte] = Bytes.toBytes("column_age") rdd.foreachPartition(fore =&gt; &#123; val table : Table = gettable() val lst : util.LinkedList[Put] = new util.LinkedList[Put]() fore.foreach(value =&gt; &#123; /*row_key*/ val put : Put = new Put(Bytes.toBytes(value)) put.addImmutable(family,column,Bytes.toBytes(value)) lst.add(put) &#125;) gettable().put(lst) gettable().close() &#125;) context.stop() &#125; /*gettable*/ def gettable():Table=&#123; /*获取hbase连接*/ val configuration : Configuration = HBaseConfiguration.create() configuration.set("hbase.zookeeper.quorum", "vm110,vm111,vm112") configuration.set("hbase.zookeeper.property.clientPort", "2181") configuration.set("hbase.defaults.for.version.skip", "true") configuration.set("zookeeper.znode.parent", "/hbase-unsecure") val conn : Connection = ConnectionFactory.createConnection(configuration) /*表名*/ val table="test01" /*gettable*/ val getTable : Table = conn.getTable(TableName.valueOf(table)) getTable &#125;&#125; 速度：比put方法快很多 使用saveAsNewAPIHadoopDataset API12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** *classname:BulkLoadToHbase3 *auther:LWZ *date:2019/9/27 11:42 * saveAsNewAPIHadoopDataset api的使用 * 此api用于使用put，对多字段数据，批量导入hbase * 注：put和bulkload不能同时使用*/object BulkLoadToHbase3 &#123; def main(args: Array[String]): Unit = &#123; /*sparkcontext*/ val conf: SparkConf = new SparkConf() .setMaster("local[*]") .setAppName(this.getClass.getSimpleName) val context: SparkContext = new SparkContext(conf) /*makerdd*/ val rdd: RDD[Int] = context.makeRDD(1 to 100000, 4) /*组合成多字段的tuple*/ val rdd2 = rdd.map(line =&gt; &#123; (line, line + "name", line + "age") &#125;) /*基本参数*/ val tablename = "test01" val family = Bytes.toBytes("info") /*获取Hbase连接*/ val configuration: Configuration = HBaseConfiguration.create() configuration.set("hbase.zookeeper.quorum", "vm110,vm111,vm112") configuration.set("hbase.zookeeper.property.clientPort", "2181") configuration.set("hbase.defaults.for.version.skip", "true") configuration.set("zookeeper.znode.parent", "/hbase-unsecure") configuration.set(TableOutputFormat.OUTPUT_TABLE, tablename) /*data清洗+排序+生成kv_list*/ val rdd3 : RDD[(Int, String, String)] = rdd2.sortBy(so=&gt; so._1) val data=rdd3.map(value =&gt; &#123; val put : Put = new Put(Bytes.toBytes(value._1)) put.addColumn(family,Bytes.toBytes("name"),Bytes.toBytes(value._2)) put.addColumn(family,Bytes.toBytes("age"),Bytes.toBytes(value._3)) (new ImmutableBytesWritable(),put) &#125;) /*save Hfiles on hdfs*/ val job : Job = Job.getInstance(configuration) job.setOutputKeyClass(classOf[ImmutableBytesWritable]) job.setOutputValueClass(classOf[Put]) job.setOutputFormatClass(classOf[TableOutputFormat[ImmutableBytesWritable]]) data.saveAsNewAPIHadoopDataset(job.getConfiguration) context.stop() &#125;&#125; 速度：比putlist快 bulkload方法[kv]12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879/** *classname:BulkLoadToHbase2 *auther:LWZ *date:2019/9/27 10:36 * bulkload无法对put进行操作，只能操作keyvalue。但是keyvalue只能操作一个字段 * 现在将多个keyvalue放入集合，再遍历，达到解决多个字段的效果 * * 测试之后，发现不可以 * * 对于多个字段还是得使用put * 判断是否为bulkload，观察hbase master页面，是否有数据插入的情况 * 此方法表现状况为：页面无插入详情，条数也不显示，但是count hbase表，有数据*/object BulkLoadToHbase2 &#123; def main(args: Array[String]): Unit = &#123; /*sparkcontext*/ val conf : SparkConf = new SparkConf().setMaster("local[*]").setAppName(this.getClass.getSimpleName) val context : SparkContext = new SparkContext(conf) /*makerdd*/ val rdd : RDD[Int] = context.makeRDD(1 to 100000,4) /*组合成多字段的tuple*/ val rdd2=rdd.map(line =&gt; &#123; (line,line+"name",line+"age") &#125;) /*基本参数*/ val tablename="test01" val HfilePath = "/tmp/test01" val family=Bytes.toBytes("info") /*获取Hbase连接*/ val configuration: Configuration = HBaseConfiguration.create() configuration.set("hbase.zookeeper.quorum", "vm110,vm111,vm112") configuration.set("hbase.zookeeper.property.clientPort", "2181") configuration.set("hbase.defaults.for.version.skip", "true") configuration.set("zookeeper.znode.parent", "/hbase-unsecure") configuration.set(TableOutputFormat.OUTPUT_TABLE, tablename) /*get table*/ val conn: Connection = ConnectionFactory.createConnection(configuration) val admin : Admin = conn.getAdmin val table : Table = conn.getTable(TableName.valueOf(tablename)) val locator : RegionLocator = conn.getRegionLocator(TableName.valueOf(tablename)) /*FileSystem*/ val filesystem : FileSystem = FileSystem.get(configuration) if(filesystem.exists(new Path(HfilePath)))&#123; filesystem.delete(new Path(HfilePath)) &#125; /*data清洗+排序+生成kv_list*/ val rdd3 : RDD[(Int, String, String)] = rdd2.sortBy(so=&gt; so._1) val data=rdd3.map(value =&gt; &#123; val kv : KeyValue = new KeyValue(Bytes.toBytes(value._1),family,Bytes.toBytes("name"),Bytes.toBytes(value._2+"+++++"+value._3)) (new ImmutableBytesWritable(),kv) &#125;) /*save Hfiles on HDFS*/ val job : Job = Job.getInstance(configuration) job.setMapOutputKeyClass(classOf[ImmutableBytesWritable]) job.setMapOutputValueClass(classOf[KeyValue]) HFileOutputFormat2.configureIncrementalLoadMap(job,table) data.saveAsNewAPIHadoopFile(HfilePath,classOf[ImmutableBytesWritable],classOf[KeyValue],classOf[HFileOutputFormat2],configuration) /*Bulk load Hfils to Hbase*/ val bulkloader : LoadIncrementalHFiles = new LoadIncrementalHFiles(configuration) bulkloader.doBulkLoad(new Path(HfilePath),admin,table,locator) conn.close() filesystem.close() context.stop() &#125;&#125; 注生成HFile的过程比较慢，生成HFile后写入hbase非常快，基本上就是hdfs上的mv过程.对于生成HFile方式入库的时候有一个改进的方案，就是先对数据排序，然后生成HFile。 HFile方式在所有的加载方案里面是最快的，不过有个前提——数据是第一次导入，表是空的。如果表中已经有了数据。HFile再导入到hbase的表中会触发split操作，最慢的时候这种操作会耗时1小时。 在生产中，需要导入hbase的数据分为up和add两部分，即更新数据和新增数据。所以会出现部分很快，部分会慢一些的情况。【只是理论上来讲，应该先慢后快，实际上先快后慢】 缓存块方法123456789101112131415161718192021222324252627282930313233343536373839404142/** *classname:BulkLoadToHbase4 *auther:LWZ *date:2019/9/27 17:11 * 缓存块方式写数据到Hbase*/object BulkLoadToHbase4 &#123; def main(args: Array[String]): Unit = &#123; /*sparksession*/ val session=SparkSession.builder() .master("local[*]") .appName(this.getClass.getSimpleName) .getOrCreate() /*makerdd*/ val rdd : RDD[Int] = session.sparkContext.makeRDD(1 to 1000000,4) rdd.foreachPartition(ma =&gt; &#123; /*获取Hbase连接*/ val configuration: Configuration = HBaseConfiguration.create() configuration.set("hbase.zookeeper.quorum", "vm110,vm111,vm112") configuration.set("hbase.zookeeper.property.clientPort", "2181") configuration.set("hbase.defaults.for.version.skip", "true") configuration.set("zookeeper.znode.parent", "/hbase-unsecure") /*htable*/ val htable : HTable = new HTable(configuration, TableName.valueOf("test01")) htable.setAutoFlush(false,false) //关键点1 htable.setWriteBufferSize(512*1024*1024) //关键点2 /*data*/ ma.foreach(value =&gt; &#123; val put : Put = new Put(Bytes.toBytes(value)) put.addColumn(Bytes.toBytes("info"),Bytes.toBytes("name"),Bytes.toBytes(value)) htable.put(put) &#125;) htable.flushCommits() //关键点3 &#125;) session.stop() &#125;&#125; 参考addcolumn和addImmutable有何区别spark写数据到hbase的三种方法HBase总结（1）– 数据插入与Put对象注：缓存块方法无法使用，已经被淘汰spark将数据写入hbase以及从hbase读取数据HBase 写优化之 BulkLoad 实现数据快速入库Hbase几种数据入库（load）方式比较Spark读写HBase之使用Spark自带的API以及使用Bulk Load将大量数据导入HBaseBulk Load——Spark 批量导入多列数据到HBase（scala/Java）]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Hbase</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[测试集群增加节点以及删除节点]]></title>
    <url>%2F2019%2F09%2F17%2FBigData%2F%E6%B5%8B%E8%AF%95%E9%9B%86%E7%BE%A4%E5%A2%9E%E5%8A%A0%E8%8A%82%E7%82%B9%E4%BB%A5%E5%8F%8A%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9%2F</url>
    <content type="text"><![CDATA[起因使用测试集群增加个人电脑的节点到集群中 步骤设置个人电脑虚拟机为桥接模式新机器设置ip1234567891011121314151617[root@test ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens33TYPE=EthernetBOOTPROTO=staticDEFROUTE=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_FAILURE_FATAL=noIPV6_ADDR_GEN_MODE=stable-privacyNAME=ens33DEVICE=ens33ONBOOT=yesIPADDR=192.168.2.250NETMASK=255.255.255.0GATEWAY=192.168.2.1DNS1=8.8.8.8 注：设置为桥接模式，需处于和主机相同网段 修改主机名和主机映射12345678910111213[root@test ~]# vi /etc/hosts127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6192.168.200.110 vm110192.168.200.111 vm111192.168.200.112 vm112192.168.200.200 bs00192.168.200.201 bs01192.168.200.202 bs02192.168.200.203 bs03192.168.2.250 test 修改/etc/sysconfig/network12345[root@test ~]# cat /etc/sysconfig/network# Created by anacondaNETWORKING=yes[root@test ~]# systemctl restart network 配置jdk配置免密123456789101112131415161718[root@vm110 home]# ssh-copy-id testThe authenticity of host 'test (192.168.2.250)' can't be established.ECDSA key fingerprint is 7f:0c:e8:7f:87:29:ed:e9:66:4c:1b:50:f8:26:ac:a5.Are you sure you want to continue connecting (yes/no)? yes/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysroot@test's password:Number of key(s) added: 1Now try logging into the machine, with: "ssh 'test'"and check to make sure that only the key(s) you wanted were added.[root@vm110 home]# ssh vm110 date; ssh vm111 date; ssh vm112 date ; ssh test date;Tue Sep 17 17:39:48 CST 2019Tue Sep 17 17:39:48 CST 2019Tue Sep 17 17:39:48 CST 2019Tue Sep 17 17:39:47 CST 2019 修改文件限制1234567[root@test jdk]# vi /etc/security/limits.conf# End of file* soft nofile 65536* hard nofile 131072* soft nproc 2048* hard nproc 4096 关闭防火墙设置selinux123456789101112[root@test jdk]# vi /etc/selinux/config# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.SELINUX=disabled# SELINUXTYPE= can take one of three values:# targeted - Targeted processes are protected,# minimum - Modification of targeted policy. Only selected processes are protected.# mls - Multi Level Security protection.SELINUXTYPE=targeted 设置ntp服务，同步时钟12345678910111213[root@test jdk]# vi /etc/ntp.conf#server 0.centos.pool.ntp.org iburst#server 1.centos.pool.ntp.org iburst#server 2.centos.pool.ntp.org iburst#server 3.centos.pool.ntp.org iburstserver 192.168.200.110 prefer[root@test jdk]# ntpq -p remote refid st t when poll reach delay offset jitter============================================================================== vm110 120.25.115.20 3 u 13 64 1 2.422 49.073 0.000 修改yum源1234[root@vm110 yum.repos.d]# scp ambari.repo test:/etc/yum.repos.d/ambari.repo 100% 271 0.3KB/s 00:00[root@vm110 yum.repos.d]# scp hdp.repo test:/etc/yum.repos.d/hdp.repo 页面增加节点注意：在test节点安装hadoop组件时，出现了无法使用163镜像和阿里云镜像，虽然网络是可以ping通百度，但也是十分不稳定，所以采用了离线安装的方式。即：将已经准备好的local_yum上传至/var/www/html(需要提前安装httpd服务),然后配置本地yum源，将base的yum源移除，此时，节点上可使用的yum源为ambari，hdp，local_yum。遂安装成功 安装节点后测试wordcount测试wordcount数据生成123456789101112131415161718192021222324252627282930313233public class wddata &#123; public static void main(String[] args) &#123; //数据存储路径 String output= args[0]; String strs[]=&#123;"hello", "hi", "word", "hahah", "nihao", "spark", "html", "css"&#125;; String restr=""; Random random = new Random(); int flog=0; try &#123; OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream(output)); for(int i=0;i&lt;10000000;i++)&#123; int num = random.nextInt(8); String str = strs[num]; out.write(str); out.write(","); flog+=1; if(flog==10)&#123; out.write("\r\n"); flog=0; &#125; &#125; out.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; 打包上传至集群中运行，数据存储在节点本地 12345678910[root@vm110 testdata]# pwd/usr/local/src/liu/testdata[root@vm110 testdata]# lltotal 32-rw-r--r-- 1 root root 32262 Sep 18 10:55 test2-1.0-SNAPSHOT.jar[root@vm110 testdata]# java -cp test2-1.0-SNAPSHOT.jar wddata /usr/local/src/liu/testdata/data.data[root@vm110 testdata]# du -sh *51M data.data 将data.data上传至hdfs 1[hdfs@vm110 testdata]$ hadoop fs -put data.data /test/wd.txt 1[hdfs@vm110 testdata]$ spark-submit --master yarn --class wdcount test2-1.0-SNAPSHOT.jar wordcount123456789101112131415161718192021222324252627282930/** *classname:wdcount *auther:LWZ *date:2019/8/23 14:17 * */object wdcount &#123; /*saprksession*/ def main(args: Array[String]): Unit = &#123; val sessioin=SparkSession.builder()// .master("local[*]") .appName(this.getClass.getSimpleName) .getOrCreate() /*input*/ val input="hdfs://vm110:8020/test/wd.txt" /*src*/ val src : Dataset[String] = sessioin.read.textFile(input) val res: RDD[(String, Int)] =src.rdd.flatMap(line =&gt; &#123; val arrs : Array[String] = line.split(",") arrs &#125;).map(tp =&gt; (tp,1)).reduceByKey((re1,re2)=&gt;re1+re2) println(res.collect().toList) &#125;&#125; 结果： 1List((word,1250381), (hello,1250540), (hahah,1251383), (spark,1248842), (hi,1249971), (css,1247879), (html,1250719), (nihao,1250285)) 文件复制测试准备1.1G大文件在节点机器上，上传至hdfs 1234[hdfs@vm110 data]$ hadoop fs -mkdir /test[hdfs@vm110 data]$ hadoop fs -put testdata.data /test/data.data[hdfs@vm110 data]$ du -sh *1.2G testdata.data 由图可见，test节点使用量为675.74Mb 在要删除的节点设置datanode为Decommission 查看datanode页面，等待完成 block块对比before after 一个block块有三个副本，现在有四个，说明test上面的block块已经被成功复制 停止节点上的所有组件删除节点停止ambari-agent 1234567[root@test yum.repos.d]# ambari-agent stopVerifying Python version compatibility...Using python /usr/bin/pythonFound ambari-agent PID: 13784Stopping ambari-agentRemoving PID file at /run/ambari-agent/ambari-agent.pidambari-agent successfully stopped 删除 重启HDFS]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[bigdata零零碎碎]]></title>
    <url>%2F2019%2F09%2F17%2FBigData%2Fbigdata%E9%9B%B6%E9%9B%B6%E7%A2%8E%E7%A2%8E%2F</url>
    <content type="text"><![CDATA[个人电脑虚拟机作为测试集群节点桥接模式是将主机当成为一个交换机，桥接模式的虚拟机和主机都可以看成通过这个交换机连接到外部网络，这两个机器不会互相影响，完全独立。但是得设置虚拟机的ip和网关和主机的ip和网关在同一网段 使用测试集群中节点ping主机，能够ping通，所以猜想，如果可以弄一个虚拟机处于和主机相同的网络环境，就可以将此虚拟机增加到集群之中 参考文章VMWare桥接方式设置及问题解决VMware的三种网络类型 hive的explode函数源数据如下： 1234[root@vm110 hivetest]# cat test.txtzs 1,2,3,5 25li 6,2 30hh 3 20 hive建表： 1234567891011121314151617hive&gt; create table explodeTest (name string,score array&lt;string&gt;,age string) &gt; ROW FORMAT DELIMITED &gt; FIELDS TERMINATED BY '\t' &gt; COLLECTION ITEMS TERMINATED BY ',';OKTime taken: 0.33 secondshive&gt; load data local inpath '/usr/local/src/liu/hivetest/test.txt' into table explodetest;Loading data to table liu.explodetestTable liu.explodetest stats: [numFiles=1, numRows=0, totalSize=32, rawDataSize=0]OKTime taken: 0.224 secondshive&gt; select * from explodeTest;OKzs ["1","2","3","5"] 25li ["6","2"] 30hh ["3"] 20Time taken: 0.156 seconds, Fetched: 3 row(s) explode演示： 1234567891011#行转列hive&gt; select explode(score) from explodeTest;OK1235623Time taken: 0.105 seconds, Fetched: 7 row(s) 使用lateral view 12345678910hive&gt; select name,age,score1 from explodeTest lateral view explode(score) score2 as score1;OKzs 25 1zs 25 2zs 25 3zs 25 5li 30 6li 30 2hh 20 3Time taken: 0.103 seconds, Fetched: 7 row(s) 参考:Hive-explode[行转列]关键字使用 spark-sql中使用explode函数需要导入两个包，如下 1234567891011121314151617181920212223242526272829303132333435363738394041424344# import org.apache.spark.sql.functions.explode# import session.implicits._package cn.sic_credit.bigdata.tycdata.com_bus_risks_industrialimport org.apache.spark.sql.functions.explodeimport org.apache.spark.sql.&#123;DataFrame, SparkSession&#125;/** *classname:parseJsonETL *auther:LWZ *date:2019/9/23 11:41*/object parseJsonETL &#123; def main(args: Array[String]): Unit = &#123; /*sparksession*/ val session=SparkSession.builder() .master("local[*]") .appName(this.getClass.getSimpleName) .getOrCreate() import session.implicits._ /*args*/ val tableName="com_bus_risks-industrial" /*input*/ val input="hdfs://vm50:8020/flume/logs/tyc_data/2019-09-21/*" val output="" /*src*/ val src : DataFrame = session.read.json(input) src.show(20) src.printSchema() /**/ val df1 = src.select($"com_name",$"com_credit_code",(explode($"com_bus_risks-industrial") as "com_bus_risks-industrial")) df1.show(20) df1.printSchema() session.stop() &#125;&#125; sparkSQL并行度参数设置在代码中设置123val spark = SparkSession.builder() .config("spark.sql.shuffle.partitions",100)//设置并行度100 .getOrCreate() 提交任务时设置注：代码优先级高于提交时的优先级 123456789./bin/spark-submit \--class com.imooc.log.TopNStatJobYARN \--name TopNStatJobYARN \--master yarn \--executor-memory 1G \--num-executors 1 \--conf spark.sql.shuffle.partitions=100 \/home/hadoop/lib/sql-1.0-jar-with-dependencies.jar \hdfs://hadoop001:8020/imooc/clean 20170511 参考:SparkSQL并行度参数设置方法 自定义yum，或者修改yum源的设置修改yum源： 修改 yum clean all #清除系统所有yum缓存 yum makecache #重新生成yum缓存 yum repolist #查看所有yum源 在自定义yum源，修改了yum源之后，推荐上述三个步骤全部弄一遍 参考: CentOS7系统配置国内yum源和epel源 yum 指定安装某个源下的软件的方法一条命令一个参数搞定代码如下: 1[root@aikaiyuan ~]# yum install nginx --enablerepo=epel 稍微解释一下：代码如下:yum install XXX –enablerepo=YYYXXX是要安装的软件，YYY是repo源的名字。 安装mysql后无法找到临时密码的解决方案安装mysql后无法找到临时密码的解决方案 HDFS数据reblance12345678910111213# 设置reblance的平衡速度hadoop dfsadmin -setBalancerBandwidth 104857600#104857600-》100m；209715200-》200m#启动reblancehdfs balancer -threshold 30#参数解释-threshold 30 设置越大，越快结束，并且优先解决DN占用率高的参数含义：判断集群是否平衡的目标参数，每一个 datanode 存储使用率和集群总存储使用率的差值都应该小于这个阀值 ，理论上，该参数设置的越小，整个集群就越平衡，但是在线上环境中，hadoop集群在进行balance时，还在并发的进行数据的写入和删除，所以有可能无法到达设定的平衡参数值。-include 包含如下的DN列表dfs.balance.bandwidthPerSec 300MB（我们计算集群的设置）参数含义：设置balance工具在运行中所能占用的带宽，设置的过大可能会造成mapred运行缓慢。 hbase表行数统计count1234hbase(main):004:0&gt; count 'company_staff'Current count: 1000, row: 0000839a3d3a2034_1951642732Current count: 2000, row: 0000f47e0fe8bcb6_2565270560Current count: 3000, row: 00016fdc1ba2f038_2237042119 但是此方法速度很慢，只适用于数据量较小的表 调用MapReduce调用habse jar自带的统计行数的类 12345678910[hdfs@vm52 bin]$ pwd/usr/hdp/2.6.5.0-292/hbase/bin[hdfs@vm52 bin]$ hbase org.apache.hadoop.hbase.mapreduce.RowCounter 'company_staff'2019-11-22 11:17:18,752 INFO [main] client.RMProxy: Connecting to ResourceManager at vm51/192.168.200.51:80502019-11-22 11:17:18,902 INFO [main] client.AHSProxy: Connecting to Application History server at vm51/192.168.200.51:10200#结果 org.apache.hadoop.hbase.mapreduce.RowCounter$RowCounterMapper$Counters ROWS=143932991 参考：Hbase 统计表行数的3种方式总结 azkaban编译编译官方文档 azkaban编译需要jce]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Other</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux的压缩和解压缩]]></title>
    <url>%2F2019%2F09%2F12%2FLearn%2FLinux%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9%2F</url>
    <content type="text"><![CDATA[文件后缀的含义12345678910*.Z // compress程序压缩产生的文件(现在很少使用) *.gz // gzip程序压缩产生的文件 *.bz2 // bzip2程序压缩产生的文件 *.zip // zip压缩文件 *.rar // rar压缩文件 *.7z // 7-zip压缩文件 *.tar // tar程序打包产生的文件 *.tar.gz // 由tar程序打包并由gzip程序压缩产生的文件 *.tar.bz2 // 由tar程序打包并由bzip2程序压缩产生的文件 压缩命令–gzip，bzip2tar打包命令gzip 或 bzip2 带有多个文件作为参数时，执行的操作是将各个文件独立压缩，而不是将其放在一起进行压缩。这样就无法产生类似于Windows环境下的文件夹打包压缩的效果。(gzip与bzip2也可以使用文件夹作为参数，使用 -f 选项，但也是将其中的每个文件独立压缩)。为了实现打包压缩的效果，可以使用命令 tar 进行文件的打包操作(archive)，再进行压缩。 tar 指令可以将文件打包成文件档案(archive)存储在磁盘/磁带中，打包操作一般伴随压缩操作，也可以使用 tar 指令对打包压缩后的文件解压。 tar 常用命令参数如下： 123456789101112131415161718192021基本格式：tar [Options] file_archive //注意tar的第一参数必须为命令选项，即不能直接接待处理文件 常用命令参数： //指定tar进行的操作，以下三个选项不能出现在同一条命令中 -c //创建一个新的打包文件(archive) -x //对打包文件(archive)进行解压操作 -t //查看打包文件(archive)的内容,主要是构成打包文件(archive)的文件名 //指定支持的压缩/解压方式，操作取决于前面的参数，若为创建(-c),则进行压缩，若为解压(-x),则进行解压，不加下列参数时，则为单纯的打包操作(而不进行压缩)，产生的后缀文件为.tar -z //使用gzip进行压缩/解压，一般使用.tar.gz后缀 -j //使用bzip2进行压缩/解压，一般使用.tar.bz2后缀 //指定tar指令使用的文件，若没有压缩操作，则以.tar作为后缀 -f filename //-f后面接操作使用的文件，用空格隔开，且中间不能有其他参数，推荐放在参数集最后或单独作为参数 //文件作用取决于前面的参数，若为创建(-c),则-f后为创建的文件的名字(路径)，若为(-x/t),则-f后为待解压/查看的打包压缩文件名 //其他辅助选项 -v //详细显示正在处理的文件名 -C Dir //将解压文件放置在 -C 指定的目录下 -p(小写) //保留文件的权限和属性，在备份文件时较有用 -P(大写) //保留原文件的绝对路径，即不会拿掉文件路径开始的根目录，则在还原时会覆盖对应路径上的内容 --exclude=file //排除不进行打包的文件 示例： 123456789101112[root@test opt]# tar -czvf ambaritest.tar.gz ./ambari-web压缩：tar -cvjpf etc.tar.bz2 /etc //-c为创建一个打包文件，相应的-f后面接创建的文件的名称，使用了.tar.bz2后缀，-j标志使用bzip2压缩，最后面为具体的操作对象/etc目录查看：tar -tvjf etc.tar.bz2 //-t为查看操作，则-f对应所查看的文件的名称，文件后缀显示使用bzip2进行压缩，所以加入-j选项，-v会显示详细的权限信息解压tar -xvjf etc.tar.bz2 //-x为解压操作，则-f指定的是解压使用的文件，文件后缀显示使用bzip2进行压缩，所以加入-j选项，即使用bzip2解压 //若只解压指定打包文件中的一个文件，在上述指令的最后加上待解压文件名作为参数即可解压tar -xvf etc.tar -C ~ //将直接打包的.tar文件解压,并放置在用户主目录下 unzipunzip 命令与之前的 tar 指令类似，具有对 zip 文件进行查看、测试和解压的功能 123456789101112131415基本格式：unzip [Options] file[.zip] //不接任何Options时，默认将指定的file文件解压至当前文件夹，可同时接受多个文件参数 常用命令参数： //压缩文件内容查看 -Z //以形如 ls -l 的格式显示目标文件内容，实际原理是命令第一个参数为-Z时，其余参数会被视为 zipinfo 的参数，并产生对应效果 -Z1 //仅显示压缩文件内容的文件名，更多显示可查看 zipinfo 命令的 man 帮助 -l //显示压缩文件中包括时间、占用空间和文件名等信息，内容上较 -Z 更简单 //文件测试 -t //在内存中解压文件并进行文件的完整性校验(CRC校验) //解压缩参数，注意unzip默认即为解压操作 -f //注意与 tar 命令不同，unzip指定 -f 参数时，则将磁盘上已经存在且内容新于对应磁盘文件的压缩内容解压出来 -n //解压缩时不覆盖已存在的文件(而是跳过) -q //安静模式，仅解压缩而不输出详细信息 -d dir //将文件解压至dir指定的文件夹中 可以使用unzip命令对zip文件进行相关的操作。 (1) 查看压缩文件的所有文件名(注意 -Z 选项表示之后所有的参数被视为 zipinfo 的参数并输出相应结果) -&gt; unzip -Z1 file.zip(2) 测试文件的完整性 -&gt; unzip -t file.zip(3) 将文件解压至当前用户的主目录 -&gt; unzip -q file.zip -d ~ 参考Linux下文件的打包、解压缩指令——tar，gzip，bzip2，unzip，rar]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ambari汉化]]></title>
    <url>%2F2019%2F09%2F09%2FBigData%2FAmbari%E6%B1%89%E5%8C%96%2F</url>
    <content type="text"><![CDATA[准备工作确认已经安装的HDP平台的ambari版本 下载对应的源码包 npm依赖包下载 上传解压源码包1234567891011121314#下载安装unzip工具[root@test zip]# yum install --downloadonly --downloaddir=/opt/apps/zip unzip[root@test zip]# yum -y install unzip-6.0-19.el7.x86_64.rpm#上传源码包，解压[root@test opt]# pwd/opt[root@test opt]# ll总用量 140632-rw-r--r--. 1 root root 144004645 9月 6 07:57 ambari-release-2.6.2.zipdrwxr-xr-x. 11 root root 129 9月 6 07:38 apps[root@test opt]# unzip ambari-release-2.6.2.zipArchive: ambari-release-2.6.2.zip631319b00937a8d04667d93714241d2a0cb17275 安装npm依赖包【用于实时编译js】123456[root@test npm]# pwd/opt/apps/npm[root@test npm]# ll总用量 12736-rw-r--r--. 1 root root 13040896 9月 6 07:33 node-v10.16.3-linux-x64.tar.xz[root@test npm]# tar -xvf node-v10.16.3-linux-x64.tar.xz 编辑环境变量 12345[root@test opt]# cat /etc/profileexport JAVA_HOME=/opt/apps/jdk/jdk1.8.0_144export NODE_HOME=/opt/apps/npm/node-v10.16.3-linux-x64export PATH=$PATH:$JAVA_HOME/bin:$NODE_HOME/bin 测试是否安装成功 12345[root@mm01 img]# source /etc/profile[root@mm01 img]# npm -v6.9.0[root@mm01 img]# node -vv10.16.0 到ambari源码包的web目录 12[root@vm01 ambari-web]# pwd/opt/ambari-release-2.6.2/ambari-web 安装brunch使用一台可以联网环境的linux 安装npmboxnpmbox原名叫npmzip，用于压缩npm安装包。npmbox工具会直接在npm服务器上自动查找并下载好我们指定的安装包，并将安装包压缩成一个后缀为.npmbox的压缩文件。 1234567[root@test opt]# npm install npmbox -gnpm ERR! code CERT_NOT_YET_VALIDnpm ERR! errno CERT_NOT_YET_VALIDnpm ERR! request to https://registry.npmjs.org/npmbox failed, reason: certificate is not yet validnpm ERR! A complete log of this run can be found in:npm ERR! /root/.npm/_logs/2019-09-06T01_44_51_956Z-debug.log 提示报错，这是由于时间与本地时间不一致 123#当前时间：2019-9-10 11:59:00[root@test opt]# date2019年 09月 06日 星期五 09:46:11 CST 安装ntpdate服务，设置时间 12345678[root@test opt]# yum -y install ntpdate[root@test opt]# systemctl start ntpdate#若启动失败，查看是否开启了ntp服务，关闭ntp，启动ntpdate即可[root@test opt]# ntpdate 'ntp3.aliyun.com'10 Sep 12:03:18 ntpdate[17115]: adjust time server 203.107.6.88 offset 0.021964 sec[root@test opt]# date2019年 09月 10日 星期二 12:03:21 CST 安装npmbox，并且下载npmbox包 1234567891011121314[root@test npmbox]# npm install npmbox -gnpm WARN deprecated jade@0.26.3: Jade has been renamed to pug, please install the latest version of pug instead of jadenpm WARN deprecated minimatch@0.3.0: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issuenpm WARN deprecated tar.gz@1.0.2: ⚠️ WARNING ⚠️ tar.gz module has been deprecated and your application is vulnerable. Please use tar module instead: https://npmjs.com/tarnpm WARN deprecated to-iso-string@0.0.2: to-iso-string has been deprecated, use @segment/to-iso-string instead.npm WARN deprecated minimatch@3.0.0: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue/opt/apps/npm/node-v10.16.3-linux-x64/bin/npmbox -&gt; /opt/apps/npm/node-v10.16.3-linux-x64/lib/node_modules/npmbox/bin/npmbox/opt/apps/npm/node-v10.16.3-linux-x64/bin/npmunbox -&gt; /opt/apps/npm/node-v10.16.3-linux-x64/lib/node_modules/npmbox/bin/npmunbox+ npmbox@4.2.1added 340 packages from 807 contributors in 108.399s[root@test npmbox]# ll总用量 11012-rw-r--r--. 1 root root 11272311 9月 10 14:12 npmbox.npmbox 下载brunch包 1234[root@test brunch]# npmbox brunch[root@test brunch]# ll总用量 6016-rw-r--r--. 1 root root 6156380 9月 10 14:15 brunch.npmbox 此时，转换到无法联网的正式服务器上，使用npmbox命令解压安装brunch 上传npmbox包和brunch包 123456789101112131415161718192021222324252627282930[root@vm01 npmbox]# pwd/opt/apps/npmbox[root@vm01 npmbox]# lltotal 11012-rw-r--r-- 1 root root 11272311 Sep 10 14:22 npmbox.npmbox#解压[root@vm01 npmbox]# tar --no-same-owner --no-same-permissions -xvzf npmbox.npmbox[root@vm01 npmbox]# ll -atotal 11024drwxr-xr-x 4 root root 70 Sep 10 14:24 .drwxr-xr-x. 16 root root 211 Sep 10 14:20 ..drwxr-xr-x 3 root root 19 Sep 10 14:24 ..npmbox.cachedrwxr-xr-x 253 root root 8192 Sep 10 14:12 .npmbox.cache-rw-r--r-- 1 root root 11272311 Sep 10 14:22 npmbox.npmbox#安装[root@vm01 npmbox]# npm install --global --cache .\.npmbox.cache --cache-min 99999 --shrinkwrap false npmboxnpm ERR! code ENOTFOUNDnpm ERR! errno ENOTFOUNDnpm ERR! network request to https://registry.npmjs.org/npmbox failed, reason: getaddrinfo ENOTFOUND registry.npmjs.org registry.npmjs.org:443npm ERR! network This is a problem related to network connectivity.npm ERR! network In most cases you are behind a proxy or have bad network settings.npm ERR! networknpm ERR! network If you are behind a proxy, please make sure that thenpm ERR! network 'proxy' config is set properly. See: 'npm help config'npm ERR! A complete log of this run can be found in:npm ERR! /opt/apps/npmbox/..npmbox.cache/_logs/2019-09-10T06_29_35_160Z-debug.log 报错 node模块的安装步骤如下：发出npm install命令npm 向 registry 查询模块压缩包的网址下载压缩包，存放在~/.npm目录解压压缩包到当前项目的node_modules目录 所以一个模块安装后，在服务器上实际上是保存了两份，一份在~/.npm，一份在node_modules。但是，运行npm install时，只会检查node_modules目录。所以如果此目录没有文件，npm仍旧会联网进行下载 因此，这里将联网服务器安装模块的node_modules下的所有文件都拷贝到离线服务器的目录中注：这里的npm是tar安装包离线安装不是在线命令安装，所以目录在安装包的解压目录下 123456789101112131415#离线服务器目录before[root@vm01 node_modules]# pwd/opt/node-v10.16.3-linux-x64/lib/node_modules[root@vm01 node_modules]# lltotal 4drwxrwxr-x 10 500 500 4096 Aug 16 02:51 npm#联网服务器目录before[root@test node_modules]# pwd/opt/apps/npm/node-v10.16.3-linux-x64/lib/node_modules[root@test node_modules]# ll总用量 4drwxr-xr-x. 6 root root 226 9月 10 12:47 brunchdrwxrwxr-x. 10 500 500 4096 8月 16 02:51 npmdrwxr-xr-x. 4 root root 246 9月 10 14:09 npmbox 拷贝 12345678910[root@test node_modules]# scp -r brunch/ npmbox/ 192.168.133.3:/opt/node-v10.16.3-linux-x64/lib/node_modules#离线服务器目录after[root@vm01 node_modules]# pwd/opt/node-v10.16.3-linux-x64/lib/node_modules[root@vm01 node_modules]# lltotal 4drwxr-xr-x 6 root root 226 Sep 10 14:38 brunchdrwxrwxr-x 10 500 500 4096 Aug 16 02:51 npmdrwxr-xr-x 4 root root 246 Sep 10 14:38 npmbox 安装npmbox 123456789101112[root@vm01 npmbox]# npm install --global --cache .\.npmbox.cache --optional --cache-min 99999 --shrinkwrap false npmboxnpm ERR! code ENOTFOUNDnpm ERR! errno ENOTFOUNDnpm ERR! network request to https://registry.npmjs.org/npmbox failed, reason: getaddrinfo ENOTFOUND registry.npmjs.org registry.npmjs.org:443npm ERR! network This is a problem related to network connectivity.npm ERR! network In most cases you are behind a proxy or have bad network settings.npm ERR! networknpm ERR! network If you are behind a proxy, please make sure that thenpm ERR! network 'proxy' config is set properly. See: 'npm help config'npm ERR! A complete log of this run can be found in:npm ERR! /opt/apps/npmbox/..npmbox.cache/_logs/2019-09-10T06_59_41_645Z-debug.log 仍然报错 突然意识到在联网服务器上，只是使用npmbox下载包，并没有安装。所以使用npm命令安装之后，将node_models下的文件拷贝但仍然报错失败 后面又意识到，我只是需要一个汉化文件，用来做软连接，只是这个汉化文件需要使用brunch工具，所以决定在联网机器上先编译好文件，然后再复制过去 联网机器上的编译步骤： 下载源码包文件，对里面内容进行更改（汉化，logo，字体等） 打包上传到联网服务器上，解压 进入解压的文件夹的ambari-web下，安装npmnpm install npm安装过程十分缓慢，可以在打包时将node_model文件夹复制到ambari-web中，后续就不用使用npm install，可以直接brunch，前提是机器上已经安装过npm和brunch 安装brunch，npm -g install brunch 使用brunch build命令进行编译 将编译好的整个文件夹拷贝到离线服务器上，建立ambari中的web文件夹的软连接 重启ambari-server 使用brunch编译使用的是联网的服务器 1234567891011121314151617181920212223242526[root@test ambari-web]# pwd/opt/ambari-release-2.6.2/ambari-web[root@test ambari-web]# ll总用量 216drwxr-xr-x. 13 root root 4096 4月 27 2018 app-rw-r--r--. 1 root root 4142 4月 27 2018 config.coffee-rw-r--r--. 1 root root 1662 4月 27 2018 copy-pluggable-stack-resources.sh-rw-r--r--. 1 root root 862 4月 27 2018 gzip-content.cmd-rw-r--r--. 1 root root 2349 4月 27 2018 gzip-content.ps1-rw-r--r--. 1 root root 5437 4月 27 2018 karma.conf.jsdrwxr-xr-x. 387 root root 12288 9月 10 12:35 node_modules-rw-r--r--. 1 root root 1326 4月 27 2018 package.json-rw-r--r--. 1 root root 14106 4月 27 2018 pom.xmldrwxr-xr-x. 9 root root 125 9月 10 12:47 public-rw-r--r--. 1 root root 868 4月 27 2018 set-ambari-version.cmd-rw-r--r--. 1 root root 1144 4月 27 2018 set-ambari-version.ps1-rw-r--r--. 1 root root 1042 4月 27 2018 set-ambari-version.sh-rw-r--r--. 1 root root 875 4月 27 2018 set-default-stack-version.cmd-rw-r--r--. 1 root root 1800 4月 27 2018 set-default-stack-version.ps1-rw-r--r--. 1 root root 1369 4月 27 2018 set-default-stack-version.shdrwxr-xr-x. 12 root root 4096 4月 27 2018 test-rw-r--r--. 1 root root 869 4月 27 2018 toggle-experimental.cmd-rw-r--r--. 1 root root 1138 4月 27 2018 toggle-experimental.ps1-rw-r--r--. 1 root root 1056 4月 27 2018 toggle-experimental.shdrwxr-xr-x. 4 root root 35 4月 27 2018 vendor-rw-r--r--. 1 root root 107873 4月 27 2018 yarn.lock 上传下载的汉化包，解压获取messages.js文件下载地址 123456789101112131415161718192021222324252627[root@test app]# pwd/opt/Ambari-Web-Modify-master/ambari-web/app[root@test app]# ll总用量 332-rw-r--r--. 1 root root 13923 8月 12 2016 app.jsdrwxr-xr-x. 7 root root 87 8月 12 2016 assets-rw-r--r--. 1 root root 3928 8月 12 2016 config.jsdrwxr-xr-x. 5 root root 170 8月 12 2016 controllers-rw-r--r--. 1 root root 9508 8月 12 2016 controllers.jsdrwxr-xr-x. 7 root root 234 8月 12 2016 data-rw-r--r--. 1 root root 829 8月 12 2016 ember.js-rw-r--r--. 1 root root 1900 8月 12 2016 initialize.jsdrwxr-xr-x. 3 root root 4096 8月 12 2016 mappers-rw-r--r--. 1 root root 1960 8月 12 2016 mappers.js-rw-r--r--. 1 root root 223487 8月 12 2016 messages.jsdrwxr-xr-x. 7 root root 81 8月 12 2016 mixins-rw-r--r--. 1 root root 2713 8月 12 2016 mixins.jsdrwxr-xr-x. 6 root root 4096 8月 12 2016 models-rw-r--r--. 1 root root 3013 8月 12 2016 models.js-rw-r--r--. 1 root root 18585 8月 12 2016 router.jsdrwxr-xr-x. 2 root root 4096 8月 12 2016 routesdrwxr-xr-x. 2 root root 211 8月 12 2016 stylesdrwxr-xr-x. 6 root root 160 8月 12 2016 templates-rw-r--r--. 1 root root 1227 8月 12 2016 templates.jsdrwxr-xr-x. 5 root root 4096 8月 12 2016 utilsdrwxr-xr-x. 5 root root 160 8月 12 2016 views-rw-r--r--. 1 root root 17744 8月 12 2016 views.js 备份源码包里面的messages.js，并将汉化包中的messages.js复制到源码包中 123[root@test app]# mv messages.js messages.js_bak[root@test app]# pwd/opt/ambari-release-2.6.2/ambari-web/app 1234567891011121314151617181920212223242526272829303132[root@test app]# pwd/opt/Ambari-Web-Modify-master/ambari-web/app[root@test app]# cp messages.js /opt/ambari-release-2.6.2/ambari-web/app#查看源码包[root@test app]# ll总用量 604-rw-r--r--. 1 root root 14809 4月 27 2018 app.jsdrwxr-xr-x. 7 root root 87 4月 27 2018 assets-rw-r--r--. 1 root root 4505 4月 27 2018 config.jsdrwxr-xr-x. 5 root root 170 4月 27 2018 controllers-rw-r--r--. 1 root root 10117 4月 27 2018 controllers.jsdrwxr-xr-x. 7 root root 234 4月 27 2018 data-rw-r--r--. 1 root root 829 4月 27 2018 ember.js-rw-r--r--. 1 root root 1859 4月 27 2018 initialize.jsdrwxr-xr-x. 3 root root 4096 4月 27 2018 mappers-rw-r--r--. 1 root root 2004 4月 27 2018 mappers.js-rw-r--r--. 1 root root 223487 9月 10 17:09 messages.js-rw-r--r--. 1 root root 256344 4月 27 2018 messages.js_bakdrwxr-xr-x. 7 root root 81 4月 27 2018 mixins-rw-r--r--. 1 root root 3353 4月 27 2018 mixins.jsdrwxr-xr-x. 7 root root 4096 4月 27 2018 models-rw-r--r--. 1 root root 3244 4月 27 2018 models.js-rw-r--r--. 1 root root 29313 4月 27 2018 router.jsdrwxr-xr-x. 2 root root 4096 4月 27 2018 routesdrwxr-xr-x. 2 root root 239 4月 27 2018 stylesdrwxr-xr-x. 6 root root 160 4月 27 2018 templates-rw-r--r--. 1 root root 1283 4月 27 2018 templates.jsdrwxr-xr-x. 6 root root 4096 4月 27 2018 utils-rw-r--r--. 1 root root 1477 4月 27 2018 utils.jsdrwxr-xr-x. 5 root root 160 4月 27 2018 views-rw-r--r--. 1 root root 20029 4月 27 2018 views.js 编译 1234[root@test ambari-web]# pwd/opt/ambari-release-2.6.2/ambari-web[root@test ambari-web]# brunch build10 Sep 17:10:22 - info: compiled 1265 files into 5 files, copied 318 in 6073ms 将编译好的web文件夹整个拷贝到离线服务器中，并建立软连接替代原本的ambari的web文件夹 12345678910111213141516171819202122232425#ambari服务自带的web目录[root@vm01 web]# pwd/lib/ambari-server/web[root@vm01 web]# lltotal 12drwxr-xr-x 23 root root 4096 Aug 19 10:38 datadrwxr-xr-x 2 root root 131 Aug 19 10:38 fontdrwxr-xr-x 3 root root 4096 Aug 19 10:38 img-rw-r--r-- 1 root root 2012 May 30 2018 index.htmldrwxr-xr-x 2 root root 37 Aug 19 10:38 javascriptsdrwxr-xr-x 2 root root 24 Aug 19 10:38 licensesdrwxr-xr-x 2 root root 39 Aug 19 10:38 stylesheetsdrwxr-xr-x 3 root root 80 Aug 19 10:38 test[root@vm01 web]# cd ..[root@vm01 ambari-server]# mv web/ web_bak#建立软连接[root@vm01 ambari-server]# ln -s /opt/ambari-web/public web-rw-r--r-- 1 root root 63777 May 30 2018 validation-api-1.1.0.Final.jar-rw-r--r-- 1 root root 449505 May 30 2018 velocity-1.7.jarlrwxrwxrwx 1 root root 22 Sep 10 17:16 web -&gt; /opt/ambari-web/publicdrwxr-xr-x 9 root root 125 Aug 19 10:38 web_bak-rw-r--r-- 1 root root 15010 May 30 2018 xmlenc-0.52.jar-rw-r--r-- 1 root root 94816 May 30 2018 xz-1.2.jar 重启ambari-server服务。完成 图标ambari-web/app/assets/img/logo.pngambari-web/app/assets/img/logo-white.png 此路径下的logo.png文件为页面浏览器标题上的图标文件logo-white.png为大数据集成平台的图标文件 设置app/assets/img下的路径是原始包，更改里面的图标。后面进行编译，自动在public中有此更改的图标 也可设置public中的img图片，不过重新编译之后会丢失。可用于测试 记录 更改logo，logo_white图片 将hdp字符取消 修改了字体为显示中文 参考基于已部署的Ambari 2.6.2 集群 对Ambari-web 前端源码二次开发实时编译Ambari安装和汉化（转）Ambari2.0.0汉化npm 模块安装机制简介npm离线安装包]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
        <tag>Ambari</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysql的主从复制和读写分离]]></title>
    <url>%2F2019%2F09%2F05%2FLearn%2Fmysql%E7%9A%84%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%92%8C%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%2F</url>
    <content type="text"><![CDATA[主从复制以及主从复制的作用在实际的生产环境中，对数据库的读和写都在一个数据库服务器中，是不能满足生产需要的。一般通过主从复制的方式来同步数据，再设置读写分离以提高数据库服务器的并发负载能力 具体设置安装mysql节点 123vm02vm03vm04 vm02vm02已经安装mysql，密码为Mysql@123456修改mysql密码为 !QAZ2wsx3edc 1set password for root@localhost = password('!QAZ2wsx3edc'); vm03,vm04安装mysql 123456789101112131415[root@vm03 ~]# yum -y install mysql-community-server-5.7.27-1.el7.x86_64 --nogpgcheck[root@vm03 ~]# systemctl start mysqld[root@vm03 ~]# systemctl enable mysqld[root@vm03 ~]# systemctl status mysqld● mysqld.service - MySQL Server Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled) Active: active (running) since Thu 2019-09-05 14:46:14 CST; 11s ago Docs: man:mysqld(8) http://dev.mysql.com/doc/refman/en/using-systemd.html Main PID: 80936 (mysqld) CGroup: /system.slice/mysqld.service └─80936 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pidSep 05 14:46:10 vm03 systemd[1]: Starting MySQL Server...Sep 05 14:46:14 vm03 systemd[1]: Started MySQL Server. 修改密码，设置远程登录 1234567891011121314#获取临时密码[root@vm03 ~]# grep 'temporary password' /var/log/mysqld.log2019-09-05T06:46:11.198794Z 1 [Note] A temporary password is generated for root@localhost: k=euwnEoC7,u#登录之后修改密码mysql&gt; alter user 'root'@'localhost' identified by '!QAZ2wsx3edc';Query OK, 0 rows affected (0.01 sec)#设置远程登录mysql&gt; grant all privileges on *.* to 'root'@'%' identified by '!QAZ2wsx3edc';Query OK, 0 rows affected, 1 warning (0.01 sec)mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) 设置主从复制主节点修改/etc/my.cnf文件 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647[root@vm02 ~]# cat /etc/my.cnf# For advice on how to change settings please see# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html[mysqld]## Remove leading # and set to the amount of RAM for the most important data# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.# innodb_buffer_pool_size = 128M## Remove leading # to turn on a very important data integrity option: logging# changes to the binary log between backups.# log_bin## Remove leading # to set options mainly useful for reporting servers.# The server defaults are faster for transactions and fast SELECTs.# Adjust sizes as needed, experiment to find the optimal values.# join_buffer_size = 128M# sort_buffer_size = 2M# read_rnd_buffer_size = 2Mdatadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.sock# Disabling symbolic-links is recommended to prevent assorted security riskssymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidserver-id= 11# mysql数据的唯一标示（不能重复）log-slave-updates=true# 允许连级复制(增加)log-bin=master-bin#二进制文件名（修改）#需要备份的数据库binlog_do_db=test#备注：#server-id 服务器唯一标识。#log_bin 启动MySQL二进制日志，即数据同步语句，从数据库会一条一条的执行这些语句。#binlog_do_db 指定记录二进制日志的数据库，即需要复制的数据库名，如果复制多个数据库，重复设置这个选项即可。#binlog_ignore_db 指定不记录二进制日志的数据库，即不需要复制的数据库名，如果有多个数据库，重复设置这个选项即可。#其中需要注意的是，binlog_do_db和binlog_ignore_db为互斥选项，一般只需要一个即可。 设置从服务器的权限 12345678mysql&gt; grant replication slave on *.* to masterbackup@'172.18.4.13' identified by '!QAZ2wsx3edc';Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; grant replication slave on *.* to masterbackup@'172.18.4.14' identified by '!QAZ2wsx3edc';Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) 重启 12[root@vm02 ~]# systemctl restart mysqld[root@vm02 ~]# systemctl status mysqld 登录mysql 1234567891011#创建test数据库mysql&gt; create database test;Query OK, 1 row affected (0.01 sec)mysql&gt; show master status;+-------------------+----------+--------------+------------------+-------------------+| File | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |+-------------------+----------+--------------+------------------+-------------------+| master-bin.000004 | 154 | test | | |+-------------------+----------+--------------+------------------+-------------------+1 row in set (0.00 sec) 从节点修改/etc/my.cnf文件 123456789101112131415161718192021222324252627282930313233343536373839404142[root@vm03 ~]# cat /etc/my.cnf# For advice on how to change settings please see# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html[mysqld]## Remove leading # and set to the amount of RAM for the most important data# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.# innodb_buffer_pool_size = 128M## Remove leading # to turn on a very important data integrity option: logging# changes to the binary log between backups.# log_bin## Remove leading # to set options mainly useful for reporting servers.# The server defaults are faster for transactions and fast SELECTs.# Adjust sizes as needed, experiment to find the optimal values.# join_buffer_size = 128M# sort_buffer_size = 2M# read_rnd_buffer_size = 2Mdatadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.sock# Disabling symbolic-links is recommended to prevent assorted security riskssymbolic-links=0log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pidserver-id=2log-bin=mysql-binrelay-log=slave-relay-binrelay-log-index=slave-relay-bin.index#replicate-do-db=test#备注：#server-id 服务器唯一标识，如果有多个从服务器，每个服务器的server-id不能重复，跟IP一样是唯一标识，如果你没设置server-id或者设置为0，则从服务器不会连接到主服务器。#relay-log 启动MySQL二进制日志，可以用来做数据备份和崩溃恢复，或主服务器挂掉了，将此从服务器作为其他从服务器的主服务器。#replicate-do-db 指定同步的数据库，如果复制多个数据库，重复设置这个选项即可。若在master端不指定binlog-do-db，则在slave端可用replication-do-db来过滤。#replicate-ignore-db 不需要同步的数据库，如果有多个数据库，重复设置这个选项即可。#其中需要注意的是，replicate-do-db和replicate-ignore-db为互斥选项，一般只需要一个即可。 重启mysql 1[root@vm03 ~]# systemctl restart mysqld 连接master主服务器 12345678910#登录进mysql之后#连接master主服务器mysql&gt; change master to master_host='172.18.4.12',master_port=3306,master_user='masterbackup',master_password='!QAZ2wsx3edc',master_log_file='master-bin.000004',master_log_pos=154;Query OK, 0 rows affected, 2 warnings (0.01 sec)#备注：#master_host对应主服务器的IP地址。#master_port对应主服务器的端口。#master_log_file对应show master status显示的File列：master-bin.000001。#master_log_pos对应show master status显示的Position列：154。 启动slave数据同步 123456#启动mysql&gt; start slave;Query OK, 0 rows affected (0.00 sec)#停止mysql&gt; stop slave; 查看slave状态 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263mysql&gt; show slave status\G;*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 172.18.4.12 Master_User: masterbackup Master_Port: 3306 Connect_Retry: 60 Master_Log_File: master-bin.000004 Read_Master_Log_Pos: 154 Relay_Log_File: slave-relay-bin.000002 Relay_Log_Pos: 321 Relay_Master_Log_File: master-bin.000004 Slave_IO_Running: Yes Slave_SQL_Running: Yes Replicate_Do_DB: Replicate_Ignore_DB: Replicate_Do_Table: Replicate_Ignore_Table: Replicate_Wild_Do_Table: Replicate_Wild_Ignore_Table: Last_Errno: 0 Last_Error: Skip_Counter: 0 Exec_Master_Log_Pos: 154 Relay_Log_Space: 528 Until_Condition: None Until_Log_File: Until_Log_Pos: 0 Master_SSL_Allowed: No Master_SSL_CA_File: Master_SSL_CA_Path: Master_SSL_Cert: Master_SSL_Cipher: Master_SSL_Key: Seconds_Behind_Master: 0Master_SSL_Verify_Server_Cert: No Last_IO_Errno: 0 Last_IO_Error: Last_SQL_Errno: 0 Last_SQL_Error: Replicate_Ignore_Server_Ids: Master_Server_Id: 1 Master_UUID: b84fb42f-c004-11e9-9449-005056be31d6 Master_Info_File: /var/lib/mysql/master.info SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Slave has read all relay log; waiting for more updates Master_Retry_Count: 86400 Master_Bind: Last_IO_Error_Timestamp: Last_SQL_Error_Timestamp: Master_SSL_Crl: Master_SSL_Crlpath: Retrieved_Gtid_Set: Executed_Gtid_Set: Auto_Position: 0 Replicate_Rewrite_DB: Channel_Name: Master_TLS_Version:1 row in set (0.00 sec)ERROR:No query specified Slave_IO_Running和Slave_SQL_Running都为yes，则表示同步成功. 测试主服务器建表添加数据 123456789101112131415161718192021mysql&gt; create table tb_test(id int,name varchar(20),age int);Query OK, 0 rows affected (0.01 sec)mysql&gt; insert into tb_test values (19,'aa',40);Query OK, 1 row affected (0.01 sec)mysql&gt; show tables;+----------------+| Tables_in_test |+----------------+| tb_test |+----------------+1 row in set (0.00 sec)mysql&gt; select * from tb_test;+------+------+------+| id | name | age |+------+------+------+| 19 | aa | 40 |+------+------+------+1 row in set (0.00 sec) 查看从服务器 12345678910mysql&gt; show databases;+--------------------+| Database |+--------------------+| information_schema || mysql || performance_schema || sys |+--------------------+4 rows in set (0.00 sec) 再看slave的状态 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263mysql&gt; show slave status\G;*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 172.18.4.12 Master_User: masterbackup Master_Port: 3306 Connect_Retry: 60 Master_Log_File: master-bin.000004 Read_Master_Log_Pos: 615 Relay_Log_File: slave-relay-bin.000002 Relay_Log_Pos: 321 Relay_Master_Log_File: master-bin.000004 Slave_IO_Running: Yes Slave_SQL_Running: No Replicate_Do_DB: Replicate_Ignore_DB: Replicate_Do_Table: Replicate_Ignore_Table: Replicate_Wild_Do_Table: Replicate_Wild_Ignore_Table: Last_Errno: 1049 Last_Error: Error 'Unknown database 'test'' on query. Default database: 'test'. Query: 'create table tb_test(id int,name varchar(20),age int)' Skip_Counter: 0 Exec_Master_Log_Pos: 154 Relay_Log_Space: 1540 Until_Condition: None Until_Log_File: Until_Log_Pos: 0 Master_SSL_Allowed: No Master_SSL_CA_File: Master_SSL_CA_Path: Master_SSL_Cert: Master_SSL_Cipher: Master_SSL_Key: Seconds_Behind_Master: NULLMaster_SSL_Verify_Server_Cert: No Last_IO_Errno: 0 Last_IO_Error: Last_SQL_Errno: 1049 Last_SQL_Error: Error 'Unknown database 'test'' on query. Default database: 'test'. Query: 'create table tb_test(id int,name varchar(20),age int)' Replicate_Ignore_Server_Ids: Master_Server_Id: 1 Master_UUID: b84fb42f-c004-11e9-9449-005056be31d6 Master_Info_File: /var/lib/mysql/master.info SQL_Delay: 0 SQL_Remaining_Delay: NULL Slave_SQL_Running_State: Master_Retry_Count: 86400 Master_Bind: Last_IO_Error_Timestamp: Last_SQL_Error_Timestamp: 190905 15:42:00 Master_SSL_Crl: Master_SSL_Crlpath: Retrieved_Gtid_Set: Executed_Gtid_Set: Auto_Position: 0 Replicate_Rewrite_DB: Channel_Name: Master_TLS_Version:1 row in set (0.00 sec)ERROR:No query specified 主mysql创建了test数据库，同步的是test数据库。所以要求从数据库也自己创建test数据库。创建数据库之后，同步不成功，需要重启mysql服务 重启之后查看同步情况,成功同步 1234567891011121314151617181920mysql&gt; use test;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+----------------+| Tables_in_test |+----------------+| tb_test |+----------------+1 row in set (0.00 sec)mysql&gt; select * from tb_test;+------+------+------+| id | name | age |+------+------+------+| 19 | aa | 40 |+------+------+------+1 row in set (0.00 sec) vm04节点做相同配置，修改server-id即可 Atlas实现mysql的读写分离安装atlas 123456[root@vm02 atlas]# lltotal 4848-rw-r--r--. 1 root root 4963681 Sep 5 16:38 Atlas-2.2.1.el6.x86_64.rpm[root@vm02 atlas]# pwd/opt/apps/atlas[root@vm02 atlas]# rpm -ivh Atlas-2.2.1.el6.x86_64.rpm 默认安装位置为/usr/local/mysql-proxy/ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273[root@vm02 atlas]# cd /usr/local/mysql-proxy/[root@vm02 mysql-proxy]# lltotal 4drwxr-xr-x. 2 root root 75 Sep 5 16:38 bindrwxr-xr-x. 2 root root 42 Sep 5 17:00 confdrwxr-xr-x. 3 root root 4096 Sep 5 16:38 libdrwxr-xr-x. 2 root root 6 Dec 17 2014 log[root@vm02 mysql-proxy]# cd conf/[root@vm02 conf]# lltotal 8-rw-r--r--. 1 root root 2860 Sep 5 17:00 test.cnf-rw-r--r--. 1 root root 2810 Dec 17 2014 test.cnf_bak[root@vm02 conf]# vi test.cnf[mysql-proxy]#带#号的为非必需的配置项目#管理接口的用户名admin-username = masterbackup#管理接口的密码admin-password = !QAZ2wsx3edc#Atlas后端连接的MySQL主库的IP和端口，可设置多项，用逗号分隔proxy-backend-addresses = 172.18.4.12:3306#Atlas后端连接的MySQL从库的IP和端口，@后面的数字代表权重，用来作负载均衡，若省略则默认为1，可设置多项，用逗号分隔proxy-read-only-backend-addresses = 172.18.4.13:3306@1,172.18.4.14:3306@1#用户名与其对应的加密过的MySQL密码，密码使用PREFIX/bin目录下的加密程序encrypt加密，下行的user1和user2为示例，将其替换为你的MySQL的用户名和加密密码！pwds = masterbackup:+jKsgB3YAG8=, masterbackup:GS+tr4TPgqc=#设置Atlas的运行方式，设为true时为守护进程方式，设为false时为前台方式，一般开发调试时设为false，线上运行时设为true,true后面不能有空格。daemon = true#设置Atlas的运行方式，设为true时Atlas会启动两个进程，一个为monitor，一个为worker，monitor在worker意外退出后会自动将其重启，设为false时只有worker，没有monitor，一般开发调试时设为false，线上运行时设为true,true后面不能有空格。keepalive = true#工作线程数，对Atlas的性能有很大影响，可根据情况适当设置event-threads = 8#日志级别，分为message、warning、critical、error、debug五个级别log-level = message#日志存放的路径log-path = /usr/local/mysql-proxy/log#SQL日志的开关，可设置为OFF、ON、REALTIME，OFF代表不记录SQL日志，ON代表记录SQL日志，REALTIME代表记录SQL日志且实时写入磁盘，默认为OFFsql-log = OFF#慢日志输出设置。当设置了该参数时，则日志只输出执行时间超过sql-log-slow（单位：ms)的日志记录。不设置该参数则输出全部日志。sql-log-slow = 10#实例名称，用于同一台机器上多个Atlas实例间的区分#instance = test#Atlas监听的工作接口IP和端口proxy-address = 0.0.0.0:1234#Atlas监听的管理接口IP和端口admin-address = 0.0.0.0:2345#分表设置，此例中person为库名，mt为表名，id为分表字段，3为子表数量，可设置多项，以逗号分隔，若不分表则不需要设置该项#tables = person.mt.id.3#默认字符集，设置该项后客户端不再需要执行SET NAMES语句charset = utf8#允许连接Atlas的客户端的IP，可以是精确IP，也可以是IP段，以逗号分隔，若不设置该项则允许所有IP连接，否则只允许列表中的IP连接#client-ips = 127.0.0.1, 192.168.1#Atlas前面挂接的LVS的物理网卡的IP(注意不是虚IP)，若有LVS且设置了client-ips则此项必须设置，否则可以不设置#lvs-ips = 192.168.1.1 启动和关闭atlas 123456#启动[root@vm02 bin]# ./mysql-proxyd test startOK: MySQL-Proxy of test is started#关闭[root@vm02 bin]# ./mysql-proxyd test stop 启动服务之后，查看读写分离状态 1234567891011121314151617181920212223242526272829303132333435363738[root@vm02 bin]# mysql -h127.0.0.1 -P2345 -umasterbackup -pEnter password:mysql&gt; SELECT * FROM help;+----------------------------+---------------------------------------------------------+| command | description |+----------------------------+---------------------------------------------------------+| SELECT * FROM help | shows this help || SELECT * FROM backends | lists the backends and their state || SET OFFLINE $backend_id | offline backend server, $backend_id is backend_ndx's id || SET ONLINE $backend_id | online backend server, ... || ADD MASTER $backend | example: "add master 127.0.0.1:3306", ... || ADD SLAVE $backend | example: "add slave 127.0.0.1:3306", ... || REMOVE BACKEND $backend_id | example: "remove backend 1", ... || SELECT * FROM clients | lists the clients || ADD CLIENT $client | example: "add client 192.168.1.2", ... || REMOVE CLIENT $client | example: "remove client 192.168.1.2", ... || SELECT * FROM pwds | lists the pwds || ADD PWD $pwd | example: "add pwd user:raw_password", ... || ADD ENPWD $pwd | example: "add enpwd user:encrypted_password", ... || REMOVE PWD $pwd | example: "remove pwd user", ... || SAVE CONFIG | save the backends to config file || SELECT VERSION | display the version of Atlas |+----------------------------+---------------------------------------------------------+16 rows in set (0.00 sec)mysql&gt; SELECT * FROM backends;+-------------+------------------+-------+------+| backend_ndx | address | state | type |+-------------+------------------+-------+------+| 1 | 172.18.4.12:3306 | up | rw || 2 | 172.18.4.13:3306 | up | ro || 3 | 172.18.4.14:3306 | up | ro |+-------------+------------------+-------+------+3 rows in set (0.01 sec)#up表示连接成功#rw代表写#ro代表读 参考mysql数据库的主从同步，实现读写分离mysql主从复制与读写分离基于Atlas实现mysql读写分离（1）–主从同步Atlas安装配置Mysql 实现读写分离-Atlas中间件]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kibana的安装使用]]></title>
    <url>%2F2019%2F09%2F04%2FLearn%2Fkibana%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[kibana是什么 kibana的安装上传解压 12345678910111213[root@test ELK]# ll总用量 678400drwxr-xr-x. 11 es es 182 9月 4 00:31 elasticsearch-7.3.1-rw-r--r--. 1 root root 285082863 9月 3 18:57 elasticsearch-7.3.1-linux-x86_64.tar.gzdrwxr-xr-x. 14 root root 271 9月 4 01:03 kibana-7.3.1-linux-x86_64-rw-r--r--. 1 root root 236770201 9月 3 20:30 kibana-7.3.1-linux-x86_64.tar.gzdrwxr-xr-x. 14 root root 281 9月 4 00:13 logstash-7.3.1-rw-r--r--. 1 root root 171784034 9月 3 20:30 logstash-7.3.1.tar.gzdrwxr-xr-x. 9 1001 1001 186 9月 3 23:08 nginx-1.17.3-rw-r--r--. 1 root root 1034586 9月 3 22:50 nginx-1.17.3.tar.gz[root@test ELK]# pwd/opt/apps/ELK[root@test ELK]# tar -zxvf kibana-7.3.1-linux-x86_64.tar.gz 修改配置文件 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118[root@test config]# pwd/opt/apps/ELK/kibana-7.3.1-linux-x86_64/config[root@test config]# vi kibana.yml[root@test config]# cat kibana.yml# Kibana is served by a back end server. This setting specifies the port to use.server.port: 5601# Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.# The default is 'localhost', which usually means remote machines will not be able to connect.# To allow connections from remote users, set this parameter to a non-loopback address.server.host: "192.168.133.11"# Enables you to specify a path to mount Kibana at if you are running behind a proxy.# Use the `server.rewriteBasePath` setting to tell Kibana if it should remove the basePath# from requests it receives, and to prevent a deprecation warning at startup.# This setting cannot end in a slash.#server.basePath: ""# Specifies whether Kibana should rewrite requests that are prefixed with# `server.basePath` or require that they are rewritten by your reverse proxy.# This setting was effectively always `false` before Kibana 6.3 and will# default to `true` starting in Kibana 7.0.#server.rewriteBasePath: false# The maximum payload size in bytes for incoming server requests.#server.maxPayloadBytes: 1048576# The Kibana server's name. This is used for display purposes.#server.name: "your-hostname"# The URLs of the Elasticsearch instances to use for all your queries.elasticsearch.hosts: ["http://192.168.133.11:9200"]# When this setting's value is true Kibana uses the hostname specified in the server.host# setting. When the value of this setting is false, Kibana uses the hostname of the host# that connects to this Kibana instance.#elasticsearch.preserveHost: true# Kibana uses an index in Elasticsearch to store saved searches, visualizations and# dashboards. Kibana creates a new index if the index doesn't already exist.kibana.index: ".kibana"# The default application to load.#kibana.defaultAppId: "home"# If your Elasticsearch is protected with basic authentication, these settings provide# the username and password that the Kibana server uses to perform maintenance on the Kibana# index at startup. Your Kibana users still need to authenticate with Elasticsearch, which# is proxied through the Kibana server.#elasticsearch.username: "kibana"#elasticsearch.password: "pass"# Enables SSL and paths to the PEM-format SSL certificate and SSL key files, respectively.# These settings enable SSL for outgoing requests from the Kibana server to the browser.#server.ssl.enabled: false#server.ssl.certificate: /path/to/your/server.crt#server.ssl.key: /path/to/your/server.key# Optional settings that provide the paths to the PEM-format SSL certificate and key files.# These files validate that your Elasticsearch backend uses the same key files.#elasticsearch.ssl.certificate: /path/to/your/client.crt#elasticsearch.ssl.key: /path/to/your/client.key# Optional setting that enables you to specify a path to the PEM file for the certificate# authority for your Elasticsearch instance.#elasticsearch.ssl.certificateAuthorities: [ "/path/to/your/CA.pem" ]# To disregard the validity of SSL certificates, change this setting's value to 'none'.#elasticsearch.ssl.verificationMode: full# Time in milliseconds to wait for Elasticsearch to respond to pings. Defaults to the value of# the elasticsearch.requestTimeout setting.#elasticsearch.pingTimeout: 1500# Time in milliseconds to wait for responses from the back end or Elasticsearch. This value# must be a positive integer.#elasticsearch.requestTimeout: 30000# List of Kibana client-side headers to send to Elasticsearch. To send *no* client-side# headers, set this value to [] (an empty list).#elasticsearch.requestHeadersWhitelist: [ authorization ]# Header names and values that are sent to Elasticsearch. Any custom headers cannot be overwritten# by client-side headers, regardless of the elasticsearch.requestHeadersWhitelist configuration.#elasticsearch.customHeaders: &#123;&#125;# Time in milliseconds for Elasticsearch to wait for responses from shards. Set to 0 to disable.#elasticsearch.shardTimeout: 30000# Time in milliseconds to wait for Elasticsearch at Kibana startup before retrying.#elasticsearch.startupTimeout: 5000# Logs queries sent to Elasticsearch. Requires logging.verbose set to true.#elasticsearch.logQueries: false# Specifies the path where Kibana creates the process ID file.#pid.file: /var/run/kibana.pid# Enables you specify a file where Kibana stores log output.#logging.dest: stdout# Set the value of this setting to true to suppress all logging output.#logging.silent: false# Set the value of this setting to true to suppress all logging output other than error messages.#logging.quiet: false# Set the value of this setting to true to log all events, including system usage information# and all requests.#logging.verbose: false# Set the interval in milliseconds to sample system and process performance# metrics. Minimum is 100ms. Defaults to 5000.#ops.interval: 5000# Specifies locale to be used for all localizable strings, dates and number formats.# Supported languages are the following: English - en , by default , Chinese - zh-CN .#i18n.locale: "en" 将文件夹的组改为es用户 123[root@test config]# chown -R es:es /opt/apps/ELK/kibana-7.3.1-linux-x86_64[root@test config]# su es[es@test config]$ cd /opt/apps/ELK/kibana-7.3.1-linux-x86_64/bin/ 设置kiban为中文 1234567891011[es@test config]$ pwd/opt/apps/ELK/kibana-7.3.1-linux-x86_64/config[es@test config]$ vi kibana.yml#在配置文件的最后#ops.interval: 5000# Specifies locale to be used for all localizable strings, dates and number formats.# Supported languages are the following: English - en , by default , Chinese - zh-CN .#i18n.locale: "en"i18n.locale: "zh-CN" 启动，并访问页面 1234567[es@test config]$ cd ../bin/[es@test bin]$ ll总用量 12-rwxr-xr-x. 1 es es 639 8月 20 04:49 kibana-rwxr-xr-x. 1 es es 566 8月 20 04:49 kibana-keystore-rwxr-xr-x. 1 es es 617 8月 20 04:49 kibana-plugin[es@test bin]$ ./kibana 在安装好es，logstach，kibana，Nginx之后，可以通过刷新Nginx更新日志，logstach抽取日志到es，kibana又进行展示 参考企业级实战ELK之kibana-7.2.0版本安装实战]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Kibana</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[elasticsearch的安装使用]]></title>
    <url>%2F2019%2F09%2F04%2FLearn%2Felasticsearch%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[elasticearch是什么 elasticsearch的安装上传解压,修改参数 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293[root@test ELK]# tar -zxvf elasticsearch-7.3.1-linux-x86_64.tar.gz[root@test config]# pwd/opt/apps/ELK/elasticsearch-7.3.1/config[root@test config]# vi elasticsearch.yml[root@test config]# cat elasticsearch.yml# ======================== Elasticsearch Configuration =========================## NOTE: Elasticsearch comes with reasonable defaults for most settings.# Before you set out to tweak and tune the configuration, make sure you# understand what are you trying to accomplish and the consequences.## The primary way of configuring a node is via this file. This template lists# the most important settings you may want to configure for a production cluster.## Please consult the documentation for further information on configuration options:# https://www.elastic.co/guide/en/elasticsearch/reference/index.html## ---------------------------------- Cluster -----------------------------------## Use a descriptive name for your cluster:#cluster.name: my-es## ------------------------------------ Node ------------------------------------## Use a descriptive name for the node:#node.name: es-1## Add custom attributes to the node:##node.attr.rack: r1## ----------------------------------- Paths ------------------------------------## Path to directory where to store the data (separate multiple locations by comma):#path.data: /opt/apps/ELK/elasticsearch-7.3.1/ESdate## Path to log files:#path.logs: /opt/apps/ELK/elasticsearch-7.3.1/ESlogs## ----------------------------------- Memory -----------------------------------## Lock the memory on startup:##bootstrap.memory_lock: true## Make sure that the heap size is set to about half the memory available# on the system and that the owner of the process is allowed to use this# limit.## Elasticsearch performs poorly when the system is swapping the memory.## ---------------------------------- Network -----------------------------------## Set the bind address to a specific IP (IPv4 or IPv6):#network.host: 192.168.133.11## Set a custom port for HTTP:#http.port: 9200## For more information, consult the network module documentation.## --------------------------------- Discovery ----------------------------------## Pass an initial list of hosts to perform discovery when this node is started:# The default list of hosts is ["127.0.0.1", "[::1]"]##discovery.seed_hosts: ["host1", "host2"]## Bootstrap the cluster using an initial set of master-eligible nodes:##cluster.initial_master_nodes: ["node-1", "node-2"]## For more information, consult the discovery and cluster formation module documentation.## ---------------------------------- Gateway -----------------------------------## Block initial recovery after a full cluster restart until N nodes are started:##gateway.recover_after_nodes: 3## For more information, consult the gateway module documentation.## ---------------------------------- Various -----------------------------------## Require explicit names when deleting indices:##action.destructive_requires_name: true 增加es用户，并设置密码 1234567[root@test elasticsearch-7.3.1]# adduser es[root@test elasticsearch-7.3.1]# passwd es更改用户 es 的密码 。新的 密码：重新输入新的 密码：passwd：所有的身份验证令牌已经成功更新。[root@test config]# chown -R es:es /opt/apps/ELK/elasticsearch-7.3.1 启动 1234567891011121314[es@test bin]$ ./elasticsearchfuture versions of Elasticsearch will require Java 11; your Java version from [/opt/apps/jdk/jdk1.8.0_144/jre] does not meet this requirement[2019-09-04T00:47:34,034][INFO ][o.e.e.NodeEnvironment ] [es-1] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [13.3gb], net total_space [16.9gb], types [rootfs][2019-09-04T00:47:34,034][INFO ][o.e.e.NodeEnvironment ] [es-1] heap size [1007.3mb], compressed ordinary object pointers [true][2019-09-04T00:47:34,036][INFO ][o.e.n.Node ] [es-1] node name [es-1], node ID [vS7rK74YQ4WxBd1Mu_bDNQ], cluster name [my-es][2019-09-04T00:47:34,036][INFO ][o.e.n.Node ] [es-1] version[7.3.1], pid[12929], build[default/tar/4749ba6/2019-08-19T20:19:25.651794Z], OS[Linux/3.10.0-957.el7.x86_64/amd64], JVM[Oracle Corporation/Java HotSpot(TM) 64-Bit Server VM/1.8.0_144/25.144-b01][2019-09-04T00:47:34,037][INFO ][o.e.n.Node ] [es-1] JVM home [/opt/apps/jdk/jdk1.8.0_144/jre][2019-09-04T00:47:34,037][INFO ][o.e.n.Node ] [es-1] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-3737861652460694710, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Dio.netty.allocator.type=unpooled, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/opt/apps/ELK/elasticsearch-7.3.1, -Des.path.conf=/opt/apps/ELK/elasticsearch-7.3.1/config, -Des.distribution.flavor=default, -Des.distribution.type=tar, -Des.bundled_jdk=true][2019-09-04T00:47:36,184][INFO ][o.e.p.PluginsService ] [es-1] loaded module [aggs-matrix-stats][2019-09-04T00:47:36,184][INFO ][o.e.p.PluginsService ] [es-1] loaded module [analysis-common][2019-09-04T00:47:36,185][INFO ][o.e.p.PluginsService ] [es-1] loaded module [data-frame][2019-09-04T00:47:36,185][INFO ][o.e.p.PluginsService ] [es-1] loaded module [flattened][2019-09-04T00:47:36,185][INFO ][o.e.p.PluginsService ] [es-1] loaded module [ingest-common][2019-09-04T00:47:36,185][INFO ][o.e.p.PluginsService ] [es-1] loaded module [ingest-geoip] 报错，信息如下 1234ERROR: [3] bootstrap checks failed[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535][2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144][3]: the default discovery settings are unsuitable for production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured 安装报错信息，做相应修改 12345678910111213141516171819202122232425262728293031323334353637383940414243[es@test bin]$ exitexit[root@test bin]# vi /etc/sysctl.conf[root@test bin]# cat /etc/sysctl.conf# sysctl settings are defined through files in# /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.## Vendors settings live in /usr/lib/sysctl.d/.# To override a whole file, create a new file with the same in# /etc/sysctl.d/ and put new settings there. To override# only specific settings, add a file with a lexically later# name in /etc/sysctl.d/ and put new settings there.## For more information, see sysctl.conf(5) and sysctl.d(5).vm.max_map_count=655360[root@test bin]# sysctl -pvm.max_map_count = 655360[root@test bin]# vi /etc/security/limits.conf# End of file#增加如下内容* soft nofile 65536* hard nofile 131072* soft nproc 2048* hard nproc 4096[root@test config]# pwd/opt/apps/ELK/elasticsearch-7.3.1/config[root@test config]# vi elasticsearch.yml# --------------------------------- Discovery ----------------------------------## Pass an initial list of hosts to perform discovery when this node is started:# The default list of hosts is ["127.0.0.1", "[::1]"]#discovery.seed_hosts: ["test"]## Bootstrap the cluster using an initial set of master-eligible nodes:#cluster.initial_master_nodes: ["es-1"]## For more information, consult the discovery and cluster formation module documentation. 重新启动 12[root@test bin]# su es[es@test bin]$ ./elasticsearch 启动好es，安装好Nginx用于产生日志，然后安装logstach收集日志并解析，然后发送到es中，再安装kibana进行图形化展示]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[logstach的安装使用]]></title>
    <url>%2F2019%2F09%2F04%2FLearn%2Flogstach%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[logstach是什么 logstach安装上传解压 123456789101112131415161718192021[root@test logstash-7.3.1]# pwd/opt/apps/ELK/logstash-7.3.1[root@test logstash-7.3.1]# ll总用量 848drwxr-xr-x. 2 root root 4096 9月 3 23:34 bindrwxr-xr-x. 2 root root 142 9月 3 23:34 config-rw-r--r--. 1 root root 2276 8月 20 05:47 CONTRIBUTORSdrwxr-xr-x. 5 root root 84 9月 4 00:13 data-rw-r--r--. 1 root root 4144 8月 20 05:48 Gemfile-rw-r--r--. 1 root root 23109 8月 20 05:49 Gemfile.lockdrwxr-xr-x. 6 root root 84 9月 3 23:34 lib-rw-r--r--. 1 root root 13675 8月 20 05:47 LICENSE.txtdrwxr-xr-x. 2 root root 66 9月 4 00:13 logsdrwxr-xr-x. 4 root root 90 9月 3 23:34 logstash-coredrwxr-xr-x. 3 root root 86 9月 3 23:34 logstash-core-plugin-apidrwxr-xr-x. 4 root root 55 9月 3 23:34 modulesdrwxr-xr-x. 2 root root 31 9月 4 00:12 Myconf-rw-r--r--. 1 root root 808305 8月 20 05:47 NOTICE.TXTdrwxr-xr-x. 3 root root 30 9月 3 23:34 toolsdrwxr-xr-x. 4 root root 33 9月 3 23:34 vendordrwxr-xr-x. 9 root root 193 9月 3 23:34 x-pack 建立抽取日志的conf文件夹 123456789101112131415161718192021222324252627282930313233343536[root@test logstash-7.3.1]# mkdir Myconf[root@test logstash-7.3.1]# cd Myconf/[root@test Myconf]# ll总用量 4-rw-r--r--. 1 root root 553 9月 4 00:12 logstachTest.conf[root@test Myconf]# vi logstachTest.conf#指定抽取的日志的目录input &#123; file &#123; path =&gt; "/usr/local/nginx/logs/*.log" &#125;&#125;#指定过滤标准filter &#123; if [path] =~ "access" &#123; mutate &#123; replace =&gt; &#123; type =&gt; "apache_access" &#125; &#125; grok &#123; match =&gt; &#123; "message" =&gt; "%&#123;COMBINEDAPACHELOG&#125;" &#125; &#125; date &#123; match =&gt; [ "timestamp" , "dd/MMM/yyyy:HH:mm:ss Z" ] &#125; &#125; else if [path] =~ "error" &#123; mutate &#123; replace =&gt; &#123; type =&gt; "apache_error" &#125; &#125; &#125; else &#123; mutate &#123; replace =&gt; &#123; type =&gt; "random_logs" &#125; &#125; &#125;&#125;#输出到es中output &#123; elasticsearch &#123; hosts =&gt; ["192.168.133.11:9200"] &#125; stdout &#123; codec =&gt; rubydebug &#125;&#125; 启动 1234567891011[root@test logstash-7.3.1]# bin/logstash -f Myconf/logstachTest.confThread.exclusive is deprecated, use Thread::MutexSending Logstash logs to /opt/apps/ELK/logstash-7.3.1/logs which is now configured via log4j2.properties[2019-09-04T00:13:15,542][INFO ][logstash.setting.writabledirectory] Creating directory &#123;:setting=&gt;"path.queue", :path=&gt;"/opt/apps/ELK/logstash-7.3.1/data/queue"&#125;[2019-09-04T00:13:15,562][INFO ][logstash.setting.writabledirectory] Creating directory &#123;:setting=&gt;"path.dead_letter_queue", :path=&gt;"/opt/apps/ELK/logstash-7.3.1/data/dead_letter_queue"&#125;[2019-09-04T00:13:16,025][WARN ][logstash.config.source.multilocal] Ignoring the 'pipelines.yml' file because modules or command line options are specified[2019-09-04T00:13:16,032][INFO ][logstash.runner ] Starting Logstash &#123;"logstash.version"=&gt;"7.3.1"&#125;[2019-09-04T00:13:16,054][INFO ][logstash.agent ] No persistent UUID file found. Generating new UUID &#123;:uuid=&gt;"610b90dd-f455-49dc-80ad-ba886b0c45f6", :path=&gt;"/opt/apps/ELK/logstash-7.3.1/data/uuid"&#125;[2019-09-04T00:13:18,007][INFO ][org.reflections.Reflections] Reflections took 43 ms to scan 1 urls, producing 19 keys and 39 values[2019-09-04T00:13:19,735][INFO ][logstash.outputs.elasticsearch] Elasticsearch pool URLs updated &#123;:changes=&gt;&#123;:removed=&gt;[], :added=&gt;[http://192.168.133.11:9200/]&#125;&#125;[2019-09-04T00:13:20,010][WARN ][logstash.outputs.elasticsearch] Attempted to resurrect connection to dead ES instance, but got an error. &#123;:url=&gt;"http://192.168.133.11:9200/", :error_type=&gt;LogStash::Outputs::ElasticSearch::HttpClient::Pool::HostUnreachableError, :error=&gt;"Elasticsearch Unreachable: [http://192.168.133.11:9200/][Manticore::SocketException] 拒绝连接 (Connection refused)"&#125; 启动需要指定conf文件。类似于flume此处表示es还未启动 参考文档logstach配置conf文件官方示例]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Logstach</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ntp错误记录]]></title>
    <url>%2F2019%2F09%2F04%2FBigData%2Fntp%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[错误描述新安装的Ambari集群经常出现Hbase的两个节点挂掉的情况，查看系统时间，发现是时间不一致，但是重启，或者重装ntp服务，在一天之后，还是会发生两个节点时间不同步的情况 正确节点的情况 1234567891011121314151617181920212223242526272829[root@vm03 ~]# systemctl status ntpd● ntpd.service - Network Time Service Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled) Active: active (running) since Mon 2019-09-02 10:19:34 CST; 2 days ago Process: 125593 ExecStart=/usr/sbin/ntpd -u ntp:ntp $OPTIONS (code=exited, status=0/SUCCESS) Main PID: 125594 (ntpd) CGroup: /system.slice/ntpd.service └─125594 /usr/sbin/ntpd -u ntp:ntp -gSep 02 10:19:34 vm03 ntpd[125594]: Listen normally on 2 lo 127.0.0.1 UDP 123Sep 02 10:19:34 vm03 ntpd[125594]: Listen normally on 3 ens192 172.18.4.13 UDP 123Sep 02 10:19:34 vm03 ntpd[125594]: Listen normally on 4 lo ::1 UDP 123Sep 02 10:19:34 vm03 ntpd[125594]: Listen normally on 5 ens192 fe80::7d45:f43c:d65:1879 UDP 123Sep 02 10:19:34 vm03 ntpd[125594]: Listening on routing socket on fd #22 for interface updatesSep 02 10:19:34 vm03 ntpd[125594]: 0.0.0.0 c016 06 restartSep 02 10:19:34 vm03 ntpd[125594]: 0.0.0.0 c012 02 freq_set kernel 3.969 PPMSep 02 10:22:47 vm03 ntpd[125594]: 0.0.0.0 c615 05 clock_syncSep 04 11:29:09 vm03 ntpd[125594]: 0.0.0.0 0618 08 no_sys_peerSep 04 13:13:38 vm03 ntpd[125594]: 0.0.0.0 0613 03 spike_detect -3.416143 s[root@vm03 ~]# timedatectl Local time: Wed 2019-09-04 13:19:11 CST Universal time: Wed 2019-09-04 05:19:11 UTC RTC time: Wed 2019-09-04 05:19:11 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yesNTP synchronized: yes RTC in local TZ: no DST active: n/a 时间错误节点 1234567891011121314151617181920212223242526272829[root@vm02 ~]# systemctl status ntpd● ntpd.service - Network Time Service Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled) Active: active (running) since Wed 2019-09-04 21:11:43 CST; 7h left Process: 95340 ExecStart=/usr/sbin/ntpd -u ntp:ntp $OPTIONS (code=exited, status=0/SUCCESS) Main PID: 95341 (ntpd) CGroup: /system.slice/ntpd.service └─95341 /usr/sbin/ntpd -u ntp:ntp -gSep 04 21:11:43 vm02 ntpd[95341]: Listen normally on 2 lo 127.0.0.1 UDP 123Sep 04 21:11:43 vm02 ntpd[95341]: Listen normally on 3 ens192 172.18.4.12 UDP 123Sep 04 21:11:43 vm02 ntpd[95341]: Listen normally on 4 lo ::1 UDP 123Sep 04 21:11:43 vm02 ntpd[95341]: Listen normally on 5 ens192 fe80::40a0:33d4:f356:1e42 UDP 123Sep 04 21:11:43 vm02 ntpd[95341]: Listening on routing socket on fd #22 for interface updatesSep 04 21:11:43 vm02 ntpd[95341]: 0.0.0.0 c016 06 restartSep 04 21:11:43 vm02 ntpd[95341]: 0.0.0.0 c012 02 freq_set kernel 9.198 PPMSep 04 21:14:58 vm02 ntpd[95341]: 0.0.0.0 c61c 0c clock_step -28752.284818 sSep 04 13:15:46 vm02 ntpd[95341]: 0.0.0.0 c614 04 freq_modeSep 04 13:15:47 vm02 ntpd[95341]: 0.0.0.0 c618 08 no_sys_peer[root@vm02 ~]# timedatectl Local time: Wed 2019-09-04 13:20:25 CST Universal time: Wed 2019-09-04 05:20:25 UTC RTC time: Wed 2019-09-04 13:19:37 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yesNTP synchronized: no RTC in local TZ: no DST active: n/a 可以观察到，唯一不同的是NTP synchronized: no 尝试重启timedatectl服务 12345678910[root@vm05 360safe]# systemctl restart systemd-timedated.service[root@vm05 360safe]# timedatectl Local time: Wed 2019-09-04 13:21:52 CST Universal time: Wed 2019-09-04 05:21:52 UTC RTC time: Wed 2019-09-04 05:21:52 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yesNTP synchronized: yes RTC in local TZ: no DST active: n/a 12345678910[root@vm02 ~]# systemctl restart systemd-timedated.service[root@vm02 ~]# timedatectl Local time: Wed 2019-09-04 13:23:29 CST Universal time: Wed 2019-09-04 05:23:29 UTC RTC time: Wed 2019-09-04 13:22:42 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yesNTP synchronized: no RTC in local TZ: no DST active: n/a 发现错误的两个节点，其中一个恢复到了正常，另一个仍旧如此两台节点唯一的不同是一个装了360，恢复正常的一个将360卸载了，遂尝试卸载360 123456789101112131415161718192021[root@vm02 ~]# cd /opt/360safe/[root@vm02 360safe]# lltotal 2164-r-xr--r--. 1 root root 316048 Sep 13 2017 360entclientdrwx------. 2 root root 24 Aug 12 17:47 backup-r-xr-xr-x. 1 root root 1869992 Sep 13 2017 clearfirewalldrwxr-xr-x. 2 root root 257 Sep 4 13:24 confdrwxr-xr-x. 2 root root 169 Sep 4 13:24 Datadrwxr-xr-x. 3 root root 113 Aug 30 08:36 enginedrwxr-xr-x. 2 root root 4096 Aug 19 13:19 Frameworks-rw-rw-r--. 1 root root 3736 Sep 13 2017 install.shdrwxr-xr-x. 2 root root 39 Aug 12 17:47 lib7zdrwxr-xr-x. 4 root root 4096 Sep 4 00:46 logdrwxr-xr-x. 2 root root 4096 Aug 19 13:19 modularizedrwxr-xr-x. 7 root root 89 Aug 19 13:19 ThirdPath-rw-rw-r--. 1 root root 2154 Sep 13 2017 uninstall.sh-rw-r--r--. 1 root root 1368 Sep 4 01:04 updatecfg.ini[root@vm02 360safe]# bash ./uninstall.shstop service service360saferm init.d/service360saferm /opt/360safe 再重启timedatectl服务 发现仍旧没有成功，然后再等待，等待，就好了]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Ntp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[集群基本配置]]></title>
    <url>%2F2019%2F09%2F04%2FToWork%2F%E5%85%AC%E5%8F%B8%E9%9B%86%E7%BE%A4%E5%9F%BA%E6%9C%AC%E6%83%85%E5%86%B5%2F</url>
    <content type="text"><![CDATA[Please enter the password to read the blog. Incorrect Password! No content to display! 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]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Nginx的学习使用]]></title>
    <url>%2F2019%2F09%2F04%2FLearn%2FNginx%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[nginx是什么Nginx是一个轻量级，高性能的web服务器/反向代理服务器/电子邮件代理服务器。具有占用内存小，并发性高的优点。 名词解释代理服务器代理，或者说网络代理，是指一种特殊的网络服务。允许一个网络终端（一般指客户端）和另一个网络终端（一般指服务器端）进行非直连的连接。一些网关，路由器设备就具有这种网络代理功能。一般来说，网络代理有利于网络终端的隐私和安全，防止攻击。 代理服务器，指提供网络代理功能的计算机系统或者其他类型的网络终端。 正向代理和反向代理不涉及代理： 用户A直接向服务器A发送请求，服务器A再将请求的内容返回给用户A 反向代理： 代理的是服务器端客户端向代理服务器发送请求，代理服务器向原始服务器转交请求，返回内容给代理服务器A，再返回给用户 正向代理： 代理的是客户端允许客户端通过代理服务器Z访问任意网络，并且隐藏客户端自身代理服务器需要采取安全措施，确保为经过授权的客户端提供服务 Nginx的安装Nginx是由c开发的，所以需要安装c的编译环境 1[root@test ELK]# yum install gcc-c++ Nginx的http模块需要pcre-devel解析正则表达式 1[root@test ELK]# yum install pcre-devel Nginx使用zlib对httpd的内容进行gzip 1[root@test ELK]# yum install -y zlib zlib-devel OpenSSL是一个强大的安全套接字层密码库，囊括主要的密码算法、常见的密钥、证书封装管理功能及SSL协议。这是为nginx的https服务提供支持的 1[root@test ELK]# yum install -y openssl openssl-devel 解压,安装 123456789101112[root@test ELK]# tar -zxvf nginx-1.17.3.tar.gz[root@test nginx]# cd nginx-1.17.3[root@test nginx]# ./configure &amp;&amp; make &amp;&amp; make install[root@test nginx]# whereis nginxnginx: /usr/local/nginx[root@test nginx]# cd /usr/local/nginx/[root@test nginx]# ll总用量 4drwxr-xr-x. 2 root root 4096 9月 3 23:08 confdrwxr-xr-x. 2 root root 40 9月 3 23:08 htmldrwxr-xr-x. 2 root root 6 9月 3 23:08 logsdrwxr-xr-x. 2 root root 19 9月 3 23:08 sbin 启动 1234567891011[root@test nginx]# cd sbin/[root@test sbin]# ll总用量 3744-rwxr-xr-x. 1 root root 3830200 9月 3 23:08 nginx[root@test sbin]# ./nginxnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)nginx: [emerg] still could not bind() 发现Nginx默认的80端口已经被使用，修改默认端口和ip 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138[root@test sbin]# cd ..[root@test nginx]# cd conf/[root@test conf]# ll总用量 68-rw-r--r--. 1 root root 1077 9月 3 23:08 fastcgi.conf-rw-r--r--. 1 root root 1077 9月 3 23:08 fastcgi.conf.default-rw-r--r--. 1 root root 1007 9月 3 23:08 fastcgi_params-rw-r--r--. 1 root root 1007 9月 3 23:08 fastcgi_params.default-rw-r--r--. 1 root root 2837 9月 3 23:08 koi-utf-rw-r--r--. 1 root root 2223 9月 3 23:08 koi-win-rw-r--r--. 1 root root 5231 9月 3 23:08 mime.types-rw-r--r--. 1 root root 5231 9月 3 23:08 mime.types.default-rw-r--r--. 1 root root 2656 9月 3 23:08 nginx.conf-rw-r--r--. 1 root root 2656 9月 3 23:08 nginx.conf.default-rw-r--r--. 1 root root 636 9月 3 23:08 scgi_params-rw-r--r--. 1 root root 636 9月 3 23:08 scgi_params.default-rw-r--r--. 1 root root 664 9月 3 23:08 uwsgi_params-rw-r--r--. 1 root root 664 9月 3 23:08 uwsgi_params.default-rw-r--r--. 1 root root 3610 9月 3 23:08 win-utf[root@test conf]# vi nginx.conf[root@test sbin]# cat ../conf/nginx.conf#user nobody;worker_processes 1;#error_log logs/error.log;#error_log logs/error.log notice;#error_log logs/error.log info;#pid logs/nginx.pid;events &#123; worker_connections 1024;&#125;http &#123; include mime.types; default_type application/octet-stream; #log_format main '$remote_addr - $remote_user [$time_local] "$request" ' # '$status $body_bytes_sent "$http_referer" ' # '"$http_user_agent" "$http_x_forwarded_for"'; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; server &#123; listen 8088; server_name 192.168.133.11; #charset koi8-r; #access_log logs/host.access.log main; location / &#123; root html; index index.html index.htm; &#125; #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root html; &#125; # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \.php$ &#123; # proxy_pass http://127.0.0.1; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \.php$ &#123; # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #&#125; # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\.ht &#123; # deny all; #&#125; &#125; # another virtual host using mix of IP-, name-, and port-based configuration # #server &#123; # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125; # HTTPS server # #server &#123; # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / &#123; # root html; # index index.html index.htm; # &#125; #&#125;&#125; 修改端口为8088，ip为本机ip：192.168.133.11启动 12345[root@test nginx]# cd sbin/[root@test sbin]# ll总用量 3744-rwxr-xr-x. 1 root root 3830200 9月 3 23:08 nginx[root@test sbin]# ./nginx web页面访问： 查看Nginx状态 12345[root@test sbin]# ./nginx -tnginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is oknginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful[root@test sbin]# pwd/usr/local/nginx/sbin 停止 1./nginx -s stop 如果修改了配置文件，不需要重启Nginx，可以使用命令重新加载配置文件 1./nginx -s reload 参考8分钟带你深入浅出搞懂NginxNginx系列（一）–nginx是什么？Nginx——nginx安装及使用（一）]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[东北攻略]]></title>
    <url>%2F2019%2F09%2F02%2FEssays%2F%E4%B8%9C%E5%8C%97%E6%94%BB%E7%95%A5%2F</url>
    <content type="text"><![CDATA[起因国庆东北游 经过路线规划大连线 路线和车费北京—-&gt;大连(261~400)推荐：D45车次 &emsp; 北京-大连北 &emsp;时间：6:55-13:08 &emsp;耗时：6h13分 &emsp;车费：261 大连线景点推荐 大连滨海路延绵数公里的海景公路，徒步骑行胜地 金石滩国家旅游度假区汇集娱乐休闲于一体，是个海滨度假好去处 星海公园历史悠久的开放式海滨公园，沙滩浴场，是大连市民休憩消暑的好去处 俄罗斯风情街中国第一条俄式建筑风格街道，可以淘到一些东欧特色小商品 东方威尼斯水城漫步于欧式建筑与水城风光中，感受威尼斯水城般的异域风情。 老虎滩海洋公园欣赏各种极地动物的逗趣表演，乘坐跨海索道俯瞰海滨风光。 棒棰岛大连市区环境最好的海滩，孤立于海上的棒棰岛是著名景观。 大连圣亚海洋世界在全景海底通道中感受海底世界，欣赏精彩的海豚、海象等表演。 老铁山 日落下的山顶灯塔，和泾渭分明的黄渤海交界线，是老铁山的经典去处。 大鹿岛大鹿岛到庄河的王家岛、石城岛，长海的大小长山岛、獐子岛等周边海岛。 如果都去，预计花费时间3-4天，此处按照4天计算 沈阳： 沈阳热门景点如图，想去的欲望并不大。所以从路线上看，推荐从北京直达大连，在大连逛4-5天左右，做慢火车慢慢回北京。 吉林线 吉林线景点推荐 长白山天池位于长白山主峰山巅的圣洁之湖，是长白山的必赏之处。 长白山北坡观长白瀑布、漫步谷底林海，坐倒站车上主峰赏天池美景。 长白山西坡景区赏锦江大峡谷奇景和草甸山花遍野，观视野开阔的天池全貌。 长白瀑布长白山瀑布夏季轰鸣如雷，冬季一挂银川，相当壮观。 鸭绿江 望天鹅风景区 大兴安岭 推荐冬季游玩 伊春 小兴安岭—黑龙江伊春尝试过坐着火车穿越森林吗？去伊春感受一下吧，伊春每个区都有林场，很多是半原始的森林，天然氧吧。其实大兴安岭景点没有小兴安岭集中，去牙克石、博克图附近转转吧。 秋天，白桦和栎树的叶子变黄了，枫树的叶子火一样红，松柏显得更苍翠了。秋风吹来，落叶在林间飞舞。这时候，森林向人们献出了酸甜可口的山葡萄，又香又脆的榛子，鲜嫩的蘑菇和木耳，还有人参等名贵药材。 ——《美丽的小兴安岭》 伊春景点推荐 毛衫沟国家森林公园原生态的自然风光，大峡谷的风景让人惊艳。 汤旺河国家公园 黑龙江汤旺河国家公园地处小兴安岭南麓，植被覆盖率99.8%以上，以红松为主的针阔叶混交林是亚洲最完整、最具代表性的原始红松林生长地，素有“红松故乡”之美誉。 兴安森林公园 金山鹿苑 五营国家森林公园 与刘少奇主席坐过的小火车合影，登上观光塔环望浩瀚的原始林海。 茅山瀑布 小东沟原始森林 参考去哪儿网：https://travel.qunar.com/p-cs300134-dalian-jingdian马蜂窝：http://www.mafengwo.cn/jd/10301/gonglve.html知乎问题：作为一个南方人，我想去东北旅行，但是东北这么大，哪些地方比较好玩呀？知乎问题：国内有哪些冷门但有特色的旅游地点？ st=>start: 北京 e=>end: 北京 op1=>operation: 大连 st->op1->e{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-0-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-0", options);st=>start: 北京 e=>end: 北京 op1=>operation: 吉林长白山 st->op1->e{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-1-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-1", options);st=>start: 北京 e=>end: 北京 op1=>operation: 哈尔滨 op2=>operation: 伊春 st->op1->op2->e{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12} var code = document.getElementById("flowchart-2-code").value; var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-2-options").value)); var diagram = flowchart.parse(code); diagram.drawSVG("flowchart-2", options);]]></content>
      <categories>
        <category>Essays</category>
      </categories>
      <tags>
        <tag>旅行</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ELK学习]]></title>
    <url>%2F2019%2F09%2F02%2FLearn%2FELK%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[ELK是什么ELK是一个日志收集处理分析系统 业务场景 当公司的系统发生了故障，工程师需要登录到各个服务器去查看日志，看看到底是出了什么问题。 但是，如果你的机器很多，并且每台机器上有个组件，那么当寻找发生了什么情况的时候，就会特别不方便。 如果可以将所有服务器的所有组件的不同日志都集中分类进行处理分析，我们只需要在一个终端上查看寻找定位，便可以找到出问题的机器或者组件，这样就很方便。 ELK便是这样一个集中式的日志收集处理分析系统。 日志： app win：ERP,OA,CRM等等 服务器日志 tomcat，Nginx，http 接口 当然除了定位日志报错信息，还可以通过分析日志信息，得到我们想要的数据。ELK是三个工具的集合：elasticsearch + logstach + kibana，三套工具形成了一套实用，易用的监控架构，很多公司利用他来搭建可视化的海量日志分析平台 ElasticSearch是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。 Logstash是一个用于管理日志和事件的工具，你可以用它去收集日志、转换日志、解析日志并将他们作为数据提供给其它模块调用，例如搜索、存储等。 Kibana是一个优秀的前端日志展示框架，它可以非常详细的将日志转化为各种图表，为用户提供强大的数据可视化支持。 Beats是ELK的轻量型数据采集器，从不同的服务器和系统收集不同类型的各种数据，发送给logstach或者es 杂记 es除了做一个搜索引擎，还可以用来做存储。但是做存储有一个弊端，就是数据的增量不能波动太大，不能说一次就来大级别，当然大数据量的数据也做不了。需要数据的增量是一个稳定的，小量的。 ELK除了分析日志，还可以将日志换成数据，用来做数据处理，除了说ELK对处理的数据量，可能不能像大数据那样大，还有什么区别呢？数据的稳定性是否可以由kafka来保证？ 某些公司处理数据？日志？使用的如下组件 hbase+impala+solr hbase+Phoenix 某些专门处理日志的公司，如果说了解ELK，应该就知道这几个公司 elastic 日志易 splunk 问题 ERP,OA,CRM等系统是什么？ B/S,C/S是什么？ tomcat是什么，有什么用处？ nginx是什么？有什么用处？ 公司的系统的接口具体是什么？ hbase+impala+solr的集成 hbase+Phoenix的集成使用 Nginx是什么？有什么用处？ kibane和grafana MYSQL的监控工具zabbix ELK做对kafka的监控，需要使用beats 参考 什么是ELK？]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>ELK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ntp自定义日志文件]]></title>
    <url>%2F2019%2F09%2F02%2FBigData%2Fntp%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[起因在搭建好大数据平台之后，集群的两个节点的Hbase regionserver总是莫名其妙的挂掉，检查时间，发现时间和其他机器相差甚远，于是查看ntp服务，发现这两节点的ntp服务已经挂掉，但是找不到相应的日志信息，所以决定给ntpd服务指定相应的日志文件 操作查看ntp.conf123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566[root@vm05 ~]# cat /etc/ntp.conf# For more information about this file, see the man pages# ntp.conf(5), ntp_acc(5), ntp_auth(5), ntp_clock(5), ntp_misc(5), ntp_mon(5).driftfile /var/lib/ntp/drift# Permit time synchronization with our time source, but do not# permit the source to query or modify the service on this system.restrict default nomodify notrap nopeer noquery# Permit all access over the loopback interface. This could# be tightened as well, but to do so would effect some of# the administrative functions.restrict 127.0.0.1restrict ::1# Hosts on local network are less restricted.#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).#server 0.centos.pool.ntp.org iburst#server 1.centos.pool.ntp.org iburst#server 2.centos.pool.ntp.org iburst#server 3.centos.pool.ntp.org iburst#设置与主节点ip同步server 172.18.4.11 prefer#设置副设置与本地同步#server 127.127.1.0#fudge 127.127.1.0 stratum 10#broadcast 192.168.1.255 autokey # broadcast server#broadcastclient # broadcast client#broadcast 224.0.1.1 autokey # multicast server#multicastclient 224.0.1.1 # multicast client#manycastserver 239.255.254.254 # manycast server#manycastclient 239.255.254.254 autokey # manycast client# Enable public key cryptography.#cryptoincludefile /etc/ntp/crypto/pw# Key file containing the keys and key identifiers used when operating# with symmetric key cryptography.keys /etc/ntp/keys# Specify the key identifiers which are trusted.#trustedkey 4 8 42# Specify the key identifier to use with the ntpdc utility.#requestkey 8# Specify the key identifier to use with the ntpq utility.#controlkey 8# Enable writing of statistics records.#statistics clockstats cryptostats loopstats peerstats# Disable the monitoring facility to prevent amplification attacks using ntpdc# monlist command when default restrict does not include the noquery flag. See# CVE-2013-5211 for more details.# Note: Monitoring will not be disabled with the limited restriction flag.disable monitor 发现并没有任何有关logs的参数配置 列出所有ntpd的配置文件1234[root@vm05 ~]# rpm -ql ntp|grep conf/etc/ntp.conf/etc/sysconfig/ntpd/usr/share/man/man5/ntp.conf.5.gz 发现除了/etc/ntp.conf,还有/etc/sysconfig/ntpd配置文件同时，查看运行状态下的ntpd服务，可以发现ntpd的启动是使用的/etc/sysconfig/ntpd 查看/etc/sysconfig/ntpd123[root@vm05 ~]# cat /etc/sysconfig/ntpd# Command line options for ntpdOPTIONS="-g" 12345678910111213[root@vm01 ~]# systemctl status ntpd● ntpd.service - Network Time Service Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled) Active: active (running) since Wed 2019-08-28 16:36:55 CST; 4 days ago Main PID: 34251 (ntpd) CGroup: /system.slice/ntpd.service └─34251 /usr/sbin/ntpd -u ntp:ntp -gAug 28 16:36:56 vm01 ntpd[34251]: Listen normally on 2 lo 127.0.0.1 UDP 123Aug 28 16:36:56 vm01 ntpd[34251]: Listen normally on 3 ens192 172.18.4.11 UDP 123Aug 28 16:36:56 vm01 ntpd[34251]: Listen normally on 4 lo ::1 UDP 123Aug 28 16:36:56 vm01 ntpd[34251]: Listening on routing socket on fd #21 for interface updatesAug 28 16:36:56 vm01 ntpd[34251]: 0.0.0.0 c016 06 restar 同时，查看ntpd的参数设置 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061[root@vm05 ~]# ntpd --helpntpd - NTP daemon program - Ver. 4.2.6p5Usage: ntpd [ -&lt;flag&gt; [&lt;val&gt;] | --&lt;name&gt;[&#123;=| &#125;&lt;val&gt;] ]... Flg Arg Option-Name Description -4 no ipv4 Force IPv4 DNS name resolution - prohibits the option 'ipv6' -6 no ipv6 Force IPv6 DNS name resolution - prohibits the option 'ipv4' -a no authreq Require crypto authentication - prohibits the option 'authnoreq' -A no authnoreq Do not require crypto authentication - prohibits the option 'authreq' -b no bcastsync Allow us to sync to broadcast servers -c Str configfile configuration file name -d no debug-level Increase output debug message level - may appear multiple times -D Str set-debug-level Set the output debug message level - may appear multiple times -f Str driftfile frequency drift file name -g no panicgate Allow the first adjustment to be Big - may appear multiple times -i Str jaildir Jail directory -I Str interface Listen on an interface name or address - may appear multiple times -k Str keyfile path to symmetric keys -l Str logfile path to the log file -L no novirtualips Do not listen to virtual interfaces -m no mlock Lock memory -n no nofork Do not fork -N no nice Run at high priority -p Str pidfile path to the PID file - may appear up to 2 times -P Num priority Process priority -q no quit Set the time and quit -r Str propagationdelay Broadcast/propagation delay Str saveconfigquit Save parsed configuration and quit -s Str statsdir Statistics file location -t Str trustedkey Trusted key number - may appear multiple times -u Str user Run as userid (or userid:groupid) - may appear up to 2 times -U Num updateinterval interval in seconds between scans for new or dropped interfaces Str var make ARG an ntp variable (RW) - may appear multiple times Str dvar make ARG an ntp variable (RW|DEF) - may appear multiple times -x no slew Slew up to 600 seconds -! opt version output version information and exit -? no help display extended usage information and exit -! no more-help extended usage information passed thru pagerOptions are specified by doubled hyphens and their name or by a singlehyphen and the flag character.The following option preset mechanisms are supported: - examining environment variables named NTPD_*Please send bug reports to: &lt;http://bugs.ntp.org, bugs@ntp.org&gt;exit 0 发现其中使用了-g的配置参数，并同时发现了-l logfile的参数所以，推出，可以通过添加logfile参数在/etc/sysconfig/ntpd 123[root@vm05 ~]# cat /etc/sysconfig/ntpd# Command line options for ntpdOPTIONS="-g -l /var/log/ntpstats/ntpd.log" 重启服务1234567891011121314[root@vm05 ~]# systemctl restart ntpd[root@vm05 log]# systemctl status ntpd● ntpd.service - Network Time Service Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled) Active: active (running) since Mon 2019-09-02 18:12:56 CST; 4s ago Process: 86272 ExecStart=/usr/sbin/ntpd -u ntp:ntp $OPTIONS (code=exited, status=0/SUCCESS) Main PID: 86273 (ntpd) CGroup: /system.slice/ntpd.service └─86273 /usr/sbin/ntpd -u ntp:ntp -g -l /var/log/ntpstats/ntpd.logSep 02 18:12:56 vm05 systemd[1]: Starting Network Time Service...Sep 02 18:12:56 vm05 ntpd[86272]: ntpd 4.2.6p5@1.2349-o Fri Apr 13 12:52:27 UTC 2018 (1)Sep 02 18:12:56 vm05 systemd[1]: Started Network Time Service.[root@vm05 log]# 可以看到ntpd的logfile参数生效查看logfile日志 12345678910111213[root@vm05 log]# cat /var/log/ntpstats/ntpd.log 2 Sep 18:12:56 ntpd[86273]: proto: precision = 0.897 usec 2 Sep 18:12:56 ntpd[86273]: 0.0.0.0 c01d 0d kern kernel time sync enabled 2 Sep 18:12:56 ntpd[86273]: ntp_io: estimated max descriptors: 1024, initial socket boundary: 16 2 Sep 18:12:56 ntpd[86273]: Listen and drop on 0 v4wildcard 0.0.0.0 UDP 123 2 Sep 18:12:56 ntpd[86273]: Listen and drop on 1 v6wildcard :: UDP 123 2 Sep 18:12:56 ntpd[86273]: Listen normally on 2 lo 127.0.0.1 UDP 123 2 Sep 18:12:56 ntpd[86273]: Listen normally on 3 ens192 172.18.4.15 UDP 123 2 Sep 18:12:56 ntpd[86273]: Listen normally on 4 lo ::1 UDP 123 2 Sep 18:12:56 ntpd[86273]: Listening on routing socket on fd #21 for interface updates 2 Sep 18:12:56 ntpd[86273]: 0.0.0.0 c016 06 restart 2 Sep 18:12:56 ntpd[86273]: 0.0.0.0 c012 02 freq_set kernel 8.687 PPM 2 Sep 18:12:58 ntpd[86273]: 0.0.0.0 c515 05 clock_sync 其他如果节点时间不正确，且ntp更新缓慢，很久都没办法和主服务器同步时，设置ntp.conf参数，调整只与主服务器同步，不与本地时间同步]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Ntp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ntp使用教程]]></title>
    <url>%2F2019%2F08%2F30%2FBigData%2Fntp%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ntp简介NTP（Network Time Protocol，网络时间协议）是用来使网络中的各个计算机时间同步的一种协议。它的用途是把计算机的时钟同步到世界协调时UTC，其精度在局域网内可达0.1ms，在互联网上绝大多数的地方其精度可以达到1-50ms。(1s=1000ms) NTP服务器就是利用NTP协议提供时间同步服务的。 ntp原理NTP客户端可以定时自动向NTP服务器发送请求来获取时间，NTP服务器将时间发送给客户端，。 NTP服务器的时间来源有两个 1.网络时间 2.NTP服务器自己的时间 ntp的安装使用1[root@web02 ~]# yum install ntp -y ntp配置集群中主节点：[192.168.133.3] 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162# For more information about this file, see the man pages# ntp.conf(5), ntp_acc(5), ntp_auth(5), ntp_clock(5), ntp_misc(5), ntp_mon(5).driftfile /var/lib/ntp/drift# Permit time synchronization with our time source, but do not# permit the source to query or modify the service on this system.restrict default kod nomodify notrap nopeer noqueryrestrict -6 default kod nomodify notrap nopeer noquery# Permit all access over the loopback interface. This could# be tightened as well, but to do so would effect some of# the administrative functions.restrict 127.0.0.1restrict -6 ::1# Hosts on local network are less restricted.# -----------------------------修改部分--------------------------------------------# 允许内网其他机器同步时间restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).# 中国这边最活跃的时间服务器 : http://www.pool.ntp.org/zone/cnserver 210.72.145.44 perfer # 中国国家受时中心server 202.112.10.36 # 1.cn.pool.ntp.orgserver 59.124.196.83 # 0.asia.pool.ntp.org#此处全部注释掉#broadcast 192.168.1.255 autokey # broadcast server#broadcastclient # broadcast client#broadcast 224.0.1.1 autokey # multicast server#multicastclient 224.0.1.1 # multicast client#manycastserver 239.255.254.254 # manycast server#manycastclient 239.255.254.254 autokey # manycast client# allow update time by the upper server# 允许上层时间服务器主动修改本机时间restrict 210.72.145.44 nomodify notrap noqueryrestrict 202.112.10.36 nomodify notrap noqueryrestrict 59.124.196.83 nomodify notrap noquery# Undisciplined Local Clock. This is a fake driver intended for backup# and when no outside source of synchronized time is available.# 外部时间服务器不可用时，以本地时间作为时间服务server 127.127.1.0 # local clockfudge 127.127.1.0 stratum 10# ---------------------------注意修改------------------------------------------# Enable public key cryptography.#cryptoincludefile /etc/ntp/crypto/pw# Key file containing the keys and key identifiers used when operating# with symmetric key cryptography.keys /etc/ntp/keys# Specify the key identifiers which are trusted.#trustedkey 4 8 42# Specify the key identifier to use with the ntpdc utility.#requestkey 8# Specify the key identifier to use with the ntpq utility.#controlkey 8# Enable writing of statistics records.#statistics clockstats cryptostats loopstats peerstats 从节点：[192.168.133.4….] 123456789101112131415161718192021222324252627# the administrative functions.restrict 127.0.0.1restrict ::1# Hosts on local network are less restricted.#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).#server 0.centos.pool.ntp.org iburst#server 1.centos.pool.ntp.org iburst#server 2.centos.pool.ntp.org iburst#server 3.centos.pool.ntp.org iburst#设置与主节点ip同步server 192.168.133.3 prefer#设置副设置与本地同步server 127.127.1.0fudge 127.127.1.0 stratum 10#broadcast 192.168.1.255 autokey # broadcast server#broadcastclient # broadcast client#broadcast 224.0.1.1 autokey # multicast server#multicastclient 224.0.1.1 # multicast client#manycastserver 239.255.254.254 # manycast server#manycastclient 239.255.254.254 autokey # manycast client 查看ntp状态12345[root@vm50 /]# ntpq -p remote refid st t when poll reach delay offset jitter============================================================================== 120.25.115.20 10.137.53.7 2 u 5 64 67 40.484 -284697 4.681 203.107.6.88 100.107.25.114 2 u - 64 77 16.579 -284697 7.181 参数解释 位置 标志 含义 remote之前 * 响应的NTP服务器和最精确的服务器 + 响应这个查询请求的NTP服务器 blank(空格) 没有响应的NTP服务器 列表上方 remote 响应这个请求的NTP服务器的名称 refid NTP服务器使用的更高一级服务器的名称 st 正在响应请求的NTP服务器的级别 when 上一次成功请求之后到现在的秒数 poll 本地和远程服务器多少时间进行一次同步，单位秒，在一开始运行NTP的时候这个poll值会比较小，服务器同步的频率大，可以尽快调整到正确的时间范围，之后poll值会逐渐增大，同步的频率也就会相应减小 reach 用来测试能否和服务器连接，是一个八进制值，每成功连接一次它的值就会增加 delay 从本地机发送同步要求到ntp服务器的往返时间 offset 主机通过NTP时钟同步与所同步时间源的时间偏移量，单位为毫秒，offset越接近于0，主机和ntp服务器的时间越接近 jitter 统计了在特定个连续的连接数里offset的分布情况。简单地说这个数值的绝对值越小，主机的时间就越精确 查看123456789[root@vm02 ~]# timedatectl Local time: Fri 2019-08-30 22:34:34 CST Universal time: Fri 2019-08-30 14:34:34 UTC RTC time: Fri 2019-08-30 14:34:34 Time zone: Asia/Shanghai (CST, +0800) NTP enabled: yesNTP synchronized: yes RTC in local TZ: no DST active: n/a]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Ntp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[elasticsearch的学习安装使用]]></title>
    <url>%2F2019%2F08%2F27%2FBigData%2Felasticsearch%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[elasticsearch简介Elasticsearch是一个基于Apache Lucene(TM)的开源搜索引擎。无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。但是，Lucene只是一个库。想要使用它，你必须使用Java来作为开发语言并将其直接集成到你的应用中，更糟糕的是，Lucene非常复杂，你需要深入了解检索的相关知识来理解它是如何工作的。 Elasticsearch也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。不过，Elasticsearch不仅仅是Lucene和全文搜索，我们还能这样去描述它：分布式的实时文件存储，每个字段都被索引并可被搜索分布式的实时分析搜索引擎可以扩展到上百台服务器，处理PB级结构化或非结构化数据 elasticsearch的安装上传，解压 1234567[root@vm03 elasticsearch-7.2.0]# pwd/opt/apps/elasticearch/elasticsearch-7.2.0[root@vm03 elasticearch]# lltotal 329668-rw-r--r--. 1 root root 336647987 Aug 27 15:35 elasticsearch-7.2.0-linux-x86_64.tar.gz-rw-r--r--. 1 root root 928732 Aug 27 15:35 elasticsearch-head-master.zip[root@vm03 elasticearch]# tar -zxvf elasticsearch-7.2.0-linux-x86_64.tar.gz 运行，出错： 1234567891011121314151617[root@vm03 bin]# ./elasticsearchfuture versions of Elasticsearch will require Java 11; your Java version from [/home/jdk1.8.0_181/jre] does not meet this requirement[2019-08-27T15:56:04,870][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [vm03] uncaught exception in thread [main]org.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:163) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:150) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-7.2.0.jar:7.2.0] at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-7.2.0.jar:7.2.0] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:115) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:92) ~[elasticsearch-7.2.0.jar:7.2.0]Caused by: java.lang.RuntimeException: can not run elasticsearch as root at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:105) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:172) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:349) ~[elasticsearch-7.2.0.jar:7.2.0] at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:159) ~[elasticsearch-7.2.0.jar:7.2.0] ... 6 more 增加用户es，设置密码为123456,并给与权限 12345678[root@vm03 bin]# adduser es[root@vm03 bin]# passwd esChanging password for user es.New password:BAD PASSWORD: The password contains less than 1 uppercase lettersRetype new password:passwd: all authentication tokens updated successfully.[root@vm03 bin]# chown -R es:es /opt/apps/elasticearch/ 使用es用户启动 12[root@vm03 bin]# su es[es@vm03 bin]$ ./elasticsearch 验证 123456789101112131415161718[root@vm03 ~]# curl 'http://localhost:9200/?pretty'&#123; "name" : "vm03", "cluster_name" : "elasticsearch", "cluster_uuid" : "_emUtf4WQaOremUsXM8FCA", "version" : &#123; "number" : "7.2.0", "build_flavor" : "default", "build_type" : "tar", "build_hash" : "508c38a", "build_date" : "2019-06-20T15:54:18.811730Z", "build_snapshot" : false, "lucene_version" : "8.0.0", "minimum_wire_compatibility_version" : "6.8.0", "minimum_index_compatibility_version" : "6.0.0-beta1" &#125;, "tagline" : "You Know, for Search"&#125; 修改参数主节点 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104[root@vm03 config]# pwd/opt/apps/elasticearch/elasticsearch-7.2.0/config[root@vm03 config]# lltotal 40-rw-rw----. 1 es es 199 Aug 27 15:56 elasticsearch.keystore-rw-rw----. 1 es es 2831 Jun 20 23:50 elasticsearch.yml-rw-rw----. 1 es es 3524 Jun 20 23:50 jvm.options-rw-rw----. 1 es es 17170 Jun 20 23:56 log4j2.properties-rw-rw----. 1 es es 473 Jun 20 23:56 role_mapping.yml-rw-rw----. 1 es es 197 Jun 20 23:56 roles.yml-rw-rw----. 1 es es 0 Jun 20 23:56 users-rw-rw----. 1 es es 0 Jun 20 23:56 users_roles[root@vm03 config]# cat elasticsearch.yml# ======================== Elasticsearch Configuration =========================## NOTE: Elasticsearch comes with reasonable defaults for most settings.# Before you set out to tweak and tune the configuration, make sure you# understand what are you trying to accomplish and the consequences.## The primary way of configuring a node is via this file. This template lists# the most important settings you may want to configure for a production cluster.## Please consult the documentation for further information on configuration options:# https://www.elastic.co/guide/en/elasticsearch/reference/index.html## ---------------------------------- Cluster -----------------------------------## Use a descriptive name for your cluster:#cluster.name: my-ES## ------------------------------------ Node ------------------------------------## Use a descriptive name for the node:#node.name: ES-1## Add custom attributes to the node:##node.attr.rack: r1## ----------------------------------- Paths ------------------------------------## Path to directory where to store the data (separate multiple locations by comma):#path.data: /u01/ESdata## Path to log files:#path.logs: /u01/ESdata/logs## ----------------------------------- Memory -----------------------------------## Lock the memory on startup:##bootstrap.memory_lock: true## Make sure that the heap size is set to about half the memory available# on the system and that the owner of the process is allowed to use this# limit.## Elasticsearch performs poorly when the system is swapping the memory.## ---------------------------------- Network -----------------------------------## Set the bind address to a specific IP (IPv4 or IPv6):#network.host: 172.18.4.13## Set a custom port for HTTP:#http.port: 9093transport.port: 9094## For more information, consult the network module documentation.## --------------------------------- Discovery ----------------------------------## Pass an initial list of hosts to perform discovery when this node is started:# The default list of hosts is ["127.0.0.1", "[::1]"]#discovery.seed_hosts: ["vm03:9094", "vm04:9094","vm05:9094"]## Bootstrap the cluster using an initial set of master-eligible nodes:#cluster.initial_master_nodes: ["ES-1", "ES-2","ES-3"]## For more information, consult the discovery and cluster formation module documentation.## ---------------------------------- Gateway -----------------------------------## Block initial recovery after a full cluster restart until N nodes are started:##gateway.recover_after_nodes: 3## For more information, consult the gateway module documentation.## ---------------------------------- Various -----------------------------------## Require explicit names when deleting indices:##action.destructive_requires_name: truehttp.cors.enabled: truehttp.cors.allow-origin: "*" 123456789发送到其他节点​```shell[root@vm03 apps]# for i in &#123;4,5&#125;&gt; do&gt; scp -r ./elasticearch/ vm0$i:/opt/apps/&gt; done; 从节点主要修改：node.name: ES-network.host: 172.18.4.1 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677cluster.name: my-ES## ------------------------------------ Node ------------------------------------## Use a descriptive name for the node:#node.name: ES-3## Add custom attributes to the node:##node.attr.rack: r1## ----------------------------------- Paths ------------------------------------## Path to directory where to store the data (separate multiple locations by comma):#path.data: /u01/ESdata## Path to log files:#path.logs: /u01/ESdata/logs## ----------------------------------- Memory -----------------------------------## Lock the memory on startup:##bootstrap.memory_lock: true## Make sure that the heap size is set to about half the memory available# on the system and that the owner of the process is allowed to use this# limit.## Elasticsearch performs poorly when the system is swapping the memory.## ---------------------------------- Network -----------------------------------## Set the bind address to a specific IP (IPv4 or IPv6):#network.host: 172.18.4.15## Set a custom port for HTTP:##http.port: 9200http.port: 9093transport.port: 9094## For more information, consult the network module documentation.## --------------------------------- Discovery ----------------------------------## Pass an initial list of hosts to perform discovery when this node is started:# The default list of hosts is ["127.0.0.1", "[::1]"]##discovery.seed_hosts: ["vm03", "vm04","vm05"]discovery.seed_hosts: ["vm03:9094", "vm04:9094","vm05:9094"]## Bootstrap the cluster using an initial set of master-eligible nodes:#cluster.initial_master_nodes: ["ES-1", "ES-2","ES-3"]## For more information, consult the discovery and cluster formation module documentation.## ---------------------------------- Gateway -----------------------------------## Block initial recovery after a full cluster restart until N nodes are started:##gateway.recover_after_nodes: 3## For more information, consult the gateway module documentation.## ---------------------------------- Various -----------------------------------## Require explicit names when deleting indices:##action.destructive_requires_name: truehttp.cors.enabled: truehttp.cors.allow-origin: "*" 从节点创建文件夹，增加es用户 123456789[root@vm04 config]# mkdir /u01/ESdata[root@vm04 config]# mkdir /u01/ESdata/logs[root@vm04 config]# adduser es[root@vm04 config]# passwd esChanging password for user es.New password:BAD PASSWORD: The password contains less than 1 uppercase lettersRetype new password:passwd: all authentication tokens updated successfully. 主从节点分别设置ES储存路径的权限和分组为es,es安装包的组和权限为es 12[root@vm03 bin]# chown -R es:es /u01/ESdata/[root@vm03 bin]# chown -R es:es /opt/apps/elasticearch/ 启动1234[root@vm04 bin]# pwd/opt/apps/elasticearch/elasticsearch-7.2.0/bin[root@vm04 bin]# su es[es@vm04 bin]$ ./elasticsearch 报错： 123[2019-08-27T17:35:24,355][INFO ][o.e.b.BootstrapChecks ] [ES-2] bound or publishing to a non-loopback address, enforcing bootstrap checksERROR: [1] bootstrap checks failed[1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144] 解决： 123456789101112131415161718[es@vm04 bin]$ exitexit[root@vm04 bin]# vi /etc/sysctl.conf[root@vm04 bin]# cat /etc/sysctl.conf# sysctl settings are defined through files in# /usr/lib/sysctl.d/, /run/sysctl.d/, and /etc/sysctl.d/.## Vendors settings live in /usr/lib/sysctl.d/.# To override a whole file, create a new file with the same in# /etc/sysctl.d/ and put new settings there. To override# only specific settings, add a file with a lexically later# name in /etc/sysctl.d/ and put new settings there.## For more information, see sysctl.conf(5) and sysctl.d(5).vm.max_map_count=655360[root@vm04 bin]# sysctl -pvm.max_map_count = 655360 重新启动]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kafka的学习安装使用]]></title>
    <url>%2F2019%2F08%2F27%2FBigData%2Fkafka%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[kafka简介kafka是什么？是一个消息中间件，消息队列。 kafka名词解释broker：安装了kafka的节点message：消息（要存储的数据）topic：主题partition：分区replica：副本&emsp;主题是由分区的，写入某主题的消息，只存在于一个分区中&emsp;一个节点的不同分区是有leader和follower的&emsp;一个数据的副本也是有leader和follower的&emsp;分区的leader和副本的leader是同一个leader&emsp;但是每一个节点都只能有一个leader&emsp;如果一个节点挂掉，且此节点的副本刚好是leader，则此副本的相应副本，本事follower则就上位成为leader&emsp;kafka有负载均衡机制，当挂掉的节点恢复，则又会恢复到一个节点只有一个leaderleader：某一个分区的管理者follower：其他分区的副本都是从从属这， 用于数据同步，如果leader挂掉，则follower上位producer：生产者，写数据consumer：消费者，读数据 消息队列的应用场景 异步处理：非核心流程异步化，提高系统响应性能 应用解耦：系统不是强耦合，消息接受者可以随意增加，而不需要修改消息发送者的代码。消息发送者的成功不依赖消息接受者（比如有些银行接口不稳定，但调用方并不需要依赖这些接口）不强依赖于非本系统的核心流程，对于非核心流程，可以放到消息队列中让消息消费者去按需消费，而不影响核心主流程最终一致性：最终一致性不是消息队列的必备特性，但确实可以依靠消息队列来做最终一致性的事情。先写消息再操作，确保操作完成后再修改消息状态。定时任务补偿机制实现消息可靠发送接收、业务操作的可靠执行，要注意消息重复与幂等设计所有不保证100%不丢消息的消息队列，理论上无法实现最终一致性。广播：只需要关心消息是否送达了队列，至于谁希望订阅，是下游的事情流量削峰与流控：当上下游系统处理能力存在差距的时候，利用消息队列做一个通用的“漏斗”。在下游有能力处理的时候，再进行分发。日志处理：将消息队列用在日志处理中，比如Kafka的应用，解决大量日志传输的问题消息通讯：消息队列一般都内置了高效的通信机制，因此也可以用于单纯的消息通讯，比如实现点对点消息队列或者聊天室等。 kafka的安装上传kafka压缩包，解压 123456789101112131415[root@vm03 kafka]# pwd/opt/apps/kafka[root@vm03 kafka]# lltotal 55876drwxr-xr-x. 6 root root 89 Jun 20 04:44 kafka_2.12-2.3.0-rw-r--r--. 1 root root 57215197 Aug 27 14:49 kafka_2.12-2.3.0.tgz[root@vm03 kafka]# cd kafka_2.12-2.3.0[root@vm03 kafka_2.12-2.3.0]# lltotal 52drwxr-xr-x. 3 root root 4096 Jun 20 04:44 bindrwxr-xr-x. 2 root root 4096 Jun 20 04:44 configdrwxr-xr-x. 2 root root 4096 Aug 27 14:50 libs-rw-r--r--. 1 root root 32216 Jun 20 04:43 LICENSE-rw-r--r--. 1 root root 337 Jun 20 04:43 NOTICEdrwxr-xr-x. 2 root root 44 Jun 20 04:44 site-docs 新建logs文件夹，作为kafka的储存路径 12345678910[root@vm03 kafka_2.12-2.3.0]# mkdir logs[root@vm03 kafka_2.12-2.3.0]# lltotal 52drwxr-xr-x. 3 root root 4096 Jun 20 04:44 bindrwxr-xr-x. 2 root root 4096 Jun 20 04:44 configdrwxr-xr-x. 2 root root 4096 Aug 27 14:50 libs-rw-r--r--. 1 root root 32216 Jun 20 04:43 LICENSEdrwxr-xr-x. 2 root root 6 Aug 27 14:50 logs-rw-r--r--. 1 root root 337 Jun 20 04:43 NOTICEdrwxr-xr-x. 2 root root 44 Jun 20 04:44 site-docs 修改kafka的参数 12345678910111213141516171819202122232425262728293031323334[root@vm03 kafka_2.12-2.3.0]# cd config/[root@vm03 config]# lltotal 68-rw-r--r--. 1 root root 906 Jun 20 04:43 connect-console-sink.properties-rw-r--r--. 1 root root 909 Jun 20 04:43 connect-console-source.properties-rw-r--r--. 1 root root 5321 Jun 20 04:43 connect-distributed.properties-rw-r--r--. 1 root root 883 Jun 20 04:43 connect-file-sink.properties-rw-r--r--. 1 root root 881 Jun 20 04:43 connect-file-source.properties-rw-r--r--. 1 root root 1552 Jun 20 04:43 connect-log4j.properties-rw-r--r--. 1 root root 2262 Jun 20 04:43 connect-standalone.properties-rw-r--r--. 1 root root 1221 Jun 20 04:43 consumer.properties-rw-r--r--. 1 root root 4727 Jun 20 04:43 log4j.properties-rw-r--r--. 1 root root 1925 Jun 20 04:43 producer.properties-rw-r--r--. 1 root root 6851 Jun 20 04:43 server.properties-rw-r--r--. 1 root root 1032 Jun 20 04:43 tools-log4j.properties-rw-r--r--. 1 root root 1169 Jun 20 04:43 trogdor.conf-rw-r--r--. 1 root root 1023 Jun 20 04:43 zookeeper.properties[root@vm03 config]# vi server.properties############################# Server Basics ############################## The id of the broker. This must be set to a unique integer for each broker.broker.id=0############################# Log Basics ############################## A comma separated list of directories under which to store log fileslog.dirs=/opt/apps/kafka/kafka_2.12-2.3.0/logs############################# Zookeeper ############################## Zookeeper connection string (see zookeeper docs for details).# This is a comma separated host:port pairs, each corresponding to a zk# server. e.g. "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002".# You can also append an optional chroot string to the urls to specify the# root directory for all kafka znodes.zookeeper.connect=172.18.4.11:2181,172.18.4.12:2181,172.18.4.13:2181,172.18.4.14:2181,172.18.4.15:2181 发送给其他节点 1234[root@vm03 apps]# for i in &#123;4,5&#125;&gt; do&gt; scp -r /opt/apps/kafka/ vm0$i:/opt/apps/&gt; done; 分别修改其他节点的kafka的brokerid 123456789[root@vm04 config]# vi server.properties############################# Server Basics ############################## The id of the broker. This must be set to a unique integer for each broker.broker.id=1[root@vm05 config]# vi server.properties############################# Server Basics ############################## The id of the broker. This must be set to a unique integer for each broker.broker.id=2 命令启动：各节点分别启动 123[root@vm04 kafka_2.12-2.3.0]# pwd/opt/apps/kafka/kafka_2.12-2.3.0[root@vm04 kafka_2.12-2.3.0]# ./bin/kafka-server-start.sh ./config/server.properties]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Azkaban的安装使用]]></title>
    <url>%2F2019%2F08%2F23%2FBigData%2FAzkaban%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[下载azkaban 的资源下载链接：https://pan.baidu.com/s/1XGSg2rBU3jJruOnGm7x1VQ 密码：thd3 上传解压12345678910111213[root@vm01 azkaban]# tar -zxvf azkaban-sql-script-2.5.0.tar.gz[root@vm01 azkaban]# unzip -o azkaban-executor-2.5.0.zip[root@vm01 azkaban]# unzip azkaban-web-2.5.0.zip[root@vm01 azkaban]# lltotal 22720drwxr-xr-x 2 root root 4096 Aug 23 17:34 azkaban-2.5.0drwxr-xr-x 7 root root 92 Dec 3 2015 azkaban-executor-2.5.0-rw-r--r-- 1 root root 11150318 Aug 23 17:33 azkaban-executor-2.5.0.zip-rw-r--r-- 1 root root 1928 Aug 23 17:33 azkaban-sql-script-2.5.0.tar.gzdrwxr-xr-x 8 root root 103 Dec 3 2015 azkaban-web-2.5.0-rw-r--r-- 1 root root 12102703 Aug 23 17:33 azkaban-web-2.5.0.zip[root@vm01 azkaban]# pwd/opt/apps/azkaban 存储库操作123456create database azkaban;grant all on azkaban.* to 'root'@'%' identified by 'Mysql_123456';grant all on azkaban.* to 'root'@'vm01' identified by 'Mysql_123456';flush privileges;use azkaban;source /opt/apps/azkaban/azkaban-2.5.0/create-all-sql-2.5.0.sql; 安装ssl安全认证cd到azkaban-web目录 12345678910[root@vm01 azkaban]# cd /opt/apps/azkaban/azkaban-web-2.5.0[root@vm01 azkaban-web-2.5.0]# lltotal 8-rw-r--r-- 1 root root 105 Apr 22 2014 azkaban.versiondrwxr-xr-x 2 root root 112 Dec 3 2015 bindrwxr-xr-x 2 root root 57 Dec 3 2015 confdrwxr-xr-x 2 root root 6 Apr 22 2014 extlibdrwxr-xr-x 2 root root 4096 Dec 3 2015 libdrwxr-xr-x 2 root root 6 Apr 22 2014 pluginsdrwxr-xr-x 6 root root 73 Dec 3 2015 web 执行命令： keytool -keystore keystore -alias jetty -genkey -keyalg RSA 123456789101112131415161718192021222324[root@vm01 azkaban-web-2.5.0]# keytool -keystore keystore -alias jetty -genkey -keyalg RSAEnter keystore password:azkabanRe-enter new password:What is your first and last name? [Unknown]:What is the name of your organizational unit? [Unknown]:What is the name of your organization? [Unknown]:What is the name of your City or Locality? [Unknown]:What is the name of your State or Province? [Unknown]:What is the two-letter country code for this unit? [Unknown]:Is CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown correct? [no]: YEnter key password for &lt;jetty&gt; (RETURN if same as keystore password):Re-enter new password:Warning:The JKS keystore uses a proprietary format. It is recommended to migrate to PKCS12 which is an industry standard format using "keytool -importkeystore -srckeystore keystore -destkeystore keystore -deststoretype pkcs12". 设置时区为beijing/shanghai如果时区准确就不用设置了 查看： 12[root@vm01 azkaban-web-2.5.0]# date -RFri, 23 Aug 2019 17:52:36 +0800 +0800:东八区-0800:西八区 设置： tzselect]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Azkaban</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[西安项目政府外网大数据平台安装记录]]></title>
    <url>%2F2019%2F08%2F22%2FToWork%2F%E6%94%BF%E5%BA%9C%E5%A4%96%E7%BD%91%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E5%AE%89%E8%A3%85%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[服务器情况简介目前5台服务器处于172段，使用政务云的服务器。无法连接外网，内网是互通的。使用59段的ip对172段的进行映射，然后外部使用工具连接59段，进而控制172段的某台节点。再使用此节点免密登录其他机器进行控制。 特别之处自定义yum源使用4.11作为主服务器，并且自定义为yum源，使集群内网环境yum安装直接连接4.11的自定义yum，这些安装包提前都已下载好了，方法详见：http://www.zzditto.cn/2019/08/19/HDP%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0yum%E6%BA%90/ 主服务器的local_yum.repo设置为： 123456[root@vm01 yum.repos.d]# cat local_yum.repo[local_yum]name=CentOS-Localbaseurl=file:///var/www/html/local_yumgpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 其他服务器的local_yum.repo设置为： 123456[root@vm02 yum.repos.d]# cat local_yum.repo[local_yum]name=CentOS-Localbaseurl=http://172.18.4.11/local_yum/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 注：web浏览器无法访问172段，但是可以通过59段映射访问。但在集群内部设置地址时，应设置为集群内部可以访问的地址，即172段地址。 自定义HDP源设置同上，对于其他节点。设置地址时，设置为内部访问的地址，即172地址。 mysql原本安装的mysql服务。只安装了client和server，缺少lib和common。卸载重装，结果在删除的时候，删除了mysql.sock。安装之后无法打开。正确步骤：安装mysql服务安装mariadb服务 安装mysql出现，公匙检查不通过 12345678910Total 94 MB/s | 31 MB 00:00:00Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7The GPG keys listed for the "CentOS-Local" repository are already installed but they are not correct for this package.Check that the correct key URLs are configured for this repository. Failing package is: mysql-community-libs-compat-5.7.27-1.el7.x86_64 GPG Keys are configured as: file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7 解决：使用 yum install xxx.rpm –nogpgcheck跳过公钥检查 1[root@vm02 mysql]# yum -y install mysql --nogpgcheck 安装成功后，启动mysql服务： 12[root@vm02 mysql]# systemctl start mysqldFailed to start mysqld.service: Unit not found. 启动失败，需要安装mariadb-server服务 123[root@vm02 mysql]# yum -y install mariadb-server --nogpgcheck[root@vm02 mysql]# systemctl start mysqld 启动成功 mysql执行命令1234567891011121314151617181920212223242526272829303132333435CREATE DATABASE ambari; use ambari; CREATE USER 'ambari'@'%' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%'; CREATE USER 'ambari'@'localhost' IDENTIFIED BY 'Mysql_123456';GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'localhost'; CREATE USER 'ambari'@'master' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'master'; FLUSH PRIVILEGES; source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql show tables; use mysql; select Host,User Password from user where user='ambari'; CREATE DATABASE hive; use hive; CREATE USER 'hive'@'%' IDENTIFIED BY 'Mysql_123456';GRANT ALL PRIVILEGES ON *.* TO 'hive'@'%'; CREATE USER 'hive'@'localhost' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'localhost'; CREATE USER 'hive'@'master' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'master'; FLUSH PRIVILEGES; CREATE DATABASE oozie; use oozie; CREATE USER 'oozie'@'%' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'%'; CREATE USER 'oozie'@'localhost' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'localhost';CREATE USER 'oozie'@'master' IDENTIFIED BY 'Mysql_123456'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'master';FLUSH PRIVILEGES; ambari-server setup123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051[root@vm01 mysql-connector-java-5.1.47]# ambari-server setupUsing python /usr/bin/pythonSetup ambari-serverChecking SELinux...SELinux status is 'disabled'Customize user account for ambari-server daemon [y/n] (n)? yEnter user account for ambari-server daemon (root):Adjusting ambari-server permissions and ownership...Checking firewall status...Checking JDK...[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7[3] Custom JDK==============================================================================Enter choice (1): 3WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.WARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.Path to JAVA_HOME: /home/jdk1.8.0_181Validating JDK on Ambari Server...done.Checking GPL software agreement...GPL License for LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.htmlEnable Ambari Server to download and install GPL Licensed LZO packages [y/n] (n)? yCompleting setup...Configuring database...Enter advanced database configuration [y/n] (n)? yConfiguring database...==============================================================================Choose one of the following options:[1] - PostgreSQL (Embedded)[2] - Oracle[3] - MySQL / MariaDB[4] - PostgreSQL[5] - Microsoft SQL Server (Tech Preview)[6] - SQL Anywhere[7] - BDB==============================================================================Enter choice (1): 3Hostname (localhost): vm01Port (3306):Database name (ambari):Username (ambari):Enter Database Password (bigdata):bigdataConfiguring ambari database...Configuring remote database connection properties...WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sqlProceed with configuring remote database connection properties [y/n] (y)? yExtracting system views...ambari-admin-2.6.2.2.1.jar...........Adjusting ambari-server permissions and ownership...Ambari Server 'setup' completed successfully. 启动ambari-server出错查看日志： 12345678910111223 Aug 2019 11:19:23,451 ERROR [main] DBAccessorImpl:119 - Error while creating database accessorjava.sql.SQLException: Access denied for user 'ambari'@'vm01' (using password: YES) at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:965) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3978) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3914) at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:871) at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1714) at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1224) at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2199) at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2230) at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2025) at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:778) 尝试：增加 ‘ambari’@’vm01’ 的远程登录 12345mysql&gt; grant all privileges on *.* to 'ambari'@'vm01' identified by 'Mysql_123456';Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) 不能解决。猜测上面远程登录的密码应该为bigdata【即ambari设置时设置的密码，但是使用此密码报不符合此密码策略】所以，修改mysql的登录密码为Mysql_123456。然后设置ambari时密码也为Mysql_123456 12345678mysql&gt; use mysql;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; update user set authentication_string=passworD("Mysql_123456") where user='root';Query OK, 2 rows affected, 1 warning (0.00 sec)Rows matched: 2 Changed: 2 Warnings: 1 重启mysql使用Navicat删除ambari安装时创建的数据库和mysql数据库的user数据 再重新设置ambari-server setup，ambari库设置密码为Mysql_123456 EOF occurred in violation of protocol安装过程中报错信息如下： 1234567INFO 2019-08-23 13:24:08,381 PingPortListener.py:50 - Ping port listener started on port: 8670INFO 2019-08-23 13:24:08,385 main.py:439 - Connecting to Ambari server at https://vm01:8440 (172.18.4.11)INFO 2019-08-23 13:24:08,385 NetUtil.py:70 - Connecting to https://vm01:8440/caERROR 2019-08-23 13:24:08,549 NetUtil.py:96 - EOF occurred in violation of protocol (_ssl.c:618)ERROR 2019-08-23 13:24:08,549 NetUtil.py:97 - SSLError: Failed to connect. Please check openssl library versions.Refer to: https://bugzilla.redhat.com/show_bug.cgi?id=1022468 for more details.WARNING 2019-08-23 13:24:08,550 NetUtil.py:124 - Server at https://vm01:8440 is not reachable, sleeping for 10 seconds... 解决： 12345678910By adding below config in [security] section ofvi /etc/ambari-agent/conf/ambari-agent.ini[security]force_https_protocol=PROTOCOL_TLSv1_2vi /etc/python/cert-verification.cfg[https]verify=disable 参考：https://community.hortonworks.com/questions/218070/ambari-automatic-registration-failed-step-3-confir-1.htmlhttps://my.oschina.net/aubao/blog/1920933 hdfs写spark本地读取hdfs文件时，修改主机名为59段的地址 123val session=SparkSession.builder().master("local[*]").appName(this.getClass.getSimpleName).getOrCreate() val src = session.read.textFile("hdfs://59.218.251.29:8020/test/wd.txt") src.show(20) 但是报错，因为hdfs的3个副本，在不同的服务器，无法直接相连 1219/08/23 16:34:54 WARN DFSClient: Failed to connect to /172.18.4.15:50010 for block, add to deadNodes and continue. java.net.ConnectException: Connection timed out: no further informationjava.net.ConnectException: Connection timed out: no further information 所以要想在本地测试读取hdfs文件，需要将其下载，或者在saprk-shell命令行操作 12345scala&gt; sc.textFile("hdfs://172.18.4.11:8020/test/wd.txt")res2: org.apache.spark.rdd.RDD[String] = hdfs://172.18.4.11:8020/test/wd.txt MapPartitionsRDD[1] at textFile at &lt;console&gt;:25scala&gt; res2.take(10).toListres8: List[String] = List(html,css,hello,css,spark,html,spark,hahah,hello,nihao,, css,hi,hahah,css,hi,hahah,hello,html,spark,spark,, nihao,html,word,html,word,word,hahah,hi,spark,html,, word,spark,word,hello,nihao,hi,nihao,hahah,css,nihao,, spark,html,nihao,spark,nihao,hi,hi,hahah,html,hahah,, word,hi,spark,hello,hi,spark,hello,hello,html,hi,, word,hi,hello,nihao,css,css,spark,hello,hi,spark,, hi,hi,nihao,hahah,css,hahah,hello,spark,hahah,spark,, hello,hi,css,html,css,word,word,hi,hahah,hello,, hahah,spark,html,spark,hi,hahah,hi,css,nihao,nihao,) 但在集群中可以正常运行，读取测试 namendoe启动报错： 122019-08-23 17:29:08,923 - Retrying after 10 seconds. Reason: Execution of '/usr/hdp/current/hadoop-hdfs-namenode/bin/hdfs dfsadmin -fs hdfs://vm01:8020 -safemode get | grep 'Safe mode is OFF'' returned 1. /etc/profile: line 87: [=]: command not found/etc/profile: line 87: [=]: command not found 解决： 12[hdfs@vm01 liu]$ hdfs dfsadmin -safemode leaveSafe mode is OFF]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[yum下载rpm以及依赖包]]></title>
    <url>%2F2019%2F08%2F19%2FBigData%2Fyum%E4%B8%8B%E8%BD%BDrpm%E4%BB%A5%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%8C%85%2F</url>
    <content type="text"><![CDATA[前言yum源的存在使得linux上软件安装变的方便快捷，但在实际的生产环境中，都是内网，离线环境，无法有效的使用yum安装。所以我们需要自定义yum源，而自定的yum源的软件包可以通过以下两种方法下载。需要联网且系统应处于什么都没有安装的阶段，防止某些依赖包不被下载下来。 Downloadonly [yum自身附带的命令]123456#下载wget示例yum install --downloadonly wgetyum install --downloadonly --downloaddir=/opt/apps/wget wget#--downloaddir=/opt/apps/wget:指定下载的目录#如果不指定，默认目录：/var/cache/yum/ 的 rhel-&#123;arch&#125;-channel/packageslocation 目录 Yumdownloader [专门的yum包下载工具，需要安装]123456789101112#安装Yumdownloader插件yum install yum-utils#下载单独的软件包yumdownloader httpd#下载软件包以及依赖包yumdownloader --resolve httpd#指定目录。如果不指定，下载目录在程序执行所在的目录yumdownloader --resolve --destdir=/root/mypackages/ httpdyumdownloader --resolve --destdir /root/mypackages/ httpd linux系统下下载mysql5.7.27安装包及其依赖示例下载 MySQL Yum Repositoryhttps://dev.mysql.com/downloads/repo/yum/注：目前mysql版本为8.0，下载此rpm，可通过编辑repo文件，获取5.7.27版本mysql 上传到linux，并安装123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135root@test mysql]# rpm -ivh mysql80-community-release-el7-3.noarch.rpm#可以看到含有了mysql，但是版本为8.0[root@test mysql]# yum list | grep mysqlmysql80-community-release.noarch el7-3 installedakonadi-mysql.x86_64 1.9.2-4.el7 baseapr-util-mysql.x86_64 1.5.2-6.el7 basedovecot-mysql.x86_64 1:2.2.36-3.el7 basefreeradius-mysql.x86_64 3.0.13-10.el7_6 updateslibdbi-dbd-mysql.x86_64 0.8.3-16.el7 basemysql-community-client.i686 8.0.17-1.el7 mysql80-communitymysql-community-client.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-common.i686 8.0.17-1.el7 mysql80-communitymysql-community-common.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-devel.i686 8.0.17-1.el7 mysql80-communitymysql-community-devel.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-embedded-compat.i686 8.0.17-1.el7 mysql80-communitymysql-community-embedded-compat.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-libs.i686 8.0.17-1.el7 mysql80-communitymysql-community-libs.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-libs-compat.i686 8.0.17-1.el7 mysql80-communitymysql-community-libs-compat.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-release.noarch el7-5 mysql-connectors-communitymysql-community-server.x86_64 8.0.17-1.el7 mysql80-communitymysql-community-test.x86_64 8.0.17-1.el7 mysql80-communitymysql-connector-c++.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-c++-debuginfo.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-c++-devel.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-c++-jdbc.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-java.noarch 1:5.1.25-3.el7 basemysql-connector-odbc.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-odbc-debuginfo.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-odbc-setup.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-python.noarch 2.0.4-1.el7 mysql-connectors-communitymysql-connector-python.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-python-cext.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-python-debuginfo.x86_64 2.1.7-1.el7 mysql-connectors-communitymysql-ref-manual-8.0-en-html-chapter.noarch 1-20190627 mysql80-communitymysql-ref-manual-8.0-en-pdf.noarch 1-20190627 mysql80-communitymysql-router.x86_64 8.0.12-1.el7 mysql-tools-communitymysql-router-community.x86_64 8.0.17-1.el7 mysql-tools-communitymysql-router-debuginfo.x86_64 8.0.12-1.el7 mysql-tools-communitymysql-shell.x86_64 8.0.17-1.el7 mysql-tools-communitymysql-shell-debuginfo.x86_64 8.0.17-1.el7 mysql-tools-communitymysql-utilities.noarch 1.6.5-1.el7 mysql-tools-communitymysql-utilities-extra.noarch 1.5.6-1.el7 mysql-tools-communitymysql-workbench-community.x86_64 8.0.17-1.el7 mysql-tools-communitymysql-workbench-community-debuginfo.x86_64 8.0.17-1.el7 mysql-tools-communitypcp-pmda-mysql.x86_64 4.1.0-5.el7_6 updatesphp-mysql.x86_64 5.4.16-46.el7 basephp-mysqlnd.x86_64 5.4.16-46.el7 baseqt-mysql.i686 1:4.8.7-3.el7_6 updatesqt-mysql.x86_64 1:4.8.7-3.el7_6 updatesqt5-qtbase-mysql.i686 5.9.2-3.el7 baseqt5-qtbase-mysql.x86_64 5.9.2-3.el7 baseredland-mysql.x86_64 1.0.16-6.el7 basersyslog-mysql.x86_64 8.24.0-34.el7 base[root@test mysql]# vi /etc/yum.repos.d/mysql-community.repo# Enable to use MySQL 5.5[mysql55-community]name=MySQL 5.5 Community Serverbaseurl=http://repo.mysql.com/yum/mysql-5.5-community/el/7/$basearch/enabled=0gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql# Enable to use MySQL 5.6[mysql56-community]name=MySQL 5.6 Community Serverbaseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/7/$basearch/enabled=0gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql# Enable to use MySQL 5.7# enabled = 1[mysql57-community]name=MySQL 5.7 Community Serverbaseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/enabled=1gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql# enabled = 0[mysql80-community]name=MySQL 8.0 Community Serverbaseurl=http://repo.mysql.com/yum/mysql-8.0-community/el/7/$basearch/enabled=0gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql[mysql-connectors-community]name=MySQL Connectors Communitybaseurl=http://repo.mysql.com/yum/mysql-connectors-community/el/7/$basearch/enabled=1gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql[root@test mysql]# yum clean all[root@test mysql]# yum repolist#可以看到，大部分已经变为5.7版本[root@test mysql]# yum list | grep mysqlmysql80-community-release.noarch el7-3 installedakonadi-mysql.x86_64 1.9.2-4.el7 baseapr-util-mysql.x86_64 1.5.2-6.el7 basedovecot-mysql.x86_64 1:2.2.36-3.el7 basefreeradius-mysql.x86_64 3.0.13-10.el7_6 updateslibdbi-dbd-mysql.x86_64 0.8.3-16.el7 basemysql-community-client.i686 5.7.27-1.el7 mysql57-communitymysql-community-client.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-common.i686 5.7.27-1.el7 mysql57-communitymysql-community-common.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-devel.i686 5.7.27-1.el7 mysql57-communitymysql-community-devel.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-embedded.i686 5.7.27-1.el7 mysql57-communitymysql-community-embedded.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-embedded-compat.i686 5.7.27-1.el7 mysql57-communitymysql-community-embedded-compat.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-embedded-devel.i686 5.7.27-1.el7 mysql57-communitymysql-community-embedded-devel.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-libs.i686 5.7.27-1.el7 mysql57-communitymysql-community-libs.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-libs-compat.i686 5.7.27-1.el7 mysql57-communitymysql-community-libs-compat.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-release.noarch el7-5 mysql-connectors-communitymysql-community-server.x86_64 5.7.27-1.el7 mysql57-communitymysql-community-test.x86_64 5.7.27-1.el7 mysql57-communitymysql-connector-c++.x86_64 8.0.17-1.el7 mysql-connectors-communitymysql-connector-c++-debuginfo.x86_64 8.0.17-1.el7 mysql-connectors-community# 下载其安装包和依赖包[root@test mysql]# yum install --downloadonly --downloaddir=/opt/apps/mysql mysql-community-server.x86_64]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Yum</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HDP离线安装制作本地yum源]]></title>
    <url>%2F2019%2F08%2F19%2FBigData%2FHDP%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0yum%E6%BA%90%2F</url>
    <content type="text"><![CDATA[前言YUM 源可以简化在 Linux 上安装软件的过程，但是生产环境通常无法上网，不能连接外网的 YUM 源，所以就无法使用 YUM 命令安装软件了。为了在内网中也可以使用 YUM 安装相关的软件，就需要配置本地 YUM 源了。 yum源原理单独使用：将一系列需要用到的rpm包提前下载保存到某个文件夹，使用createrepo创建新的repo，创建自定义repo文件，添加路径，则就可以直接在这个路径下使用里面的安装包安装软件 集群使用：使用http工具，是的内网中的各个机器能够获取到自定义yum的机器的yum仓库地址，并自定义repo文件，添加路径，即可使用自定义yum源的安装包安装软件 制作步骤安装httpd服务： 12345678910111213141516171819202122232425262728293031323334353637383940[root@test httpd]# pwd/opt/apps/httpd[root@test httpd]# ll总用量 3100-rw-r--r--. 1 root root 105728 8月 19 15:17 apr-1.4.8-3.el7_4.1.x86_64.rpm-rw-r--r--. 1 root root 94132 8月 19 15:17 apr-util-1.5.2-6.el7.x86_64.rpm-rw-r--r--. 1 root root 2844140 8月 19 15:17 httpd-2.4.6-89.el7.centos.1.x86_64.rpm-rw-r--r--. 1 root root 92776 8月 19 15:17 httpd-tools-2.4.6-89.el7.centos.1.x86_64.rpm-rw-r--r--. 1 root root 31264 8月 19 15:17 mailcap-2.1.41-2.el7.noarch.rpm[root@test httpd]# rpm -ivh apr-1.4.8-3.el7_4.1.x86_64.rpm警告：apr-1.4.8-3.el7_4.1.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:apr-1.4.8-3.el7_4.1 ################################# [100%][root@test httpd]# rpm -ivh apr-util-1.5.2-6.el7.x86_64.rpm警告：apr-util-1.5.2-6.el7.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:apr-util-1.5.2-6.el7 ################################# [100%][root@test httpd]# rpm -ivh mailcap-2.1.41-2.el7.noarch.rpm警告：mailcap-2.1.41-2.el7.noarch.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:mailcap-2.1.41-2.el7 ################################# [100%][root@test httpd]# rpm -ivh httpd-tools-2.4.6-89.el7.centos.1.x86_64.rpm警告：httpd-tools-2.4.6-89.el7.centos.1.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:httpd-tools-2.4.6-89.el7.centos.1################################# [100%][root@test httpd]# rpm -ivh httpd-2.4.6-89.el7.centos.1.x86_64.rpm警告：httpd-2.4.6-89.el7.centos.1.x86_64.rpm: 头V3 RSA/SHA256 Signature, 密钥 ID f4a80eb5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:httpd-2.4.6-89.el7.centos.1 ################################# [100%][root@test httpd]# systemctl start httpd[root@test httpd]# systemctl enable httpdCreated symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service. 在httpd服务目录下创建local_yum,并网页登录监测 1234[root@test local_yum]# pwd/var/www/html/[root@test html]# mkdir local_yum 修改yum源为网易云： 12345[root@test postgresql]# yum -y install wget[root@test postgresql]# mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo_bak[root@test postgresql]# wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.163.com/.help/CentOS7-Base-163.repo[root@test postgresql]# yum clean all[root@test postgresql]# yum makecache 下载HDP安装所需的rpm及依赖包: 123456789101112[root@test local_yum]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/ntp ntp[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/postgresql postgresql[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/libmpc.so.3 libmpc[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/libmpfr.so.4 mpfr[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/redhat-lsb redhat-lsb[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/createrepo createrepo[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/gcc gcc[root@test postgresql]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/python-devel python-devel[root@test libtirpc-devel]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/libtirpc-devel libtirpc-devel[root@test libtirpc-devel]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/redhat-lsb-core redhat-lsb-core[root@test libtirpc-devel]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/mariadb mariadb[root@test local_yum]# yum install --downloadonly --downloaddir=/var/www/html/local_yum/yum-plugin-priorities yum-plugin-priorities 安装createrepo： 1234567891011121314151617181920212223[root@test local_yum]# cd createrepo/[root@test createrepo]# ll总用量 460-rw-r--r--. 1 root root 95840 8月 10 2017 createrepo-0.9.9-28.el7.noarch.rpm-rw-r--r--. 1 root root 83984 7月 4 2014 deltarpm-3.6-3.el7.x86_64.rpm-rw-r--r--. 1 root root 252528 6月 24 2016 libxml2-python-2.9.1-6.el7_2.3.x86_64.rpm-rw-r--r--. 1 root root 32084 7月 4 2014 python-deltarpm-3.6-3.el7.x86_64.rpm[root@test createrepo]# rpm -ivh deltarpm-3.6-3.el7.x86_64.rpm准备中... ################################# [100%]正在升级/安装... 1:deltarpm-3.6-3.el7 ################################# [100%][root@test createrepo]# rpm -ivh python-deltarpm-3.6-3.el7.x86_64.rpm准备中... ################################# [100%]正在升级/安装... 1:python-deltarpm-3.6-3.el7 ################################# [100%][root@test createrepo]# rpm -ivh libxml2-python-2.9.1-6.el7_2.3.x86_64.rpm准备中... ################################# [100%]正在升级/安装... 1:libxml2-python-2.9.1-6.el7_2.3 ################################# [100%][root@test createrepo]# rpm -ivh createrepo-0.9.9-28.el7.noarch.rpm准备中... ################################# [100%]正在升级/安装... 1:createrepo-0.9.9-28.el7 ################################# [100%] 制作yum本地源： 12345678910111213141516171819202122[root@test local_yum]# createrepo /var/www/html/local_yum/[root@test local_yum]# cd /etc/yum.repos.d/[root@test yum.repos.d]# ll总用量 36-rw-r--r--. 1 root root 1572 12月 1 2016 CentOS-Base.repo-rw-r--r--. 1 root root 1664 11月 23 2018 CentOS-Base.repo_bak-rw-r--r--. 1 root root 1309 11月 23 2018 CentOS-CR.repo-rw-r--r--. 1 root root 649 11月 23 2018 CentOS-Debuginfo.repo-rw-r--r--. 1 root root 314 11月 23 2018 CentOS-fasttrack.repo-rw-r--r--. 1 root root 630 11月 23 2018 CentOS-Media.repo-rw-r--r--. 1 root root 1331 11月 23 2018 CentOS-Sources.repo-rw-r--r--. 1 root root 5701 11月 23 2018 CentOS-Vault.repo[root@test yum.repos.d]# vi local_yum.repo[root@test yum.repos.d]# cat local_yum.repo[local_yum]name=CentOS-Localbaseurl=file:///var/www/html/local_yumgpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[root@test local_yum]# yum clean all[root@test local_yum]# yum repolist#local_yum的status应该不为0 其他节点的repo设置： 12345678910[root@test yum.repos.d]# vi local_yum.repo[root@test yum.repos.d]# cat local_yum.repo[local_yum]name=CentOS-Localbaseurl=http://192.168.133.11/local_yum/gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7[root@test local_yum]# yum clean all[root@test local_yum]# yum repolist#local_yum的status应该不为0 http服务目录文件如下：]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
        <tag>Yum</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[西安项目服务器说明]]></title>
    <url>%2F2019%2F08%2F16%2FToWork%2F%E8%A5%BF%E5%AE%89%E9%A1%B9%E7%9B%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%B4%E6%98%8E%2F</url>
    <content type="text"><![CDATA[大数据平台服务器和数据服务器数量：8台系统：centos7语言：English系统环境: 虚拟化主机 【注意：默认安装的话，为最小化安装，最小化安装缺少mysql安装的某些组件环境】系统分区情况：&emsp;root：100G&emsp;swap: 同内存大小&emsp;home：40G&emsp;数据盘：剩余容量 web页面访问ip及端口开放 【针对5台大数据平台服务器】映射地址设置（假设）：| 服务器地址 | 映射地址 || — | — || 172.18.4.11 | 59.218.251.11 || 172.18.4.12 | 59.218.251.12 || 172.18.4.13 | || 172.18.4.14 | || 172.18.4.15 | | httpd 服务器地址 映射地址 172.18.4.11：80 59.218.251.11：80 mysql 服务器ip: port 映射 172.18.4.11：3306 59.218.251.11：3306 172.18.4.12：3306 59.218.251.12：3306 Ambari 服务器ip: port 映射 172.18.4.11:8080 59.218.251.11：8080 hdfs 服务器ip: port 映射 172.18.4.11：50070 59.218.251.11：50070 服务器ip: port 映射 172.18.4.11：8020 59.218.251.11：8020 服务器ip: port 映射 172.18.4.11：50075 59.218.251.11：50075 172.18.4.12：50075 59.218.251.12：50075 172.18.4.13：50075 172.18.4.13：50075 172.18.4.15：50075 yarn 服务器ip: port 映射 172.18.4.11：8088 59.218.251.11：8088 172.18.4.12：8088 59.218.251.12：8088 mapreduce 服务器ip: port 映射 172.18.4.11：19888 59.218.251.11：19888 172.18.4.12：19888 59.218.251.12：19888 grafara 服务器ip: port 映射 172.18.4.11：3000 59.218.251.11：3000 hbase 服务器ip: port 映射 172.18.4.11：16010 59.218.251.11：16010 服务器ip: port 映射 172.18.4.11：16020 59.218.251.11：16020 172.18.4.12：16020 59.218.251.12：16020 172.18.4.13：16020 172.18.4.14：16020 172.18.4.15：16020 服务器ip: port 映射 172.18.4.11：16030 59.218.251.11：16030 172.18.4.12：16030 59.218.251.12：16030 172.18.4.13：16030 172.18.4.14：16030 172.18.4.15：16030 spark 服务器ip: port 映射 172.18.4.11：18081 59.218.251.11：18081 服务器ip: port 映射 172.18.4.11：8042 59.218.251.11：8042 172.18.4.12：8042 59.218.251.12：8042 172.18.4.13：8042 172.18.4.14：8042 172.18.4.15：8042 服务器ip: port 映射 172.18.4.11：8088 59.218.251.11：8088 172.18.4.12：8088 59.218.251.12：8088 172.18.4.13：8088 172.18.4.14：8088 172.18.4.15：8088 solo 服务器ip: port 映射 172.18.4.11：8886 59.218.251.11：8886 172.18.4.12：8989 59.218.251.12：8989 zeppelin 服务器ip: port 映射 172.18.4.11：9995 59.218.251.11：9995 172.18.4.11：9060 59.218.251.11：9060 ranger 服务器ip: port 映射 172.18.4.11：6080 59.218.251.11：6080 redis 服务器ip: port 映射 172.18.4.11：6379 59.218.251.11：6379 172.18.4.12：6379 59.218.251.12：6379 172.18.4.13：6379 172.18.4.14：6379 172.18.4.15：6379 azkaban 服务器ip: port 映射 172.18.4.11：8443 59.218.251.11：8443 172.18.4.12：8443 59.218.251.12：8443 其他 服务器ip: port 映射 172.18.4.12：9100 59.218.251.12：9100 服务器ip: port 映射 172.18.4.12：5601 59.218.251.12：5601 3台数据服务器端口：3台服务器：80 ~ 100 ， 1234 服务器ip: port 映射 172.18.4.16：80~100,1234 172.18.4.17：80~100,1234 172.18.4.18：80~100,1234 172.18.4.253：80~100,1234 59.218.251.20：80~100,1234 注：4.20的ip目前没有服务器使用，但后续数据服务会用到，需要确保此ip无人使用，且与59段的20映射成功 数据服务器：mysql 用户：root 密码：Mysql@123456]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Linux添加用户]]></title>
    <url>%2F2019%2F08%2F16%2FBigData%2FLinux%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%2F</url>
    <content type="text"><![CDATA[添加用户123456789101112131415#3中方式添加用户[root@vm01 ~]# useradd -m ztgxHDP[root@vm01 ~]# adduser ztgxHDPadduser: user 'ztgxHDP' already exists#区别：useradd + 用户 不能在home文件夹创建同名文件夹[root@vm01 ~]# useradd ztgxHDPuseradd: user 'ztgxHDP' already exists#设置用户密码[root@vm01 ~]# passwd ztgxHDPChanging password for user ztgxHDP.New password:123456BAD PASSWORD: The password is shorter than 8 charactersRetype new password:123456passwd: all authentication tokens updated successfully. 删除用户123[root@vm01 ~]# userdel ztgxHDP#区别：-r 会删除此用户在home下的文件夹[root@vm01 ~]# userdel -r ztgxHDP 普通用户拥有root权限/etc/passwd 将用户名的id和id组修改为01234567[root@vm01 home]# vi /etc/passwdsshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologinntp:x:38:38::/etc/ntp:/sbin/nologinchrony:x:994:991::/var/lib/chrony:/sbin/nologintcpdump:x:72:72::/:/sbin/nologin#ztgxHDP:x:1000:1000::/home/ztgxHDP:/bin/bashztgxHDP:x:0:0::/home/ztgxHDP:/bin/bash /etc/sudoers1234567[root@vm03 etc]# chmod +w /etc/sudoers#### Allow root to run any commands anywhereroot ALL=(ALL) ALLztgxHDP ALL=(ALL) ALL## Allows members of the 'sys' group to run networking, software,]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HDP安装常见问题及解决]]></title>
    <url>%2F2019%2F08%2F14%2FBigData%2FHDP%E5%AE%89%E8%A3%85%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%2F</url>
    <content type="text"><![CDATA[Requires: redhat-lsb-core问题描述： 12345678resource_management.core.exceptions.ExecutionFailed: Execution of '/usr/bin/yum -d 0 -e 0 -y install hbase_2_6_5_0_292' returned 1. Error: Package: hadoop_2_6_5_0_292-hdfs-2.7.3.2.6.5.0-292.x86_64 (HDP-2.6.5.0) Requires: libtirpc-develError: Package: hadoop_2_6_5_0_292-2.7.3.2.6.5.0-292.x86_64 (HDP-2.6.5.0) Requires: redhat-lsb-core You could try using --skip-broken to work around the problem** Found 2 pre-existing rpmdb problem(s), 'yum check' output follows:2:postfix-2.10.1-6.el7.x86_64 has missing requires of libmysqlclient.so.18()(64bit)2:postfix-2.10.1-6.el7.x86_64 has missing requires of libmysqlclient.so.18(libmysqlclient_18)(64bit) 解决：在新的机器上下载所需的软件包 12345678910111213141516171819202122232425262728293031323334[root@test apps]# yum -y install --downloadonly --downloaddir=/opt/apps/redhat-lsb-core redhat-lsb-core[root@test redhat-lsb-core]# ll总用量 1928-rw-r--r--. 1 root root 52232 11月 12 2018 at-3.1.13-24.el7.x86_64.rpm-rw-r--r--. 1 root root 62960 4月 25 2018 avahi-libs-0.6.31-19.el7.x86_64.rpm-rw-r--r--. 1 root root 117272 7月 4 2014 bc-1.06.95-13.el7.x86_64.rpm-rw-r--r--. 1 root root 154336 4月 25 2018 cups-client-1.6.3-35.el7.x86_64.rpm-rw-r--r--. 1 root root 365828 4月 25 2018 cups-libs-1.6.3-35.el7.x86_64.rpm-rw-r--r--. 1 root root 73448 7月 4 2014 ed-1.9-4.el7.x86_64.rpm-rw-r--r--. 1 root root 262480 11月 25 2015 m4-1.4.16-10.el7.x86_64.rpm-rw-r--r--. 1 root root 250776 4月 25 2018 mailx-12.5-19.el7.x86_64.rpm-rw-r--r--. 1 root root 112768 5月 10 2018 patch-2.7.1-10.el7_5.x86_64.rpm-rw-r--r--. 1 root root 144300 8月 11 2017 psmisc-22.20-15.el7.x86_64.rpm-rw-r--r--. 1 root root 38428 3月 27 2015 redhat-lsb-core-4.1-27.el7.centos.1.x86_64.rpm-rw-r--r--. 1 root root 15616 3月 27 2015 redhat-lsb-submod-security-4.1-27.el7.centos.1.x86_64.rpm-rw-r--r--. 1 root root 265768 7月 27 2015 spax-1.5.2-13.el7.x86_64.rpm-rw-r--r--. 1 root root 31064 7月 4 2014 time-1.7-45.el7.x86_64.rpm#安装顺序如下正在安装 : avahi-libs-0.6.31-19.el7.x86_64 1/14正在安装 : 1:cups-libs-1.6.3-35.el7.x86_64 2/14正在安装 : 1:cups-client-1.6.3-35.el7.x86_64 3/14正在安装 : bc-1.06.95-13.el7.x86_64 4/14正在安装 : m4-1.4.16-10.el7.x86_64 5/14正在安装 : psmisc-22.20-15.el7.x86_64 6/14正在安装 : ed-1.9-4.el7.x86_64 7/14正在安装 : patch-2.7.1-10.el7_5.x86_64 8/14正在安装 : mailx-12.5-19.el7.x86_64 9/14正在安装 : spax-1.5.2-13.el7.x86_64 10/14正在安装 : at-3.1.13-24.el7.x86_64 11/14正在安装 : time-1.7-45.el7.x86_64 12/14正在安装 : redhat-lsb-submod-security-4.1-27.el7.centos.1.x86_64 13/14正在安装 : redhat-lsb-core-4.1-27.el7.centos.1.x86_64 14/14 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677#安装代码[root@vm01 redhat-lsb-core]# rpm -ivh avahi-libs-0.6.31-19.el7.x86_64.rpmPreparing... ################################# [100%] file /usr/lib64/libavahi-client.so.3.2.9 from install of avahi-libs-0.6.31-19.el7.x86_64 conflicts with file from package avahi-libs-0.6.31-17.el7.x86_64 file /usr/lib64/libavahi-common.so.3.5.3 from install of avahi-libs-0.6.31-19.el7.x86_64 conflicts with file from package avahi-libs-0.6.31-17.el7.x86_64#说明系统中含有此软件，版本不同。卸载旧版本，安装新版本。[root@vm01 redhat-lsb-core]# rpm -e --nodeps avahi-libs-0.6.31-17.el7.x86_64[root@vm01 redhat-lsb-core]# rpm -ivh avahi-libs-0.6.31-19.el7.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:avahi-libs-0.6.31-19.el7 ################################# [100%][root@vm01 redhat-lsb-core]# rpm -ivh cups-libs-1.6.3-35.el7.x86_64.rpmPreparing... ################################# [100%] package cups-libs-1:1.6.3-35.el7.x86_64 is already installed#提示一句安装，版本相同，则不用卸载[root@vm01 redhat-lsb-core]# rpm -ivh cups-client-1.6.3-35.el7.x86_64.rpmPreparing... ################################# [100%] package cups-client-1:1.6.3-35.el7.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh bc-1.06.95-13.el7.x86_64.rpmPreparing... ################################# [100%] package bc-1.06.95-13.el7.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh m4-1.4.16-10.el7.x86_64.rpmPreparing... ################################# [100%] package m4-1.4.16-10.el7.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh psmisc-22.20-15.el7.x86_64.rpmPreparing... ################################# [100%] file /usr/bin/killall from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64 file /usr/bin/peekfd from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64 file /usr/bin/prtstat from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64 file /usr/bin/pstree from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64 file /usr/sbin/fuser from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64 file /usr/share/man/man1/fuser.1.gz from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64 file /usr/share/man/man1/peekfd.1.gz from install of psmisc-22.20-15.el7.x86_64 conflicts with file from package psmisc-22.20-11.el7.x86_64[root@vm01 redhat-lsb-core]# rpm -e --nodeps psmisc-22.20-11.el7.x86_64[root@vm01 redhat-lsb-core]# rpm -ivh psmisc-22.20-15.el7.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:psmisc-22.20-15.el7 ################################# [100%][root@vm01 redhat-lsb-core]# rpm -ivh ed-1.9-4.el7.x86_64.rpmPreparing... ################################# [100%] package ed-1.9-4.el7.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh patch-2.7.1-10.el7_5.x86_64.rpmPreparing... ################################# [100%] package patch-2.7.1-10.el7_5.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh mailx-12.5-19.el7.x86_64.rpmPreparing... ################################# [100%] file /bin/mailx from install of mailx-12.5-19.el7.x86_64 conflicts with file from package mailx-12.5-12.el7_0.x86_64 file /usr/share/man/man1/mailx.1.gz from install of mailx-12.5-19.el7.x86_64 conflicts with file from package mailx-12.5-12.el7_0.x86_64[root@vm01 redhat-lsb-core]# rpm -e --nodeps mailx-12.5-12.el7_0.x86_64[root@vm01 redhat-lsb-core]# rpm -ivh mailx-12.5-19.el7.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:mailx-12.5-19.el7 ################################# [100%][root@vm01 redhat-lsb-core]# rpm -ivh spax-1.5.2-13.el7.x86_64.rpmPreparing... ################################# [100%] package spax-1.5.2-13.el7.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh at-3.1.13-24.el7.x86_64.rpmPreparing... ################################# [100%] file /usr/sbin/atd from install of at-3.1.13-24.el7.x86_64 conflicts with file from package at-3.1.13-22.el7.x86_64 file /usr/bin/at from install of at-3.1.13-24.el7.x86_64 conflicts with file from package at-3.1.13-22.el7.x86_64 file /var/spool/at from install of at-3.1.13-24.el7.x86_64 conflicts with file from package at-3.1.13-22.el7.x86_64 file /usr/share/man/man8/atd.8.gz from install of at-3.1.13-24.el7.x86_64 conflicts with file from package at-3.1.13-22.el7.x86_64 file /var/spool/at/spool from install of at-3.1.13-24.el7.x86_64 conflicts with file from package at-3.1.13-22.el7.x86_64[root@vm01 redhat-lsb-core]# rpm -e --nodeps at-3.1.13-22.el7.x86_64[root@vm01 redhat-lsb-core]# rpm -ivh at-3.1.13-24.el7.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:at-3.1.13-24.el7 ################################# [100%][root@vm01 redhat-lsb-core]# rpm -ivh time-1.7-45.el7.x86_64.rpmPreparing... ################################# [100%] package time-1.7-45.el7.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh redhat-lsb-submod-security-4.1-27.el7.centos.1.x86_64.rpmPreparing... ################################# [100%] package redhat-lsb-submod-security-4.1-27.el7.centos.1.x86_64 is already installed[root@vm01 redhat-lsb-core]# rpm -ivh redhat-lsb-core-4.1-27.el7.centos.1.x86_64.rpmPreparing... ################################# [100%] package redhat-lsb-core-4.1-27.el7.centos.1.x86_64 is already installed 12345678910[root@test libtirpc-devel]# yum -y install --downloadonly --downloaddir=/opt/apps/other libtirpc-devel[root@test libtirpc-devel]# ll总用量 184-rw-r--r--. 1 root root 91124 11月 12 2018 libtirpc-0.2.4-0.15.el7.x86_64.rpm-rw-r--r--. 1 root root 93048 11月 12 2018 libtirpc-devel-0.2.4-0.15.el7.x86_64.rpm#安装顺序正在安装 : libtirpc-0.2.4-0.15.el7.x86_64 1/2正在安装 : libtirpc-devel-0.2.4-0.15.el7.x86_64 2/2 EOF occurred in violation of protocol安装过程中报错信息如下： 1234567INFO 2019-08-23 13:24:08,381 PingPortListener.py:50 - Ping port listener started on port: 8670INFO 2019-08-23 13:24:08,385 main.py:439 - Connecting to Ambari server at https://vm01:8440 (172.18.4.11)INFO 2019-08-23 13:24:08,385 NetUtil.py:70 - Connecting to https://vm01:8440/caERROR 2019-08-23 13:24:08,549 NetUtil.py:96 - EOF occurred in violation of protocol (_ssl.c:618)ERROR 2019-08-23 13:24:08,549 NetUtil.py:97 - SSLError: Failed to connect. Please check openssl library versions.Refer to: https://bugzilla.redhat.com/show_bug.cgi?id=1022468 for more details.WARNING 2019-08-23 13:24:08,550 NetUtil.py:124 - Server at https://vm01:8440 is not reachable, sleeping for 10 seconds... 解决： 12345678910By adding below config in [security] section ofvi /etc/ambari-agent/conf/ambari-agent.ini[security]force_https_protocol=PROTOCOL_TLSv1_2vi /etc/python/cert-verification.cfg[https]verify=disable 参考：https://community.hortonworks.com/questions/218070/ambari-automatic-registration-failed-step-3-confir-1.htmlhttps://my.oschina.net/aubao/blog/1920933]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HDP集群卸载]]></title>
    <url>%2F2019%2F08%2F14%2FBigData%2FHDP%E9%9B%86%E7%BE%A4%E5%8D%B8%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[ambari-server stop [master]123456[root@vm110 ~]# ambari-server stopUsing python /usr/bin/pythonStopping ambari-serverWaiting for server stop...Ambari Server stopped[root@vm110 ~]# ambari-agent stop remove [all]12[root@vm110 ~]# yum remove ambari-server[root@vm110 ~]# yum remove ambari-agent 组件 [all]12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758[root@vm110 ~]# yum list installed | grep ambari[root@vm110 ~]# yum remove -y ambari*[root@vm110 ~]# yum remove -y smartsense*[root@vm110 ~]# yum list installed | grep hdp[root@vm110 ~]# yum remove -y hdp*[root@vm110 ~]# yum list installed | grep hdfs[root@vm110 ~]# yum -y remove ranger*[root@vm110 ~]# yum list installed | grep yarn[root@vm110 ~]# yum remove -y spark*yum remove -y spark*yum -y remove ranger*yum remove -y hdp*yum remove -y smartsense*yum remove -y ambari*yum remove -y hive*yum remove -y hdfs*yum remove -y yarn*yum remove -y mapreduce2*yum remove -y tez*yum remove -y hbase*yum remove -y pig*yum remove -y sqoop*yum remove -y oozie*yum remove -y zookeeper*yum remove -y falcon*yum remove -y storm*yum remove -y flume*yum remove -y accumulo*yum remove -y Ambari Infra*yum remove -y Ambari Metrics*yum remove -y Atlas*yum remove -y Kafka*yum remove -y Knox*yum remove -y Log Search*yum remove -y Ranger*yum remove -y Ranger KMS*yum remove -y SmartSense*yum remove -y Zeppelin Notebook*yum remove -y Druid*yum remove -y Mahout*yum remove -y Slider*yum remove -y atlas-metadata_2_6_5_0_292-storm-plugin 0.8.0.2.6.5.0-292yum remove -y atlas-metadata_2_6_5_0_292-sqoop-plugin 0.8.0.2.6.5.0-292yum remove -y ranger_2_6_5_0_292-yarn-plugin 0.7.0.2.6.5.0-292yum remove -y bigtop-jsvc 1.0.15-29yum remove -y spark2_2_6_5_0_292-yarn-shuffle 2.3.0.2.6.5.0-292yum remove -y ranger_2_6_5_0_292-hdfs-plugin 0.7.0.2.6.5.0-292yum remove -y ranger_2_6_5_0_292-storm-plugin 0.7.0.2.6.5.0-292yum remove -y ranger_2_6_5_0_292-kafka-plugin 0.7.0.2.6.5.0-292yum remove -y atlas-metadata_2_6_5_0_292-hive-plugin 0.8.0.2.6.5.0-292yum remove -y slider_2_6_5_0_292 0.92.0.2.6.5.0-29yum remove -y ranger_2_6_5_0_292-hbase-plugin 0.7.0.2.6.5.0-292yum remove -y ranger_2_6_5_0_292-hive-plugin 0.7.0.2.6.5.0-292yum remove -y spark_2_6_5_0_292-yarn-shuffle 1.6.3.2.6.5.0-292 删除用户1234567891011121314151617181920212223242526272829303132333435userdel nagiosuserdel hiveuserdel ambari-qauserdel hbaseuserdel oozieuserdel hcatuserdel mapreduserdel hdfsuserdel rrdcacheduserdel zookeeperuserdel mysqluserdel sqoop userdel puppet userdel yarn userdel tez userdel hadoop userdel knox userdel storm userdel falcon userdel flume userdel nagios userdel admin userdel postgres userdel hdfs userdel zookeeper userdel hbase userdel amsuserdel sparkuserdel kafkauserdel rangeruserdel kmsuserdel zookeeperuserdel ambari-qauserdel hdfsuserdel mapred 删除文件夹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687rm -rf /hadoop/* rm -rf /etc/ambari* rm -rf /etc/zookeeper/ rm -rf /etc/ranger* rm -rf /etc/rc.d/init.d/ranger* rm -rf /etc/hadoop/ rm -rf /etc/hadoop/ rm -rf /etc/hbase/ rm -rf /etc/hive rm -rf /usr/hdp/ rm -rf /etc/zookeeper/ rm -rf /tmp/ambari-qa rm -rf /tmp/sqoop-ambari-qa/ rm -rf /kafka-logs/ rm -rf /var/lib/ambari* rm -rf /var/lib/hive2* rm -rf /var/run/kafka/ rm -rf /etc/flumerm -rf /etc/hive-hcatalogrm -rf /etc/hive-webhcat rm -rf /etc/phoenixrm -rf /etc/ambari-metrics-collector rm -rf /etc/ambari-metrics-monitorrm -rf /tmp/hdfs rm -rf /tmp/hcat rm -rf /etc/kafka rm -rf /etc/oozierm -rf /etc/stormrm -rf /etc/tezrm -rf /etc/falconrm -rf /etc/sliderrm -rf /etc/pigrm -rf /etc/rangerrm -rf /var/log/hadooprm -rf /var/log/hbaserm -rf /var/log/hiverm -rf /var/log/oozierm -rf /var/log/sqooprm -rf /var/log/zookeeperrm -rf /var/log/flumerm -rf /var/log/stormrm -rf /var/log/hive-hcatalogrm -rf /var/log/falconrm -rf /var/log/webhcatrm -rf /var/log/hadoop-hdfsrm -rf /var/log/hadoop-yarnrm -rf /var/log/hadoop-mapreducerm -rf /var/log/sparkrm -rf /var/log/rangerrm -rf /usr/lib/flumerm -rf /usr/lib/stormrm -rf /var/lib/hiverm -rf /var/lib/oozierm -rf /var/lib/zookeeperrm -rf /var/lib/flumerm -rf /var/lib/hadoop-hdfsrm -rf /var/lib/sliderrm -rf /var/lib/rangerrm -rf /var/tmp/oozierm -rf /var/tmp/sqooprm -rf /tmp/hiverm -rf /tmp/hadoop-hdfsrm -rf /etc/sqooprm -rf /var/log/ambari-metrics-collectorrm -rf /var/log/ambari-metrics-monitorrm -rf /usr/lib/ambari-metrics-collectorrm -rf /var/lib/hadoop-yarnrm -rf /var/lib/hadoop-mapreducerm -rf /var/lib/ambari-metrics-collectorrm -rf /var/log/kafkarm -rf /tmp/hadoop-yarnrm -rf /hadoop/zookeeperrm -rf /hadoop/hdfsrm -rf /kafka-logsrm -rf /etc/storm-slider-clientrm -rf /var/run/hadooprm -rf /var/run/hbaserm -rf /var/run/hiverm -rf /var/run/sqooprm -rf /var/run/zookeeperrm -rf /var/run/hive-hcatalogrm -rf /var/run/webhcatrm -rf /var/run/hadoop-hdfsrm -rf /var/run/hadoop-yarnrm -rf /var/run/hadoop-mapreducerm -rf /var/run/sparkrm -rf /var/run/ambari-metrics-monitor]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[spark错误记录]]></title>
    <url>%2F2019%2F08%2F13%2FBigData%2Fspark%E9%94%99%E8%AF%AF%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[lost executor问题描述: 119/08/13 14:27:26 ERROR YarnScheduler: Lost executor 7 on vm54: Slave lost 123456java.io.IOException: Connection from /192.168.200.52:52124 closed at org.apache.spark.network.client.TransportResponseHandler.channelInactive(TransportResponseHandler.java:146) at org.apache.spark.network.server.TransportChannelHandler.channelInactive(TransportChannelHandler.java:108) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:245) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:231) at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:224) 1234rg.apache.spark.shuffle.MetadataFetchFailedException: Missing an output location for shuffle 5 at org.apache.spark.MapOutputTracker$$anonfun$convertMapStatuses$2.apply(MapOutputTracker.scala:867) at org.apache.spark.MapOutputTracker$$anonfun$convertMapStatuses$2.apply(MapOutputTracker.scala:863) at scala.collection.TraversableLike$WithFilter$$anonfun$foreach$1.apply(TraversableLike.scala:733) 说明：数据量大，且代码中含有shuffle过程较多 可能原因分析： yarn资源不够 节点内存分配太少，yarn kill 了spark application rdd太大，内存资源不够 解决：增加executor内存，同时增加每个executor的cpu 解决记录： before： 123456789101112131415161718192021#! /bin/bashlist="delete replace_ETL Merge"FILE_NAME=`date -d "1 days ago" +%Y-%m-%d`for type in $list ;doecho $type/usr/hdp/current/spark2-client/bin/spark-submit \--master yarn \--name $&#123;type&#125; \--class cn.sic_credit.bigdata.update_prism.report_shareholder.report_shareholder_$&#123;type&#125; \--queue Liu \--num-executors 3 \--executor-memory 2g \--executor-cores 3 \--jars $(echo /usr/hdp/2.6.5.0-292/hbase/lib/*.jar | tr ' ' ',') \/usr/local/src/liu/update_prism_sql/ztgx3-1.0-SNAPSHOT.jar \$&#123;FILE_NAME&#125;done after: 123456789101112131415161718192021#! /bin/bashlist="delete replace_ETL Merge"FILE_NAME=`date -d "1 days ago" +%Y-%m-%d`for type in $list ;doecho $type/usr/hdp/current/spark2-client/bin/spark-submit \--master yarn \--name $&#123;type&#125; \--class cn.sic_credit.bigdata.update_prism.report_shareholder.report_shareholder_$&#123;type&#125; \--queue Liu \--num-executors 3 \--executor-memory 10g \--executor-cores 3 \--jars $(echo /usr/hdp/2.6.5.0-292/hbase/lib/*.jar | tr ' ' ',') \/usr/local/src/liu/update_prism_sql/ztgx3-1.0-SNAPSHOT.jar \$&#123;FILE_NAME&#125;done 参考：Lost executor 原因分析及解决方案-记录Spark程序运行常见错误解决方法以及优化 explode炸裂函数问题描述： 1234567891011121314151617181920212223"com_bus_risks-intellectual_property": [], "com_bus_risks-judicial_sale ": [ &#123; "notice": "大耳朵图图", "date": "2019-8-20 15:26", "executive_court": "北京丰台", "sale_object": "ztgx" &#125;, &#123; "notice": "大耳朵图图", "date": "2019-8-20 15:26", "executive_court": "北京丰台", "sale_object": "ztgx" &#125;, &#123; "notice": "大耳朵图图", "date": "2019-8-20 15:26", "executive_court": "北京丰台", "sale_object": "ztgx" &#125; ], "com_bus_risks-mortgage": [], "com_bus_risks-out_abnormal_operation": [], 如上json所示，使用spark-sql解析json文件时，可以使用sql解析，可以使用core（fastjson）解析。但是遇到jsonArray即一个json数组里面含有多个json对象的情况，这个时候，对于core来说，需要解析，就需要将其数组遍历，把数组里的json对象当成多个，在外定义stringbuffer，在里面使用+=，将多个json对象同一个key的不同的值拼接起来，后面再分别取值然后赋key。 但如果使用explode炸裂函数，这种情况就很好解决了。 123456789101112131415161718192021import org.apache.spark.sql.functions._import session.implicits._val df: DataFrame = session.read.format("json").load("file:///D:\\ZTGX\\tycdata\\new") val df1 = df.select("com_bus_risks-judicial_sale ").show(100, false) val df2 = df.select( $"com_name", $"com_credit_code", (explode($"com_bus_risks-judicial_sale ") as "judicial_sale") ) df2.show(100, false) val df3 = df2.select( $"com_name", $"com_credit_code", $"judicial_sale.notice", $"judicial_sale.date", $"judicial_sale.executive_court", $"judicial_sale.sale_object" ) df3.show(100, false) df1.show 12345678910+------------------------------------------------------------------+|com_bus_risks-judicial_sale |+------------------------------------------------------------------+|[[2019-8-20,北京丰台,大耳朵图图,ztgx]] ||[[2019-8-202,北京丰台2,大耳朵图图2,ztgx2], [2019-8-203,北京丰台3,大耳朵图图3,ztgx3]]||[] ||[] ||[] ||[[2019-8-20 15:26,北京丰台,大耳朵图图,ztgx]] |+------------------------------------------------------------------+ df2.show 12345678+------------+---------------+---------------------------------+|com_name |com_credit_code|judicial_sale |+------------+---------------+---------------------------------+|敖汉旗丰收邢玉新建材门市|- |[2019-8-20,北京丰台,大耳朵图图,ztgx] ||吴君丽-湖南省平江县 |- |[2019-8-202,北京丰台2,大耳朵图图2,ztgx2] ||吴君丽-湖南省平江县 |- |[2019-8-203,北京丰台3,大耳朵图图3,ztgx3] ||敖汉旗丰收邢玉新建材门市|- |[2019-8-20 15:26,北京丰台,大耳朵图图,ztgx]|+------------+---------------+---------------------------------+ df3.show 12345678+------------+---------------+------+---------------+---------------+-----------+|com_name |com_credit_code|notice|date |executive_court|sale_object|+------------+---------------+------+---------------+---------------+-----------+|敖汉旗丰收邢玉新建材门市|- |大耳朵图图 |2019-8-20 |北京丰台 |ztgx ||吴君丽-湖南省平江县 |- |大耳朵图图2|2019-8-202 |北京丰台2 |ztgx2 ||吴君丽-湖南省平江县 |- |大耳朵图图3|2019-8-203 |北京丰台3 |ztgx3 ||敖汉旗丰收邢玉新建材门市|- |大耳朵图图 |2019-8-20 15:26|北京丰台 |ztgx |+------------+---------------+------+---------------+---------------+-----------+]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Spark</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kerberos学习]]></title>
    <url>%2F2019%2F08%2F11%2FBigData%2Fkerberos%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[kerberos是什么强大的身份验证和建立用户身份是Hadoop安全访问的基础。用户需要能够可靠地“识别”自己，然后在整个Hadoop集群中传播该身份。完成此操作后，这些用户可以访问资源（例如文件或目录）或与集群交互（如运行MapReduce作业）。除了用户之外，Hadoop集群资源本身（例如主机和服务）需要相互进行身份验证，以避免潜在的恶意系统或守护程序“冒充”受信任的集群组件来获取数据访问权限。 Hadoop使用Kerberos作为用户和服务的强身份验证和身份传播的基础。Kerberos是一种计算机网络认证协议，它允许某实体在非安全网络环境下通信，向另一个实体以一种安全的方式证明自己的身份。 Kerberos是第三方认证机制，其中用户和服务依赖于第三方（Kerberos服务器）来对彼此进行身份验证。 Kerberos服务器本身称为密钥分发中心或KDC。 在较高的层面上，它有三个部分： 它知道的用户和服务（称为主体）及其各自的Kerberos密码的数据库一个认证服务器（AS）执行初始认证并颁发票证授予票证（TGT）一个票据授权服务器（TGS）发出基于初始后续服务票证TGT一个用户主要来自AS请求认证。AS返回使用用户主体的Kerberos密码加密的TGT，该密码仅为用户主体和AS所知。用户主体使用其Kerberos密码在本地解密TGT，从那时起，直到ticket到期，用户主体可以使用TGT从TGS获取服务票据。服务票证允许委托人访问各种服务。 Kerberos简单来说就是一个用于安全认证第三方协议，它采用了传统的共享密钥的方式，实现了在网络环境不一定保证安全的环境下，client和server之间的通信，适用于client/server模型，由MIT开发和实现。 Kerberos服务是单点登录系统，这意味着您对于每个会话只需向服务进行一次自我验证，即可自动保护该会话过程中所有后续事务的安全。 由于每次解密TGT时群集资源（主机或服务）都无法提供密码，因此它们使用称为keytab的特殊文件，该文件包含资源主体的身份验证凭据。 Kerberos服务器控制的主机，用户和服务集称为领域。]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Kerberos</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Apache zeppelin学习]]></title>
    <url>%2F2019%2F08%2F11%2FBigData%2FApache-zeppelin%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[zeppelin是什么zeppelin是apache的一个孵化项目，是一个基于web的笔记本。Ambari平台上集成了此组件，一般来说，开发人员可以将一些开发文档，笔记记录在此组件上，供多人查阅和修改。可以使用sql，shell，scala，spark(命令行)，makedown的语法做出数据驱动，交互，协作的文档各语言可以实时执行，实时查阅结果类似于ipython notebook，可以直接在浏览器中写代码，笔记并且共享 zeppelin安装和使用基本使用界面： Create new note makedown12## test创建了test文档。设置文档类型为makedown格式 shell123%shDATE=20170902echo $DATE scala1234%spark2val one=1val two="hello"println("hello world") spark.sql12%spark2.sqlshow databases html12%angular&lt;p&gt;html语言&lt;/p&gt; zeppelin其他]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Zeppelin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ranger学习]]></title>
    <url>%2F2019%2F08%2F11%2FBigData%2FRanger%E5%AD%A6%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[Ranger是什么Ranger是大数据领域的一个集中式安全管理框架，他可以对诸如hdfs，hive，hbase，kafka进行细粒度的权限控制。一般来说，大数据产品提供给多人使用，是需要进行权限控制的，对于数据安全，产品可靠性都是很重要的 例如：控制某个用户或者一组用户对hdfs访问的权限，读写，或者控制访问的路径控制某个用户或者一组用户对hive的表的访问权限，读写，控制到哪个数据库，哪个表，哪一列… Ranger支持的组件 Ranger权限模型Ranger的权限模型主要是由权限策略组成。权限策略分为三个方面：用户，资源，权限 用户：Ranger可以对用户进行分组，一个用户可以属于多个组。Ranger可以对用户或者组进行资源的权限控制 资源：对于不同的组件，资源有着不同的表现形式。对于HDFS来说，文件路径就是资源，对于hive来说，database，table，column都是资源 权限：Ranger可以对各个资源的读，写，访问进行控制。具体可以配置白名单，白名单排除，黑名单，黑名单排斥 在大数据集群中安装好Ranger，并进行相应的权限策略配置之后，用户访问资源就会进行Ranger的权限校验，校验流程如下： 用户请求资源，会先获取所有相关的策略，并且遍历这些策略，然后根据黑白名单去判断用户访问资源的权限。由上面流程图可以看出，黑白名单的优先级。 黑名单的优先级高于白名单 黑名单排除的优先级高于黑名单 白名单排除的优先级高于白名单 决策下发如果没有匹配到任何策略，一般情况是没有权限拒绝访问。Ranger也可以设置决策下发交给系统自身的权限控制。 Ranger架构 Ranger-adminranger-admin是基于Jersey+Spring+EclipseLink框框开发的Web服务，对外提供了Restful风格的http服务。Ranger-Admin模块同样内嵌了jsp界面，用于管理员管理用户、资源、权限等信息。同样，我们可以基于它的Restful Api来编写自己的权限管理sdk。 虽然Jersey和SpringMVC同样实现了JAX-RS(javaee6提供Java API for RESTful Web Services)规范，但是jersey更加适合构建restful风格的服务，因为它天生就是为restful而生的。EclipseLink 是 JPA(Java Persistence Api)的一种实现，是java的一个ORM框架。 Plugin那么ranger是如何实现对大数据组件的权限控制访问呢？这就和ranger实现的一个个plugin有关系了。 因为几乎所有的大数据组件都有提供一个抽象的验证接口，ranger就是根据这些接口为各个大数据组件实现了对应的plugin，plugin的工作主要是从Ranger-Admin处拉取该组件配置的所有策略，然后缓存到本地，然后当有用户来请求时提供鉴权服务。 Ranger的安装使用参考文献https://blog.csdn.net/u013332124/article/details/86360756]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Ranger</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flume情况简介]]></title>
    <url>%2F2019%2F08%2F04%2FToWork%2Fflume%E6%83%85%E5%86%B5%E7%AE%80%E4%BB%8B%2F</url>
    <content type="text"><![CDATA[生产集群路径：[root@vm51 myconf]# cd /opt/apps/apache-flume-1.7.0-bin/ conf文件：[root@vm51 myconf]# cd /opt/apps/apache-flume-1.7.0-bin/conf/myconf/ avro_memory_hdfs.conf： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#192.168.200.51 avro_memory_hdfsa1.sources = r1a1.channels = c1a1.sinks = k1#sourcea1.sources.r1.type = avroa1.sources.r1.channels = c1a1.sources.r1.bind = 192.168.200.51a1.sources.r1.port = 4545#memorya1.channels = c1a1.channels.c1.type = memorya1.channels.c1.capacity = 100000a1.channels.c1.transactionCapacity = 10000a1.channels.c1.keep-alive = 30#sinksa1.sinks.k1.type = hdfsa1.sinks.k1.channel = c1#指定目录a1.sinks.k1.hdfs.path = /flume/logs/%&#123;dataType&#125;/%Y-%m-%d#文件的命名, 前缀a1.sinks.k1.hdfs.filePrefix = logs-#24h就改目录（创建目录）， （这些参数影响/flume/events/%y-%m-%d/%H%M/）a1.sinks.k1.hdfs.round = truea1.sinks.k1.hdfs.roundValue = 24a1.sinks.k1.hdfs.roundUnit = hour#目录里面有文件#------start----符合其中一个就满足---#文件滚动之前的等待时间(秒)a1.sinks.k1.hdfs.rollInterval = 2400#文件滚动的大小限制(bytes) 127Ma1.sinks.k1.hdfs.rollSize = 133169152#写入多少个event数据后滚动文件(事件个数)a1.sinks.k1.hdfs.rollCount = 0#-------end-----#100个事件就往里面写入a1.sinks.k1.hdfs.batchSize = 100#用本地时间格式化目录a1.sinks.k1.hdfs.useLocalTimeStamp = true#下沉后, 生成的文件类型，默认是Sequencefile，可用DataStream，则为普通文本a1.sinks.k1.hdfs.fileType = DataStream#操作hdfs超时时间（毫秒）a1.sinks.k1.hdfs.callTimeout = 50000 爬虫集群200路径：root@ubuntu:~# cd /opt/apps/apache-flume-1.7.0-bin/ conf：root@ubuntu:~# cd /opt/apps/apache-flume-1.7.0-bin/conf/myconf/ taildir_memory_avro2.conf： 123456789101112131415161718192021222324252627282930313233343536#192.168.1.200 taildir_memory_avroa1.sources = r1a1.channels = c1a1.sinks = k1#sourcea1.sources.r1.type = TAILDIRa1.sources.r1.channels = c1#记录偏移量路径a1.sources.r1.positionFile = /home/FlumePositionFile/taildir_position.jsona1.sources.r1.filegroups = f1#监控文件路径a1.sources.r1.filegroups.f1 = /home/data1/flume_data/tyc_data/.*.loga1.sources.r1.headers.f1.headerKey1 = value1a1.sources.r1.fileHeader = true#静态拦截器a1.sources.r1.interceptors = i1a1.sources.r1.interceptors.i1.type=statica1.sources.r1.interceptors.i1.key= dataTypea1.sources.r1.interceptors.i1.value=tyc_dataa1.sources.r1.interceptors.i1.preserveExisting=false#memorya1.channels = c1a1.channels.c1.type = memorya1.channels.c1.capacity = 10000a1.channels.c1.transactionCapacity = 1000#sinksa1.sinks.k1.type = avroa1.sinks.k1.channel = c1a1.sinks.k1.hostname = 192.168.200.51a1.sinks.k1.port = 4545 201路径：root@ubuntu:~# cd /opt/apps/apache-flume-1.7.0-bin/ conf：root@ubuntu:~# cd /opt/apps/apache-flume-1.7.0-bin/conf/myconf/ taildir_memory_avro2.conf： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566#192.168.1.201 taildir_memory_avroa1.sources = r1 r2 r3a1.channels = c1a1.sinks = k1#source r1a1.sources.r1.type = TAILDIRa1.sources.r1.channels = c1a1.sources.r1.positionFile = /home/FlumePositionFile/taildir_position.jsona1.sources.r1.filegroups = f1a1.sources.r1.filegroups.f1 = /home/data1/flume_data/tyc_data/.*.loga1.sources.r1.headers.f1.headerKey1 = value1a1.sources.r1.fileHeader = true#静态拦截器 r1a1.sources.r1.interceptors = i1a1.sources.r1.interceptors.i1.type=statica1.sources.r1.interceptors.i1.key= dataTypea1.sources.r1.interceptors.i1.value=tyc_dataa1.sources.r1.interceptors.i1.preserveExisting=false#source r2a1.sources.r2.type = TAILDIRa1.sources.r2.channels = c1a1.sources.r2.positionFile = /home/FlumePositionFile/tyc_relation_data/taildir_position.jsona1.sources.r2.filegroups = f1a1.sources.r2.filegroups.f1 = /home/data1/flume_data/tyc_relation_data/.*.loga1.sources.r2.headers.f1.headerKey1 = value1a1.sources.r2.fileHeader = true#静态拦截器 r2a1.sources.r2.interceptors = i2a1.sources.r2.interceptors.i2.type=statica1.sources.r2.interceptors.i2.key= dataTypea1.sources.r2.interceptors.i2.value=tyc_relation_dataa1.sources.r2.interceptors.i2.preserveExisting=false#source r3a1.sources.r3.type = TAILDIRa1.sources.r3.channels = c1a1.sources.r3.positionFile = /home/FlumePositionFile/qcc_data/taildir_position.jsona1.sources.r3.filegroups = f1a1.sources.r3.filegroups.f1 = /home/data1/flume_data/qcc_data/.*.loga1.sources.r3.headers.f1.headerKey1 = value1a1.sources.r3.fileHeader = true#r2静态拦截器 r3a1.sources.r3.interceptors = i3a1.sources.r3.interceptors.i3.type=statica1.sources.r3.interceptors.i3.key= dataTypea1.sources.r3.interceptors.i3.value=qcc_dataa1.sources.r3.interceptors.i3.preserveExisting=false#memorya1.channels = c1a1.channels.c1.type = memorya1.channels.c1.capacity = 10000a1.channels.c1.transactionCapacity = 1000#sinksa1.sinks.k1.type = avroa1.sinks.k1.channel = c1a1.sinks.k1.hostname = 192.168.200.51a1.sinks.k1.port = 4545 运行flume后台运行：nohup ./bin/flume-ng agent -n a1 -c ./conf/ -f ./conf/myconf/avro_memory_hdfs.conf &amp; 日志路径：cd /opt/apps/apache-flume-1.7.0-bin/logs/ 查看： 123root@ubuntu:/opt/apps/apache-flume-1.7.0-bin/conf/myconf# ps -ef | grep flumeroot 1551 1 1 Jul01 ? 11:52:15 /usr/local/custom/jdk1.8.0_74/bin/java -Xms2048m -Xmx2048m -Xss256k -Xmn1g -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:-UseGCOverheadLimit -cp /opt/apps/apache-flume-1.7.0-bin/conf:/opt/apps/apache-flume-1.7.0-bin/lib/*:/lib/* -Djava.library.path= org.apache.flume.node.Application -n a1 -f ./conf/myconf/taildir_memory_avro2.confroot 17247 16911 0 22:16 pts/0 00:00:00 grep --color=auto flume kill：kill -9 1551 注意才安装的flume，需要设置flume的jvm启动参数，【内存大小】.否则文件太大会报内存溢出的错flume系列之Java heap space大小设置]]></content>
      <categories>
        <category>ToWork</category>
      </categories>
      <tags>
        <tag>Flume</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux系统，Linux桌面系统]]></title>
    <url>%2F2019%2F08%2F01%2FBigData%2FLinux%E7%B3%BB%E7%BB%9F%2F</url>
    <content type="text"><![CDATA[操作系统英文：operating system缩写：OS 是管理计算机硬件和软件资源的计算机程序，同时也是计算机系统的内核和基石。操作系统需要处理如管理与配置内存、决定系统资源供需的优先次序、控制输入设备与输出设备、操作网络与管理文件系统等基本事务。操作系统也提供一个让用户与系统交互的操作界面。 操作系统的类型非常多样，不同机器安装的操作系统可从简单到复杂，可从移动电话的嵌入式系统到超级计算机的大型操作系统。许多操作系统制造者对它涵盖范畴的定义也不尽一致，例如有些操作系统集成了图形用户界面，而有些仅使用命令行界面，而将图形用户界面视为一种非必要的应用程序。 常见操作系统Android, iOS, Linux, Windows,Mac OS X 类Unix系统类Unix系统（英文：Unix-like）指各种传统的Unix系统（比如FreeBSD、OpenBSD、SUN公司的Solaris）以及各种与传统Unix类似的系统（例如Minix、Linux、QNX等）。它们虽然有的是自由软件，有的是商业软件，但都相当程度地继承了原始UNIX的特性，有许多相似处，并且都在一定程度上遵守POSIX规范。类Unix通常指的是比原先的Unix包含更多特征的OS。 使用范围最广的是linux系统 Linux系统Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。它能运行主要的UNIX工具软件、应用程序和网络协议。它支持32位和64位硬件。Linux继承了Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。Linux操作系统诞生于1991 年10 月5 日（这是第一次正式向外公布时间）。Linux存在着许多不同的Linux版本，但它们都使用了Linux内核。Linux可安装在各种计算机硬件设备中，比如手机、平板电脑、路由器、视频游戏控制台、台式计算机、大型机和超级计算机。严格来讲，Linux这个词本身只表示Linux内核，但实际上人们已经习惯了用Linux来形容整个基于Linux内核，并且使用GNU 工程各种工具和数据库的操作系统。 Linux发行版本从技术上来说，李纳斯•托瓦兹开发的 Linux 只是一个内核。内核指的是一个提供设备驱动、文件系统、进程管理、网络通信等功能的系统软件，内核并不是一套完整的操作系统，它只是操作系统的核心。一些组织或厂商将 Linux 内核与各种软件和文档包装起来，并提供系统安装界面和系统配置、设定与管理工具，就构成了 Linux 的发行版本。 在 Linux 内核的发展过程中，各种 Linux 发行版本起了巨大的作用，正是它们推动了 Linux 的应用，从而让更多的人开始关注 Linux。因此，把 Red Hat、Ubuntu、SUSE 等直接说成 Linux 其实是不确切的，它们是 Linux 的发行版本，更确切地说，应该叫作“以Linux为核心的操作系统软件包”。 Linux 的各个发行版本使用的是同一个 Linux 内核，因此在内核层不存在什么兼容性问题，每个版本有不一样的感觉，只是在发行版本的最外层（由发行商整合开发的应用）才有所体现。 Linux 的发行版本可以大体分为两类：商业公司维护的发行版本，以著名的 Red Hat 为代表；社区组织维护的发行版本，以 Debian 为代表。 Linux部分发行版本Red Hat Linux可能这是最著名的Linux版本了，Red Hat Linux已经创造了自己的品牌，越来越多的人听说过它。Red Hat在1994年创业，当时聘用了全世界500多名员工，他们都致力于开放的源代码体系。Red Hat Linux是公共环境中表现上佳的服务器。它拥有自己的公司，能向用户提供一套完整的服务，这使得它特别适合在公共网络中使用。这个版本的Linux也使用最新的内核，还拥有大多数人都需要使用的主体软件包。Red Hat Linux的安装过程也十分简单明了。它的图形安装过程提供简易设置服务器的全部信息。磁盘分区过程可以自动完成，还可以选择GUI工具完成，即使对于 Linux新手来说这些都非常简单。选择软件包的过程也与其他版本类似；用户可以选择软件包种类或特殊的软件包。系统运行起来后，用户可以从Web站点和 Red Hat那里得到充分的技术支持。我发现Red Hat是一个符合大众需求的最优版本。在服务器和桌面系统中它都工作得很好。Red Hat的唯一缺陷是带有一些不标准的内核补丁，这使得它难于按用户的需求进行定制。 Red Hat通过论坛和邮件列表提供广泛的技术支持，它还有自己公司的电话技术支持，后者对要求更高技术支持水平的集团客户更有吸引力。 Ubuntu LinuxUbuntu是一个以桌面应用为主的Linux操作系统，其名称来自非洲南部祖鲁语或豪萨语的“ubuntu”一词（译为吾帮托或乌班图），意思是“人性”、“我的存在是因为大家的存在”，是非洲传统的一种价值观，类似华人社会的“仁爱”思想。Ubuntu基于Debian发行版和unity桌面环境，与Debian的不同在于它每6个月会发布一个新版本。Ubuntu的目标在于为一般用户提供一个最新的、同时又相当稳定的主要由自由软件构建而成的操作系统。Ubuntu具有庞大的社区力量，用户可以方便地从社区获得帮助。随着云计算的流行，ubuntu推出了一个云计算环境搭建的解决方案，可以在其官方网站找到相关信息。于2012年4月26日发布最终版ubuntu 12.04，ubuntu 12.04是长期支持的版本。Red Hat Linux CentosCentOS（Community ENTerprise Operating System）是Linux发行版之一，它是来自于Red Hat Enterprise Linux依照开放源代码规定释出的源代码所编译而成。由于出自同样的源代码，因此有些要求高度稳定性的服务器以CentOS替代商业版的Red Hat Enterprise Linux使用。两者的不同，在于CentOS并不包含封闭源代码软件,CentOS 是一个基于Red Hat Linux 提供的可自由使用源代码的企业级Linux发行版本。每个版本的 CentOS都会获得十年的支持（通过安全更新方式）。新版本的 CentOS 大约每两年发行一次，而每个版本的 CentOS 会定期（大概每六个月）更新一次，以便支持新的硬件。这样，建立一个安全、低维护、稳定、高预测性、高重复性的 Linux 环境。CentOS是Community Enterprise Operating System的缩写。CentOS 是RHEL（Red Hat Enterprise Linux）源代码再编译的产物，而且在RHEL的基础上修正了不少已知的 Bug ，相对于其他 Linux 发行版，其稳定性值得信赖。 DebianDebian Project诞生于1993年8月13日，它的目标是提供一个稳定容错的Linux版本。支持Debian的不是某家公司，而是许多在其改进过程中投入了大量时间的开发人员，这种改进吸取了早期Linux的经验。Debian以其稳定性著称，虽然它的早期版本Slink有一些问题，但是它的现有版本Potato已经相当稳定了。这个版本更多的使用了 pluggable authentication modules (PAM)，综合了一些更易于处理的需要认证的软件（如winbind for Samba）。Debian的安装完全是基于文本的，对于其本身来说这不是一件坏事。但对于初级用户来说却并非这样。因为它仅仅使用fdisk 作为分区工具而没有自动分区功能，所以它的磁盘分区过程令人十分讨厌。磁盘设置完毕后，软件工具包的选择通过一个名为dselect的工具实现，但它不向用户提供安装基本工具组（如开发工具）的简易设置步骤。最后需要使用anXious工具配置X Windows，这个过程与其他版本的X Windows配置过程类似。完成这些配置后，Debian就可以使用了。Debian主要通过基于Web的论坛和邮件列表来提供技术支持。作为服务器平台，Debian提供一个稳定的环境。为了保证它的稳定性，开发者不会在其中随意添加新技术，而是通过多次测试之后才选定合适的技术加入。当前最新正式版本是Debian 6，采用的内核是Linux 2.6.32。Debian 6 第一次 包含了一个100%开源的Linux内核，这个内核中不再包含任何闭源的硬件驱动。所有的闭源软件都被隔离成单独的软件包，放到Debian软件源的 “non-free” 部分。由此，Debian用户便可以自由地选择是使用一个完全开源的系统还是添加一些闭源驱动。 SuSe总部设在德国的SuSE AG在商界已经奋斗了8年多，它一直致力于创建一个连接数据库的最佳Linux版本。为了实现这一目的，SuSE与Oracle 和IBM合作，以使他们的产品能稳定地工作。SuSE还开发了SuSE Linux eMail Server III，一个非常稳定的电子邮件群组应用。基于2.4.10内核的SuSE 7.3，在原有版本的基础上提高了易用性。安装过程通过GUI完成，磁盘分区过程也非常简单，但它没有为用户提供更多的控制和选择。在SuSE 操作系统下，可以非常方便地访问Windows磁盘，这使得两种平台之间的切换，以及使用双系统启动变得更容易。SuSE的硬件检测非常优秀，该版本在服务器和工作站上都用得很好。SuSE拥有界面友好的安装过程，还有图形管理工具，可方便地访问Windows磁盘，对于终端用户和管理员来说使用它同样方便，这使它成为了一个强大的服务器平台。 SuSE也通过基于Web的论坛提供技术支持，另外我还发现它有电话技术支持。 Linux MintLinux Mint是一个基于Ubuntu的发行版，最早于2006年由居住在爱尔兰的法国出生的IT专家Clement Lefebvre发布。最初维护一个专门为新Linux用户提供帮助，技巧和文档的Linux网站，笔者看到了开发Linux发行版的必要性，该发行版致力于解决那些技术性较强的产品的使用问题，让它们更易于使用。在他的网站上向访问者征求反馈意见之后，他继续把许多人提到的“改进的Ubuntu”或“Ubuntu完善版”的东西建立起来。注：Ubuntu就是以易用，对新手友好著称的。可想而知Mint的目标更进一步，让Linux更加的贴近了普通用户。 但是，Linux Mint不仅仅是一个具有新的应用程序和更新的桌面主题的Ubuntu。自开始以来，开发人员一直在增加各种Mint下的图形工具以提高可用性;这包括mintDesktop – 用于配置桌面环境的实用程序，mintMenu – 一个新的，优雅的菜单结构，以方便导航，mintInstall – 一个易于使用的软件安装程序，mintUpdate – 一个软件更新程序，提供了一些更突出的几个工具和数百个额外的改进。该项目还开发了很多替代的专有程序以避免一些潜在的法律版权问题，其中包括专利和专利设计的多媒体编解码器，这些编解码器在很多发行版中通常是不存在的。因此，Mint在易用性方面的声誉得到了进一步的加强，也许Linux Mint的最佳特性之一就是开发人员倾听用户的意见，并总是快速地实施好的建议。 因为Linux Mint是可以免费下载，因此该项目通过捐赠，广告和专业支持服务获得收入。它没有固定的发布时间表或者计划的功能列表，但是在每个Ubuntu长期支持版本发布几周后，可以预期Linux Mint的新版本。除Mint的MATE和Cinnamon桌面两个主要版本之外，该项目还使用包括KDE和Xfce在内的其他桌面版本构建版本。这些版本通常在两个“主要”版本几周后完成，有时可能会缺少一些主要分支中中的一些“Mint”工具和其他功能。 Mint系列的另一个版本是基于Debian稳定版分支的“Debian版”。 Linux Mint的Debian版本提供了非常稳定的基础，而桌面软件包的更新速度比Mint的“主要分支”版本更快。 Linux Mint不适用软件自由原则，也不会发布安全公告。 优点：精心整理的内部开发的“Mint”工具，数百个用户友好的增强功能，包含多媒体编解码器缺点：“社区”版本，因此可能并不总是包含最新的功能。另外，项目不会发布安全建议软件包管理： mintInstall包管理器,使用DEB包（与Ubuntu兼容）可用的版本：“主”版本（MATE和Cinnamon桌面），“社区”版本（KDE和Xfce桌面），Linux Mint“Debian”版本（MATE或Cinnamon桌面）替代选择：Ubuntu, elementary OS, Zorin OS, Lubuntu, Xubuntu, Peppermint OS MageiaMageia可能是这个列表中的最新发行版，但它的来源可以追溯到1998年7月，当时GalDuval发布了Mandrake Linux。当时它只是一个红帽Linux的分支，KDE作为默认的桌面，更完善的硬件支持和一些用户友好的功能，加上媒体的积极评论，它获得了一定的知名度。Mandrake Linux后来变成了一个商业版本，并在2010年几乎破产之前更名为Mandriva（为了避免一些与商标有关的麻烦，并纪念与巴西的Conectiva合并），最终由一家俄罗斯风险投资公司拯救了，新管理层因为巨大的开支而决定在该公司巴黎总部裁减大部分的Mandriva开发人员。在没有工作的情况下，他们决定组建一个Mageia，这个社区项目是Mandrake和Mandriva的核心延续，或许比Mandriva本身更为合理。 Mageia主要是一个桌面版本。其最受欢迎的功能是最优秀的软件应用，精良的系统管理套件（Mageia控制中心），吸引了大量志愿者贡献者以及广泛的国际化支持。它具有最简单但功能强大的系统安装程序之一，同时还可以使用KDE或GNOME桌面和全面的语言支持。而且可以来直接从桌面安装系统，无需刻录到U盘。该发行版具有良好的软件包管理功能，具有强大的命令行选项和图形化软件管理模块，可以轻松访问数千个软件包。独特的Mageia控制中心随着每个版本的不断改进，为Linux的新手提供了一个强大的工具来配置他们的计算机的任何方面，而无需使用终端命令行。 尽管Mageia自2010年9月成立以来一直处于起步阶段，但仍有人担心其是否有能力维持长期开发的工作，毕竟大部分工作是由志愿者在完成的。此外，它缺乏一些更大的Linux发行版的完善的基础架构。项目的文档也需要做一些改进，而9个月的发布周期在引起新闻和媒体兴趣方面也可以被视为一个缺点，特别是与其他使用6个月的短期开发过程的主要发行版相比。 优点：适合初学者;优秀的中央配置工具;支持数十种语言的开箱即用支持;可安装的Live镜像缺点：与Mandriva分开之后，缺乏声誉和资源，有人担心开发者没有能力长期维持开发软件包管理：使用RPM软件包，Rpmdrake（URPMI的图形前端）的URPMI包管理器可用版本：用于32位（i586）和64位（x86_64）处理器的安装DVD;可安装32位（i586）处理器的live CD Fedora虽然Fedora仅在2004年9月才正式发布，但它的起源可追溯到1995年，当时它是由Bob Young和Marc Ewing以Red Hat Linux的名义发布的。该公司的第一款产品Red Hat Linux 1.0“母亲节”在同一年发布，之后很快又进行了一些错误修复更新。 1997年，红帽公司推出了革命性的RPM软件包管理系统，具有依赖解决方案和其他先进功能，极大地促进了分发的迅速普及并超越Slackware Linux成为世界上使用最广泛的Linux发行版。在以后的几年中，红帽将按照正常的6个月发布时间表进行开发。 在2003年刚发布Red Hat Linux 9之后，该公司对其产品系列进行了一些根本性的改变。它保留了红帽商业产品的商标，特别是红帽企业Linux，并引入了Fedora Core（后来改名为Fedora），这是一个红帽赞助的，但面向社区的发行版，专为“Linux爱好者”设计。从刚开始的批评后，Linux社区接受了“新的”发行版作为Red Hat Linux的核心延续版本。 Fedora重新成为一个高质量的版本，成为市场上最受欢迎的操作系统之一。与此同时，红帽公司迅速成为全球规模最大，盈利能力最强的Linux公司，拥有创新的产品阵容，出色的客户支持以及红帽认证工程师（RHCE）认证计划等其他受欢迎的计划。 尽管Fedora的方向仍然由Red Hat，Inc.主要控制，并且该产品有时被看作是对红帽企业Linux的测试平台(小白鼠)，无论是正确的还是错误的，无可否认，Fedora是最具创新性的分发版之一。它对Linux内核，glibc和GCC的贡献是众所周知的，它最近集成了SELinux功能，虚拟化技术，系统服务管理器，先进的日志文件系统以及其他企业级功能， 。不利的一面是，Fedora仍然缺乏明确的面向桌面的策略，以使产品更容易用于“Linux爱好者”目标以外的用户。 优点：高度创新;突出的安全功能;大量支持的软件包;严格遵守自由软件的理念;具有许多流行桌面环境的Live CD的可用性缺点：Fedora的优先级倾向于倾向于企业功能，而不是桌面可用性;一些出色的边缘功能，比如早期切换到KDE 4和GNOME 3，偶尔会疏远一些桌面用户软件包管理：使用RPM软件包的YUM图形和命令行工具可用的版本：用于32位（i386）和64位（x86_64）处理器的Fedora;还有GNOME，KDE，LXDE，MATE和Xfce桌面的CD版本基于Fedora的替代方案：Korora（GNOME，KDE，LXDE桌面或Xfce桌面的Live DVD）基于红帽的备选方案：CentOS，Scientific Linux Arch LinuxArch Linux的KISS（保持简单愚蠢）哲学是在2002年由加拿大计算机科学专业毕业生Judd Vinet在2002年推出的，几年来，它一直是一个为中级和高级Linux用户设计的边缘项目。但是它“滚动更新”，只需要安装一次，然后保持一直更新，不要从头安装新的系统。这都要感谢其强大的包管理器和一个总是最新的软件库。因此，Arch Linux的“发行版”很少，而且现在只限于一个基本的安装光盘，只有在基本系统发生相当大的变化时，才会发行新的安装介质。 Arch Linux除了拥有备受推崇的“滚动发布”更新机制之外，还以其快速和强大的软件包管理器“Pacman”而闻名，能够从源代码安装软件包，并且由于其AUR基础架构，以及经过充分测试的软件包不断增加的软件库。其高度重视的文档，以及卓越的Arch Linux手册，使得一些高级Linux用户可以自行安装和定制分发。用户可以使用的强大工具意味着发行版可以无限定制到最细微的细节，并且没有两个安装可能是相同的。 不利的一面是，任何滚动更新更新机制都有其危险性：人为错误，库或依赖关系丢失，已存在于存储库中的应用程序的新版本有一个尚未报告的严重错误都可能导致系统的不稳定。在Pacman升级之后，最终导致无法启动的系统是经常遇到的。因此，Arch Linux是一种需要用户警觉并具有足够的知识来解决任何这种可能的问题的发行版。此外，偶尔安装的发行版意味着有时由于重要的系统更改或在较早的Linux内核中缺少硬件支持而无法使用旧版本。 优点：优秀的软件管理基础设施无与伦比的定制和调整选项;一流的在线文档缺点：偶尔会出现不稳定和风险软件包管理：使用TAR.XZ软件包的“Pacman”包管理器可用的版本：64位（x86_64）处理器的最小安装CD和网络安装CD映像基于Arch Linux的发行版：Manjaro Linux（与Cinnamon，Enlightenment，KDE，LXDE，MATE，Openbox，Xfce一起使用），Antergos（与GNOME 3一起使用），ArchBang Linux（使用Openbox的轻量级），Chakra GNU / Linux （使用KDE的Live CD），Bridge Linux（使用GNOME，KDE，LXDE和Xfce），Parabola GNU / Linux（免费软件），KaOS（使用KDE） PCLinuxOSPCLinuxOS于2003年由比尔·雷诺兹（Bill Reynolds）首先宣布，被称为“Texstar”。在创建自己的发行版之前，Texstar已经是Mandrake Linux社区用户的知名开发人员构建的最新的RPM包，并提供免费下载。 2003年，他决定建立一个新的发行版，最初基于Mandrake Linux，但有几个显著的可用性改进。理念是应该对初学者是友好的，具有专有内核模块，浏览器插件和媒体编解码器的开箱即用的支持，并应作为一个简单直观的图形安装程序的Live CD。 几年后的发展，PCLinuxOS正在迅速接近其预期的状态。就可用性而言，该项目为大多数Windows到Linux移民希望从他们的新操作系统中获得的许多技术提供了开箱即用的支持。在软件方面，PCLinuxOS是一个面向KDE的发行版，具有定制且始终最新版本的流行桌面环境。不断增长的软件存储库包含其他桌面，并为许多常见任务提供各种各样的桌面软件包。对于系统配置，PCLinuxOS保留了很多Mandriva优秀的控制中心，但是用APT和Synaptic（一个图形化的包管理前端）取代了它的包管理系统。 不利的一面是，PCLinuxOS缺乏任何形式的路线图或发布目标。尽管越来越多的社区参与这个项目，大多数的发展和决策仍然掌握在Texstar的手中，他们在判断发布的稳定性时倾向于保守的一面。因此，PCLinuxOS的开发过程往往是艰巨的。例如，尽管频繁要求64位版本，但开发者直到最近才开始生产64位版本。此外，该项目不提供任何安全建议，而是依靠用户通过所包括的管理工具保持系统最新的状态。 优点：对图形驱动程序，浏览器插件和媒体编解码器的开箱即用支持;滚动更新机制;最新的软件缺点：对非英语语言没有开箱即用的支持;缺乏发布计划和安全建议软件包管理：使用RPM包的高级包工具（APT）可用的版本：KDE，完整的Monty，KDE Minime，LXDE，LXDE Mini，Openbox，Openbox盆景，用于64位（x86_64）处理器体系结构的KDE GentooGentoo是Linux世界最年轻的发行版本，正因为年轻，所以能吸取在她之前的所有发行版本的优点。Gentoo最初由Daniel Robbins（FreeBSD的开发者之一）创建，首个稳定版本发布于2002年。由于开发者对FreeBSD的熟识，所以Gentoo拥有媲美FreeBSD的广受美誉的ports系统 ——Portage包管理系统。 FreeBSDFreeBSD是AT＆T UNIX通过Berkeley Software Distribution（BSD）的间接后裔，它的历史可以追溯到1993年。与Linux发行版不同，Linux发行版被定义为由Linux内核和数千个软件应用程序组成的集成软件解决方案， 而FreeBSD是一个紧密集成的操作系统，由BSD内核和所谓的“用户空间”构成（因此即使没有额外的应用程序也可以使用）。一旦安装在普通的计算机系统上，这种区别就不明显了 – 就像许多Linux发行版一样，大量易于安装的（大部分）开源应用程序也是可支持FreeBSD核心。 FreeBSD已经发展成为一个快速，高性能和非常稳定的操作系统，尤其适用于Web服务和类似的任务。许多具有关键任务计算基础设施的大型网络搜索引擎和组织已经在他们的计算机系统上部署和使用FreeBSD多年。与Linux相比，FreeBSD是在一个限制少得多的许可证下分发的，它允许为任何目的而实际上不受限制的重用和修改源代码。即使是苹果公司的Mac OS X也是从FreeBSD派生出来的。除了核心操作系统之外，该项目还提供了超过24,000个二进制和源代码形式的软件应用程序，以方便安装在FreeBSD核心上。 虽然FreeBSD当然可以用作桌面操作系统，但是它与这个部门中流行的Linux发行版并没有很好的比较。文本模式系统安装程序在硬件检测或系统配置方面提供的功能很少，在安装后的设置中将大部分配置工作留给了用户。在对现代硬件的支持方面，FreeBSD通常落后于Linux，尤其是在支持诸如无线网卡或数码相机等，高端的台式机和笔记本电脑方面。那些试图在桌面或工作站上开发项目的用户，以充分利用FreeBSD的速度和稳定性，而不是FreeBSD本身。 优点：快速稳定;安装24000多个软件应用程序（或“端口”）的可用性;非常好的文档缺点：在支持新颖和异乎寻常的硬件方面，往往落后于Linux，商业应用程序的可用性有限;缺少图形化配置工具软件包管理：使用二进制包或基于源的“端口”（TBZ）的完整命令行包管理基础架构，可用版本：用于AMD64，ARM / ARMEL，i386，IA64，MIPS / MIPSEL，PC98 PowerPC，SPARC64和Xbox处理器的安装CD基于FreeBSD的替代方案：PC-BSD（桌面），GhostBSD（带有GNOME的live DVD）其他BSD的替代品：OpenBSD，NetBSD，DragonFly BSD 下面给为选择一个Linux发行版本犯愁的朋友一些建议如果你只是需要一个桌面系统，而且既不想使用盗版，又不想花大量的钱购买商业软件，那么你就需要一款适合桌面使用的Linux发行版本了，如果你不想自己定制任何东西，不想在系统上浪费太多时间，那么很简单，你就根据自己的爱好在ubuntu、kubuntu以及xubuntu中选一款吧，三者的区别仅仅是桌面程序的不一样。如果你需要一个桌面系统，而且还想非常灵活的定制自己的Linux系统，想让自己的机器跑得更欢，不介意在Linux系统安装方面浪费一点时间，那么你的唯一选择就是Gentoo，尽情享受Gentoo带来的自由快感吧！如果你需要的是一个服务器系统，而且你已经非常厌烦各种Linux的配置，只是想要一个比较稳定的服务器系统而已，那么你最好的选择就是CentOS了，安装完成后，经过简单的配置就能提供非常稳定的服务了。如果你需要的是一个坚如磐石的非常稳定的服务器系统，那么你的唯一选择就是FreeBSD。如果你需要一个稳定的服务器系统，而且想深入摸索一下Linux的各个方面的知识，想自己定制许多内容，那么我推荐你使用Gentoo。 Linux桌面环境早期的 Linux 系统都是不带界面的，只能通过命令来管理，比如运行程序、编辑文档、删除文件等。所以，要想熟练使用 Linux，就必须记忆很多命令。 后来随着 Windows 的普及，计算机界面变得越来越漂亮，点点鼠标就能完成很多工作，人们已经习惯了图形界面化的操作，很难再忍受一片漆黑的命令行窗口了。这推动了 Linux 社区进行变革，很快推出了 Linux 系统的图形界面环境。 完成工作的方式不止一种，Linux 一直以来都以此而闻名，在图形桌面上更是如此，Linux 有各种各样的图形化桌面可供选择。 Linux 中的桌面环境也是一个程序，它和内核不是绑定的，两者的开发也不是同步的；给不带界面的 Linux 系统安装上一个桌面环境，你就能看到各种漂亮的窗口，并能用鼠标点击它们了。 上面所说各种Linux发行版其实默认附带了某种桌面环境，但如果你喜欢折腾，可以更换其他桌面环境 下面给大家介绍几款比较流行的桌面环境： KDEKDE 是 K Desktop Environment 的缩写，中文译为“K桌面环境”。 KDE 是基于大名鼎鼎的 Qt 的，最初于 1996 年作为开源项目公布，并在 1998 年发布了第一个版本，现在 KDE 几乎是排名第一的桌面环境了。 许多流行的 Linux 发行版都提供了 KDE 桌面环境，比如 Ubuntu、Linux Mint、OpenSUSE、Fedora、Kubuntu、PC Linux OS 等。 KDE 和 Windows 比较类似，各位初学者相信都是 Windows 的用户，所以切换到 KDE 也不会有太大的障碍。 KDE 允许你把应用程序图标和文件图标放置在桌面的特定位置上。单击应用程序图标，Linux 系统就会运行该应用程序。单击文件图标，KDE 桌面就会确定使用哪种应用程序来处理该文件。 KDE 是所有桌面环境中最容易定制的。在其他桌面环境中，你需要几个插件、窗口组件和调整工具才可以定制环境，KDE 将所有工具和窗口组件都塞入到系统设置中。借助先进的设置管理器，可以控制一切，不需要任何第三方工具，就可以根据用户的喜好和要求来美化及调整桌面。 KDE 项目组还还发了大量的可运行在 KDE 环境中的应用程序，包括 Dolphin（文件管理工具）、Konsole（终端）、Kate（文本编辑工具）、Gwenview（图片查看工具）、Okular（文档及PDF查看工具）、Digikam（照片编辑和整理工具）、KMail（电子邮件客户软件）、Quassel（IRC客户软件）、K3b（DVD刻录程序）、Krunner（启动器）等，它们都是默认安装的。 对 KDE 优缺点的总结：优点：KDE 几乎是最先进最强大的桌面环境，它外观优美、高度可定制、兼容比较旧的硬件设备缺点：Kmail 等一些组件的配置对新手来说过于复杂。 GNOMEGNOME 是 the GNU Network Object Model Environment 的缩写，中文译为“GNU网络对象模型环境”。 GNOME 于 1999 年首次发布，现已成为许多Linux发行版默认的桌面环境（不过用得最多的是 Red Hat Linux）。 GNOME 的特点是简洁、运行速度快，但是没有太多的定制选项，用户需要安装第三方工具来实现。 GNOME 甚至不包括一些简单的调整选项，比如更改主题、更改字体等，就这两种基本的调整而言，用户都需要安装第三方工具。所以，GONME 适合那些不需要高度定制界面的用户。 GNOME 被用作 Fedora 中的默认桌面环境，提供在几款流行的 Linux 发行版中，比如 Ubuntu、Debian、OpenSUSE 等。 2011 年，GNOME 3 进行了重大更新，不再采用传统的 Windows 风格的界面，而是进行了全新的设计，惊艳了很多用户。GNOME 3 的这种行为也导致部分用户和开发人员不满，他们又开发了多款其他的桌面环境，比如 MATE 和 Cinnamon。 对 GNOME 优缺点的总结：优点：简单易用，可通过插件来扩展功能。缺点：对插件的管理能力比较差，也缺少其它桌面环境拥有的许多功能。 UnityUnity 是由 Ubuntu 的母公司 Canonical 开发的一款外壳。之所以说它是外壳，是因为 Unity 运行在 GNOME 桌面环境之上，使用了所有 GNOME 的核心应用程序。 2010 年，Unity 第一个版本发布，此后经过数次改进，如今和其它的桌面环境一样，也可以安装到其它的 Linux 发行版上了。 Unity 使用了不同的界面风格，如果你用的是 Ubuntu Linux 发行版，你会注意到 Unity 与 KDE 和 GNOME 桌面环境有些不一样。 Unity 在左边有一个启动器，位于启动器顶部的是搜索图标，又叫“Dash”。在 Dash 上搜索文件时，不仅会给出来自硬盘的搜索结果，还会给出来自在线来源的搜索结果，比如 Google Drive、Facebook、Picasa、Flick 及其他。 Unity 还提供了隐藏启动器、触摸侧边栏就显示的选项，用户还可以调高/调低显示启动器菜单的灵敏度。 Unity 很简单、运行速度快，但 Unity 在系统设置下却没有定制桌面的太多选项，要想安装主题或者定制另外不同的选项，比如系统菜单是否应该总是可见，或者“从启动器图标一次点击最小化”，用户需要安装第三方工具。CCSM 和 Unity Tweak Tool 是面向 Unity 桌面环境的非常流行的定制工具。对 Unity 优缺点的总结：优点：界面简洁直观，可以通过第三方工具来深度定制，而且使用了平视显示器（HUD）等新技术。缺点：默认的定制功能比较差劲，通知机制一般。 MATE上面我们提到，GNOME 3 进行了全新的界面设计，这招致一些用户的不满，他们推出了其它的桌面环境，MATE 就是其中之一。 MATE 是一种从现在无人维护的 GNOME 2 代码库派生出来的桌面环境。 MATE 让人觉得在使用旧的桌面环境，但是结合了历年来界面方面的诸多改进。MATE 还非常适用于低配计算机，所以如果你有一台旧的或速度较慢的计算机，可以使用 MATE。 MATE 还是许多流行的 Linux 发行版随带的，比如 Ubuntu、Linux Mint、Mageia、Debian 及另外更多发行版。Ubuntu MATE 头一回是官方版本。 “欢迎首次发布的 Ubuntu MATE 官方版本。现在，用户将更容易更新软件，因为所有组件现在都在 Ubuntu 软件库中。” MATE 自带的应用程序包括 Caja（文件管理工具）、Pluma（文本编辑工具）、Atril（文档查看工具）、Eye of MATE（图像查看工具）等，如果用户不需要其他功能完备的桌面环境的所有额外功能，那么 MATE 对他们来说是一款简单的轻量级桌面环境。 对 META 优缺点的总结：优点：轻量级的桌面环境，能够兼容教旧的硬件设备。缺点：暂无 Cinnamon与 MATE 类似，Cinnamon 是由 Linux Mint 团队因为不满 Gnome 3 的改进而开发的另一种桌面环境。但 Cinnamon 与 MATE 不同之处在于，Cinnamon 建立在 Gnome 3 的基础上。Cinnamon 是新的，而且在积极开发之中，但这款出色的桌面环境没有因新颖而在功能方面有所减弱。 Cinnamon 拥有 GNOME 和 Unity 等其它桌面环境所没有的种种功能。Cinnamon 是高度可定制的桌面环境，不需要任何外部插件、窗口组件和调整工具来定制桌面。Cinnamon 甚至可以通过设置管理器本身来下载并安装主题，甚至不需要打开互联网浏览器。 由于种种出色的所需功能，Cinnamon 对任何刚接触 Linux 的新用户来说都非常方便。许多用户放弃使用 Linux，是因为他们并不了解 Linux 的工作方式，但是我强烈建议新手应从 Cinnamon 桌面环境开始入手。 许多流行的 Linux 发行版提供了各自版本的 Cinnamon，比如 Ubuntu、Fedora、OpenSUSE、Gentoo、Arch Linux 等。Cinnamon 还是 Linux Mint 的默认桌面环境。 对 Cinnamon 优缺点的总结：优点：成熟完美，高度可性质，适合 Linux 新手。缺点：有时候可能会有软件错误]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows下mysql的卸载和安装使用]]></title>
    <url>%2F2019%2F07%2F30%2FLearn%2Fwindows%E4%B8%8Bmysql%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[mysql的卸载停止服务，卸载右键开始菜单，打开powershell(管理员)，cd到windows版mysql的解压路径 1234567891011121314151617181920212223PS C:\Windows\system32&gt; cd D:\ZTGX\github\mysql-8.0.16-winx64PS D:\ZTGX\github\mysql-8.0.16-winx64&gt; ls 目录: D:\ZTGX\github\mysql-8.0.16-winx64Mode LastWriteTime Length Name---- ------------- ------ ----da---- 2019/4/13 22:39 bind----- 2019/7/29 19:42 datada---- 2019/4/13 22:31 docsda---- 2019/4/13 22:31 etcda---- 2019/4/13 22:31 includeda---- 2019/4/13 22:39 libda---- 2019/4/13 22:31 runda---- 2019/4/13 22:31 shareda---- 2019/4/13 22:31 var-a---- 2019/4/13 19:46 335809 LICENSE-a---- 2019/4/13 19:46 101807 LICENSE.router-a---- 2019/7/21 13:14 715 my.ini-a---- 2019/4/13 19:46 687 README-a---- 2019/4/13 19:46 700 README.router 执行服务停止命令 123PS D:\ZTGX\github\mysql-8.0.16-winx64&gt; net stop mysqlMySQL 服务正在停止..MySQL 服务已成功停止。 卸载mysql 12PS D:\ZTGX\github\mysql-8.0.16-winx64&gt; mysqld removeService successfully removed. 打开注册表，删除mysql相关目录win+r打开运行，输入regedit，进入注册表编辑器，删除以下文件 HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\EventLog\Application\MySQLD Service mysql的安装下载mysql压缩包https://dev.mysql.com/downloads/mysql/ 配置环境变量12345NAME: MYSQL_HOMEVALUE: D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64NAME: pathVALUE: %MYSQL_HOME%\bin 新建my.ini文件,data文件夹路径：D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64 my.ini文件： 12345678910111213141516171819202122232425262728[mysqld]# 设置mysql的安装目录basedir=D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64# 设置mysql数据库的数据的存放目录datadir=D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64/data# 设置默认使用的端口port=3306# 允许最大连接数max_connections=200# 允许连接失败的次数。这是为了防止有人试图攻击数据库max_connect_errors=10# 服务端使用的字符集character-set-server=utf8mb4# 数据库字符集对应一些排序等规则使用的字符集collation-server=utf8mb4_general_ci# 创建新表时将使用的默认存储引擎default-storage-engine=INNODB# 默认使用“mysql_native_password”插件作为认证加密方式# MySQL8.0默认认证加密方式为caching_sha2_passworddefault_authentication_plugin=mysql_native_password[mysql]# 设置mysql客户端默认字符集default-character-set=utf8mb4[client]default-character-set=utf8mb4port=3306 以管理员身份运行命令提示符12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061PS C:\Windows\system32&gt; cd D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64#初始化MySQL数据库PS D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64&gt; mysqld --initialize --console2019-07-30T10:50:30.522984Z 0 [System] [MY-013169] [Server] D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64\bin\mysqld.exe (mysqld 8.0.16) initializing of server in progress as process 209522019-07-30T10:50:54.333588Z 5 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: u3qnRFr&gt;(M#a2019-07-30T10:51:03.275327Z 0 [System] [MY-013170] [Server] D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64\bin\mysqld.exe (mysqld 8.0.16) initializing of server has completed#安装MySQL服务PS D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64&gt; mysqld installService successfully installed.#启动MySQL服务PS D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64&gt; net start mysqlMySQL 服务正在启动 ..MySQL 服务已经启动成功。#使用临时密码登录【初始化mysql时产生】PS D:\develop_installation_package\win-mysql-8.0\mysql-8.0.16-winx64&gt; mysql -uroot -pEnter password: ************Welcome to the MySQL monitor. Commands end with ; or \g.#修改mysql登录密码mysql&gt; alter user 'root'@'localhost' identified by '123456';Query OK, 0 rows affected (0.52 sec)#设置mysql远程登录mysql&gt; use mysqlDatabase changedmysql&gt; select host, user, authentication_string, plugin from user;+-----------+------------------+------------------------------------------------------------------------+-----------------------+| host | user | authentication_string | plugin |+-----------+------------------+------------------------------------------------------------------------+-----------------------+| localhost | mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password || localhost | mysql.session | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password || localhost | mysql.sys | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password || localhost | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | mysql_native_password |+-----------+------------------+------------------------------------------------------------------------+-----------------------+4 rows in set (0.00 sec)mysql&gt; create user 'root'@'%' identified by '123456';Query OK, 0 rows affected (0.62 sec)mysql&gt; select host, user, authentication_string, plugin from user;+-----------+------------------+------------------------------------------------------------------------+-----------------------+| host | user | authentication_string | plugin |+-----------+------------------+------------------------------------------------------------------------+-----------------------+| % | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | mysql_native_password || localhost | mysql.infoschema | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password || localhost | mysql.session | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password || localhost | mysql.sys | $A$005$THISISACOMBINATIONOFINVALIDSALTANDPASSWORDTHATMUSTNEVERBRBEUSED | caching_sha2_password || localhost | root | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 | mysql_native_password |+-----------+------------------+------------------------------------------------------------------------+-----------------------+5 rows in set (0.00 sec)mysql&gt; GRANT ALL ON *.* TO 'root'@'%';Query OK, 0 rows affected (0.47 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.13 sec) 说明：mysql 8.0之后，创建用户和赋予权限是分开的，所以需要分开操作。不能再像5.7一样，一条命令创建+赋予远程登录权限]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[solo使用教程]]></title>
    <url>%2F2019%2F07%2F30%2FLearn%2Fsolo%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[注：需要在windows下安装mysql，具体步骤：http://www.zzditto.cn/2019/07/30/windows%E4%B8%8Bmysql%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/#more 登录mysql，创建solo数据库12mysql&gt; create database solo;Query OK, 1 row affected (0.64 sec) 下载solo安装包https://github.com/b3log/solo/releases?utm_source=hacpai.com 下载 solo-v3.6.3.war 解压，进入解压目录执行解压目录下，shift+鼠标右键，选择powershell窗口 1234567PS D:\develop_installation_package\solo\solo-v3.6.3&gt; java -cp "WEB-INF/lib/*;WEB-INF/classes" org.b3log.solo.Starter[INFO ]-[2019-07-30 20:42:23]-[org.b3log.solo.util.Markdowns:135]: [markdown-http] is not available, uses built-in [flexmark] for markdown processing. Please read FAQ section in user guide (https://hacpai.com/article/1492881378588) for more details.[INFO ]-[2019-07-30 20:42:23]-[org.b3log.solo.SoloServletListener:99]: Solo is booting [ver=3.6.3, servletContainer=jetty/9.4.12.v20180830, os=Windows 10, isDocker=false, markdownHttpAvailable=false, pid=7640, runtimeDatabase=MYSQL, runtimeMode=PRODUCTION, jdbc.username=root, jdbc.URL=jdbc:mysql://localhost:3306/solo?useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=UTC][INFO ]-[2019-07-30 20:42:23]-[com.zaxxer.hikari.HikariDataSource:110]: HikariPool-1 - Starting...[INFO ]-[2019-07-30 20:42:23]-[com.zaxxer.hikari.HikariDataSource:123]: HikariPool-1 - Start completed.[INFO ]-[2019-07-30 20:42:23]-[org.b3log.solo.service.InitService:191]: It's your first time setup Solo, initialize tables in database [MYSQL][WARN ]-[2019-07-30 20:42:28]-[org.b3log.solo.service.InitService:161]: Solo has not been initialized, please open your browser to init Solo 访问web页面localhost:8080 需要注册github账号，注册地址：https://github.com/join?source=header-home点击：开始使用，输入github账号即可使用]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Solo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo使用教程]]></title>
    <url>%2F2019%2F07%2F30%2FLearn%2Fhexo%E7%9A%84%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[windows环境 安装node.jshttps://nodejs.org/en/ 安装githttps://git-scm.com/download/win 使用管理员权限操作命令行开始菜单点击鼠标右键，选择powershell(管理员) 执行命令安装hexo1234567PS C:\Windows\system32&gt; npm install -g hexo-cliC:\Users\LWZ22\AppData\Roaming\npm\hexo -&gt; C:\Users\LWZ22\AppData\Roaming\npm\node_modules\hexo-cli\bin\hexonpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\hexo-cli\node_modules\fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"win32","arch":"x64"&#125;)+ hexo-cli@2.0.0added 187 packages from 432 contributors in 108.919s 初始化hexo。路径为自定义路径【这里是在D盘下新建blog文件夹】 123456789101112131415161718192021222324PS C:\Windows\system32&gt; hexo init D:\blogINFO Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitCloning into 'D:\blog'...remote: Enumerating objects: 9, done.remote: Counting objects: 100% (9/9), done.remote: Compressing objects: 100% (7/7), done.remote: Total 77 (delta 4), reused 5 (delta 2), pack-reused 68Unpacking objects: 100% (77/77), done.Submodule 'themes/landscape' (https://github.com/hexojs/hexo-theme-landscape.git) registered for path 'themes/landscape'Cloning into 'D:/blog/themes/landscape'...remote: Enumerating objects: 43, done.remote: Counting objects: 100% (43/43), done.remote: Compressing objects: 100% (34/34), done.remote: Total 956 (delta 19), reused 19 (delta 8), pack-reused 913Receiving objects: 100% (956/956), 3.16 MiB | 30.00 KiB/s, done.Resolving deltas: 100% (509/509), done.Submodule path 'themes/landscape': checked out '73a23c51f8487cfcd7c6deec96ccc7543960d350'[32mINFO [39m Install dependencies系统找不到指定的路径。Error: JAVA_HOME is incorrectly set. Please update D:\install\hadoop-2.7.6.tar\hadoop-2.7.6\conf\hadoop-env.cmd'-Dhadoop.log.dir' 不是内部或外部命令，也不是可运行的程序或批处理文件。INFO Start blogging with Hexo! cd到博客目录，执行安装程序 123456789PS C:\Windows\system32&gt; cd D:\blogPS D:\blog&gt; npm installnpm WARN deprecated core-js@1.2.7: core-js@&lt;2.6.8 is no longer maintained. Please, upgrade to core-js@3 or at least to actual version of core-js@2.npm notice created a lockfile as package-lock.json. You should commit this file.npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"win32","arch":"x64"&#125;)added 340 packages from 500 contributors and audited 6879 packages in 68.479sfound 0 vulnerabilities 安装完成，打开web页面hexo s 或 hexo server 123PS D:\blog&gt; hexo serverINFO Start processingINFO Hexo is running at http://localhost:4000 . Press Ctrl+C to stop. 浏览器访问 localhost:4000 将hexo部署到github 点击 git Bash 【需要上传的命令都需要git bash，使用cmd.exe会报错】点击github页面，新建仓库。仓库名为 用户名.github.io。然后复制仓库总网址 在blog目录下安装git插件123456789LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ npm install --save hexo-deployer-gitnpm WARN babel-eslint@10.0.2 requires a peer of eslint@&gt;= 4.12.1 but none is installed. You must install peer dependencies yourself.npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.9 (node_modules\fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.9: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"win32","arch":"x64"&#125;)+ hexo-deployer-git@1.0.0added 24 packages from 10 contributors and audited 9166 packages in 21.011sfound 0 vulnerabilities 编辑blog的_config.yml文件【设置type为git，添加repo和branch】123456# Deployment## Docs: https://hexo.io/docs/deployment.htmldeploy: type: git repo: https://github.com/zzditto/zzditto.github.io.git branch: master 在git bash中设置github的邮箱和用户名如果不输入，直接hexo d上传，报错 12345*** Please tell me who you are.Run git config --global user.email "you@example.com" git config --global user.name "Your Name" 在命令行输入： 12345LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ git config --global user.email "18332779639@163.com"LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ git config --global user.name "zzditto" 上传命令： hexo d 然后会提示输入github的用户名和密码，登录，稍等片刻，上传成功 使用github访问https://zzditto.github.io/ 创建第一篇博客在blog即博客安装的总目录下，鼠标右键，打开git bash窗口 创建md文件123LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ hexo new '第一篇博客'INFO Created: D:\blog\source\_posts\第一篇博客.md 在md文件中添加内容打开win下的博客目录，使用makedown编辑器打开此文件，添加内容，ctrl+s保存 清除原来缓存1234LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ hexo cleanINFO Deleted database.INFO Deleted public folder. 重新生成html页面文件123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ hexo gINFO Start processingINFO Files loaded in 659 msINFO Generated: index.htmlINFO Generated: tags/index.htmlINFO Generated: about/index.htmlINFO Generated: schedule/index.htmlINFO Generated: categories/index.htmlINFO Generated: CNAMEINFO Generated: archives/index.htmlINFO Generated: images/cc-by-nc-nd.svgINFO Generated: images/avatar.gifINFO Generated: images/algolia_logo.svgINFO Generated: images/cc-by-nd.svgINFO Generated: images/cc-by-nc-sa.svgINFO Generated: images/cc-by-nc.svgINFO Generated: images/cc-by-sa.svgINFO Generated: images/cc-by.svgINFO Generated: images/apple-touch-icon-next.pngINFO Generated: images/cc-zero.svgINFO Generated: images/logo.svgINFO Generated: images/quote-l.svgINFO Generated: images/favicon-16x16-next.pngINFO Generated: images/quote-r.svgINFO Generated: images/favicon-32x32-next.pngINFO Generated: archives/2019/07/index.htmlINFO Generated: categories/大数据/linux/index.htmlINFO Generated: categories/实战教程/index.htmlINFO Generated: tags/Linux/index.htmlINFO Generated: tags/Ambari/index.htmlINFO Generated: tags/实战教程/index.htmlINFO Generated: tags/HDP/index.htmlINFO Generated: archives/2019/index.htmlINFO Generated: categories/大数据/index.htmlINFO Generated: lib/font-awesome/HELP-US-OUT.txtINFO Generated: js/algolia-search.jsINFO Generated: css/main.cssINFO Generated: js/affix.jsINFO Generated: js/exturl.jsINFO Generated: js/js.cookie.jsINFO Generated: js/post-details.jsINFO Generated: js/next-boot.jsINFO Generated: js/scroll-cookie.jsINFO Generated: js/scrollspy.jsINFO Generated: lib/font-awesome/bower.jsonINFO Generated: js/motion.jsINFO Generated: live2dw/lib/L2Dwidget.min.jsINFO Generated: lib/velocity/velocity.ui.min.jsINFO Generated: lib/font-awesome/fonts/fontawesome-webfont.woffINFO Generated: js/utils.jsINFO Generated: live2dw/lib/L2Dwidget.min.js.mapINFO Generated: lib/font-awesome/fonts/fontawesome-webfont.woff2INFO Generated: lib/velocity/velocity.min.jsINFO Generated: lib/velocity/velocity.ui.jsINFO Generated: 2019/07/30/第一篇博客/index.htmlINFO Generated: 2019/07/23/hello-world/index.htmlINFO Generated: 2019/07/24/test-md/index.htmlINFO Generated: live2dw/lib/L2Dwidget.0.min.jsINFO Generated: js/schemes/pisces.jsINFO Generated: lib/font-awesome/fonts/fontawesome-webfont.eotINFO Generated: 2019/07/30/hexo使用教程/index.htmlINFO Generated: lib/font-awesome/css/font-awesome.css.mapINFO Generated: js/schemes/muse.jsINFO Generated: lib/font-awesome/css/font-awesome.min.cssINFO Generated: lib/font-awesome/css/font-awesome.cssINFO Generated: 2019/07/24/Ambari离线安装/index.htmlINFO Generated: live2dw/lib/L2Dwidget.0.min.js.mapINFO Generated: lib/jquery/index.jsINFO Generated: lib/velocity/velocity.jsINFO 66 files generated in 1.46 sINFO Congratulations! Your are using the latest version of theme NexT. 启动12345LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ hexo sINFO Start processingINFO Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.INFO Congratulations! Your are using the latest version of theme NexT. 同步至github123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108LWZ@DESKTOP-AB2NRQ5 MINGW64 /d/blog$ hexo dINFO Deploying: gitINFO Clearing .deploy_git folder...INFO Copying files from public folder...INFO Copying files from extend dirs...warning: LF will be replaced by CRLF in 2019/07/23/hello-world/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in 2019/07/24/Ambari离线安装/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in 2019/07/24/test-md/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in about/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in archives/2019/07/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in archives/2019/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in archives/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in categories/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in categories/大数据/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in css/main.css.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/affix.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/algolia-search.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/exturl.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/js.cookie.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/motion.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/next-boot.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/post-details.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/schemes/muse.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/schemes/pisces.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/scroll-cookie.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/scrollspy.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in js/utils.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/font-awesome/css/font-awesome.css.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/font-awesome/css/font-awesome.min.css.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/jquery/index.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/velocity/velocity.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/velocity/velocity.min.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/velocity/velocity.ui.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in lib/velocity/velocity.ui.min.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in live2dw/lib/L2Dwidget.0.min.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in live2dw/lib/L2Dwidget.min.js.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in schedule/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in tags/Ambari/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in tags/HDP/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in tags/Linux/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in tags/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in 2019/07/30/hexo使用教程/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in 2019/07/30/第一篇博客/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in categories/大数据/linux/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in categories/实战教程/index.html.The file will have its original line endings in your working directorywarning: LF will be replaced by CRLF in tags/实战教程/index.html.The file will have its original line endings in your working directory[master 4c2c499] Site updated: 2019-07-30 13:19:35 21 files changed, 6538 insertions(+), 88 deletions(-) create mode 100644 "2019/07/30/hexo\344\275\277\347\224\250\346\225\231\347\250\213/index.html" create mode 100644 "2019/07/30/\347\254\254\344\270\200\347\257\207\345\215\232\345\256\242/index.html" create mode 100644 "categories/\345\244\247\346\225\260\346\215\256/linux/index.html" create mode 100644 "categories/\345\256\236\346\210\230\346\225\231\347\250\213/index.html" create mode 100644 "tags/\345\256\236\346\210\230\346\225\231\347\250\213/index.html"Enumerating objects: 84, done.Counting objects: 100% (84/84), done.Delta compression using up to 12 threadsCompressing objects: 100% (31/31), done.Writing objects: 100% (48/48), 10.89 KiB | 857.00 KiB/s, done.Total 48 (delta 21), reused 0 (delta 0)remote: Resolving deltas: 100% (21/21), completed with 15 local objects.To https://github.com/zzditto/zzditto.github.io.git d462eae..4c2c499 HEAD -&gt; masterBranch 'master' set up to track remote branch 'master' from 'https://github.com/zzditto/zzditto.github.io.git'.INFO Deploy done: git 访问本机：localhost:4000 网络:http://zzditto.github.io 绑定域名后:http://www.zzditto.cn/]]></content>
      <categories>
        <category>Learn</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HDP离线安装]]></title>
    <url>%2F2019%2F07%2F24%2FBigData%2FHDP%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%2F</url>
    <content type="text"><![CDATA[注意在实际生产环境下，需要离线安装，但是一般都是自定义yum源，将所需的rpm软件包及其依赖提前准备好并制作一个yum源服务器，供集群的各节点使用。本文采用的方法很笨，具体yum源的制作请看https://zzditto.cn/2019/08/19/BigData/HDP%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%88%B6%E4%BD%9C%E6%9C%AC%E5%9C%B0yum%E6%BA%90/;https://zzditto.cn/2019/08/19/BigData/yum%E4%B8%8B%E8%BD%BDrpm%E4%BB%A5%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%8C%85/,下文对软件的安装在yum源制作完成之后，都可使用yum -y install packagename 安装。 1.检查系统版本HDP2.6需要centos7版本注：系统需要linux的虚拟化主机版或者桌面版。最小化安装缺乏mysql安装的部分依赖包 cat /etc/redhat-release 适用于Redhat系linux12[root@localhost ~]# cat /etc/redhat-releaseCentOS Linux release 7.6.1810 (Core) 2.检查分区硬盘大小123456789[root@localhost ~]# df -THFilesystem Type Size Used Avail Use% Mounted on/dev/mapper/centos-root xfs 19G 11G 7.8G 58% /devtmpfs devtmpfs 3.1G 0 3.1G 0% /devtmpfs tmpfs 3.1G 0 3.1G 0% /dev/shmtmpfs tmpfs 3.1G 13M 3.1G 1% /runtmpfs tmpfs 3.1G 0 3.1G 0% /sys/fs/cgroup/dev/sda1 xfs 1.1G 153M 911M 15% /boottmpfs tmpfs 607M 0 607M 0% /run/user/0 系统要求：【需在装载系统时分好】root：100Gswap：同内存大小home：40G数据盘：剩余容量 3.准备离线资源包JDKhttps://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html ntphttpdyummysqlmysql-connectmariadbpostgresqlAmbarihttps://docs.hortonworks.com/HDPDocuments/Ambari-2.6.2.2/bk_ambari-installation/content/ambari_repositories.html HDPhttps://docs.hortonworks.com/HDPDocuments/Ambari-2.6.2.2/bk_ambari-installation/content/hdp_26_repositories.html 1234567891011[root@vm01 apps]# lltotal 0drwxr-xr-x. 2 root root 100 Aug 15 10:08 httpddrwxr-xr-x. 2 root root 40 Aug 15 10:07 jdkdrwxr-xr-x. 2 root root 54 Aug 15 10:08 mysqldrwxr-xr-x. 2 root root 48 Aug 15 10:09 mysql-connectdrwxr-xr-x. 2 root root 143 Aug 15 10:09 ntpdrwxr-xr-x. 2 root root 150 Aug 15 10:12 postgresqldrwxr-xr-x. 2 root root 183 Aug 15 10:13 yum[root@vm01 apps]# pwd/opt/apps HDP和Ambari体积较大，可提前上传 4.新机器要干的事情设置ip【all】12345678910111213141516171819[root@localhost ~]# cd /etc/sysconfig/network-scripts/[root@localhost network-scripts]# vi ifcfg-ens33TYPE=EthernetBOOTPROTO=staticDEFROUTE=yesIPV4_FAILURE_FATAL=noIPV6INIT=yesIPV6_AUTOCONF=yesIPV6_DEFROUTE=yesIPV6_FAILURE_FATAL=noIPV6_ADDR_GEN_MODE=stable-privacyNAME=ens33DEVICE=ens33ONBOOT=yesIPADDR=192.168.133.3NETMASK=255.255.255.0GATEWAY=192.168.133.2DNS1=8.8.8.8DNS2=114.114.114.114 集群中每个节点需不同设置，不同之处在于IPADDR。设置完之后重启网络服务 1[root@localhost network-scripts]# systemctl restart network 查看本机ip是否更改成功，并尝试ping其他节点和外网123456789101112131415161718192021222324[root@localhost network-scripts]# ip addr1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:0c:29:6f:d4:70 brd ff:ff:ff:ff:ff:ff inet 192.168.133.3/24 brd 192.168.133.255 scope global noprefixroute ens33 valid_lft forever preferred_lft forever inet6 fe80::1a15:8411:8d59:624e/64 scope link noprefixroute valid_lft forever preferred_lft forever[root@localhost network-scripts]# ping 192.168.133.4PING 192.168.133.4 (192.168.133.4) 56(84) bytes of data.64 bytes from 192.168.133.4: icmp_seq=1 ttl=64 time=0.349 ms64 bytes from 192.168.133.4: icmp_seq=2 ttl=64 time=0.232 ms^C--- 192.168.133.4 ping statistics ---2 packets transmitted, 2 received, 0% packet loss, time 1000msrtt min/avg/max/mdev = 0.232/0.290/0.349/0.060 ms[root@localhost network-scripts]# ping www.baidu.comping: www.baidu.com: Name or service not known离线安装，无法ping通外网 修改主机名【all】12[root@localhost network-scripts]# vi /etc/hostnamevm01 每个节点分别修改，修改需要重启生效！！！ 修改/etc/sysconfig/network【all】123[root@vm01 ~]# vi /etc/sysconfig/network# Created by anacondaNETWORKING=yes 每个节点分别修改 关闭防火墙【all】关闭防火墙，设置开机不自启。每个节点分别设置 1234567[root@vm01 jdk]# systemctl stop firewalld[root@vm01 jdk]# systemctl disable firewalld[root@vm01 jdk]# systemctl status firewalld● firewalld.service - firewalld - dynamic firewall daemon Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled) Active: inactive (dead) Docs: man:firewalld(1) 修改主机映射【all】123456[root@vm01 ~]# vi /etc/hosts127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6192.168.133.3 vm01192.168.133.4 vm02192.168.133.5 vm03 发送到每个节点 123456[root@vm01 apps]# for i in &#123;2,3&#125;;&gt; do&gt; scp /etc/hosts vm0$i:/etc/&gt; done;hosts 100% 221 183.4KB/s 00:00hosts 100% 221 122.0KB/s 00:00 ssh免密登录【master】注意：发送公匙时，主节点也需要发送 123456789101112131415161718192021[root@vm01 ~]# ssh-keygen -t rsaGenerating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa):Enter passphrase (empty for no passphrase):Enter same passphrase again:Your identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:N/7YjYkiwm7xGSUtkb/qRagW1X7GWoc8O7STCBz3eKU root@vm01The key's randomart image is:+---[RSA 2048]----+| . || o. || o+o . || oo=+= + || . ++S.E . || .o.o.@ B || .oo ++ B || .+ =.. B + || o.o.. .o = . |+----[SHA256]-----+ 12345678910[root@vm01 ~]# ssh-copy-id vm01/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysroot@vm01's password:Number of key(s) added: 1Now try logging into the machine, with: "ssh 'vm01'"and check to make sure that only the key(s) you wanted were added. 12345678910[root@vm01 ~]# ssh-copy-id vm02/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysroot@vm02's password:Number of key(s) added: 1Now try logging into the machine, with: "ssh 'vm02'"and check to make sure that only the key(s) you wanted were added. 12345678910[root@vm01 ~]# ssh-copy-id vm03/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/root/.ssh/id_rsa.pub"/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keysroot@vm03's password:Number of key(s) added: 1Now try logging into the machine, with: "ssh 'vm03'"and check to make sure that only the key(s) you wanted were added. 测试免密登录是否成功： 1234[root@vm01 ~]# ssh vm01 date;ssh vm02 date;ssh vm03 date;Wed Jul 24 14:07:28 CST 2019Wed Jul 24 14:07:28 CST 2019Wed Jul 24 13:26:38 CST 2019 如果发现ssh连接其他机器较慢解决： 123456789101112131415[root@vm01 apps]# vi /etc/ssh/sshd_config#PermitUserEnvironment no#Compression delayed#ClientAliveInterval 0#ClientAliveCountMax 3#ShowPatchLevel noUseDNS no#PidFile /var/run/sshd.pid#MaxStartups 10:30:100#PermitTunnel no#ChrootDirectory none[root@vm01 apps]# systemctl restart sshd 修改ssh设置里的usedns为no，此值被注释，默认是yes参考：https://blog.csdn.net/kanghaha/article/details/51986771 重启网络服务【all】 1[root@localhost network-scripts]# systemctl restart network 安装jdk【all】上传，解压 123456[root@vm01 jdk]# pwd/opt/apps/jdk[root@vm01 jdk]# lltotal 181168drwxr-xr-x. 8 10 143 255 Jul 22 2017 jdk1.8.0_144-rw-r--r--. 1 root root 185515842 Jul 24 11:33 jdk-8u144-linux-x64.tar.gz 分发jdk包 12345# &#123;2,5&#125;代表循环到2和5，不是2~5[root@vm01 apps]# for i in &#123;2,3&#125;&gt; do&gt; scp -r ./jdk/jdk1.8.0_144/ vm0$i:/opt/apps/jdk/&gt; done; 配置环境变量 123[root@vm01 jdk1.8.0_144]# vi /etc/profileexport JAVA_HOME=/opt/apps/jdk/jdk1.8.0_144export PATH=$PATH:$JAVA_HOME/bin 更新，并分发 123456789[root@vm01 apps]# source /etc/profile[root@vm01 apps]# jps3543 Jps[root@vm01 apps]# for i in &#123;2,3&#125;&gt; do&gt; scp /etc/profile vm0$i:/etc/&gt; done;profile 100% 1898 1.5MB/s 00:00profile 100% 1898 1.0MB/s 00:00 其余节点，同更新检查是否配置成功 12[root@vm01 jdk1.8.0_144]# jps20110 Jps 修改文件限制【all】1234567891011121314[root@vm01 jdk]# vi /etc/security/limits.conf#在conf文件末尾添加#End of file* soft nofile 65536* hard nofile 65536* soft nproc 131072* hard nproc 131072[root@vm01 apps]# for i in &#123;2,3&#125;&gt; do&gt; scp /etc/security/limits.conf vm0$i:/etc/security/&gt; done;limits.conf 100% 2502 2.0MB/s 00:00limits.conf 100% 2502 1.8MB/s 00:00 关闭selinux【all】设置并分发 12345678910111213141516171819[root@vm01 jdk1.8.0_144]# vi /etc/selinux/config# This file controls the state of SELinux on the system.# SELINUX= can take one of these three values:# enforcing - SELinux security policy is enforced.# permissive - SELinux prints warnings instead of enforcing.# disabled - No SELinux policy is loaded.SELINUX=disabled# SELINUXTYPE= can take one of three values:# targeted - Targeted processes are protected,# minimum - Modification of targeted policy. Only selected processes are protected.# mls - Multi Level Security protection.SELINUXTYPE=targeted[root@vm01 apps]# for i in &#123;2,3&#125;&gt; do&gt; scp /etc/selinux/config vm0$i:/etc/selinux/&gt; done;config 100% 546 907.1KB/s 00:00config 100% 546 732.2KB/s 00:00 同步时钟【all】上传ntp的rpm包，安装。 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051[root@vm03 ntp]# lltotal 2428-rw-r--r--. 1 root root 67624 Aug 16 18:15 autogen-libopts-5.18-5.el7.x86_64.rpm-rw-r--r--. 1 root root 562052 Aug 16 18:15 ntp-4.2.6p5-28.el7.centos.x86_64.rpm-rw-r--r--. 1 root root 88004 Aug 16 18:15 ntpdate-4.2.6p5-28.el7.centos.x86_64.rpm-rw-r--r-- 1 root root 504632 Aug 16 18:14 openssl-1.0.2k-16.el7_6.1.x86_64.rpm-rw-r--r-- 1 root root 1251908 Aug 16 18:14 openssl-libs-1.0.2k-16.el7_6.1.x86_64.rpm[root@vm01 apps]# for i in &#123;2,3&#125;&gt; do&gt; scp -r /opt/apps/ntp/ vm0$i:/opt/apps/&gt; done;#报错，这是需要升级。卸载旧的，安装新的即可[root@vm03 ntp]# rpm -ivh openssl-libs-1.0.2k-16.el7_6.1.x86_64.rpmwarning: openssl-libs-1.0.2k-16.el7_6.1.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%] file /usr/lib64/.libcrypto.so.10.hmac from install of openssl-libs-1:1.0.2k-16.el7_6.1.x86_64 conflicts with file from package openssl-libs-1:1.0.1e-60.el7.x86_64[root@vm03 ntp]# rpm -e --nodeps openssl-libs-1:1.0.1e-60.el7.x86_64[root@vm03 ntp]# rpm -ivh openssl-libs-1.0.2k-16.el7_6.1.x86_64.rpmwarning: openssl-libs-1.0.2k-16.el7_6.1.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:openssl-libs-1:1.0.2k-16.el7_6.1 ################################# [100%][root@vm03 ntp]# rpm -e --nodeps openssl-1:1.0.1e-60.el7.x86_64[root@vm03 ntp]# rpm -ivh openssl-1.0.2k-16.el7_6.1.x86_64.rpmwarning: openssl-1.0.2k-16.el7_6.1.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:openssl-1:1.0.2k-16.el7_6.1 ################################# [100%][root@vm03 ntp]# rpm -e --nodeps ntpdate-4.2.6p5-25.el7.centos.x86_64[root@vm03 ntp]# rpm -ivh ntpdate-4.2.6p5-28.el7.centos.x86_64.rpmwarning: ntpdate-4.2.6p5-28.el7.centos.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:ntpdate-4.2.6p5-28.el7.centos ################################# [100%][root@vm03 ntp]# rpm -ivh autogen-libopts-5.18-5.el7.x86_64.rpmwarning: autogen-libopts-5.18-5.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%] package autogen-libopts-5.18-5.el7.x86_64 is already installed[root@vm03 ntp]# rpm -ivh ntp-4.2.6p5-28.el7.centos.x86_64.rpmwarning: ntp-4.2.6p5-28.el7.centos.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:ntp-4.2.6p5-28.el7.centos ################################# [100%]成都 安装时，需按照依赖性顺序安装，否则会报错安装好后，启动，设置开机自启。分节点安装设置 123456789101112131415161718192021[root@vm01 ntp]# systemctl start ntpd[root@vm01 ntp]# systemctl enable ntpdCreated symlink from /etc/systemd/system/multi-user.target.wants/ntpd.service to /usr/lib/systemd/system/ntpd.service.[root@vm01 ntp]# systemctl status ntpd● ntpd.service - Network Time Service Loaded: loaded (/usr/lib/systemd/system/ntpd.service; enabled; vendor preset: disabled) Active: active (running) since Wed 2019-07-24 11:58:03 CST; 12s ago Main PID: 20257 (ntpd) CGroup: /system.slice/ntpd.service └─20257 /usr/sbin/ntpd -u ntp:ntp -gJul 24 11:58:03 vm01 ntpd[20257]: proto: precision = 0.028 usecJul 24 11:58:03 vm01 ntpd[20257]: 0.0.0.0 c01d 0d kern kernel time sync enabledJul 24 11:58:03 vm01 ntpd[20257]: ntp_io: estimated max descriptors: 1024, initial socket boundary: 16Jul 24 11:58:03 vm01 ntpd[20257]: Listen and drop on 0 v4wildcard 0.0.0.0 UDP 123Jul 24 11:58:03 vm01 ntpd[20257]: Listen and drop on 1 v6wildcard :: UDP 123Jul 24 11:58:03 vm01 ntpd[20257]: Listen normally on 2 lo 127.0.0.1 UDP 123Jul 24 11:58:03 vm01 ntpd[20257]: Listen normally on 3 ens33 192.168.133.3 UDP 123Jul 24 11:58:03 vm01 ntpd[20257]: Listen normally on 4 lo ::1 UDP 123Jul 24 11:58:03 vm01 ntpd[20257]: Listen normally on 5 ens33 fe80::1a15:8411:8d59:624e UDP 123Jul 24 11:58:03 vm01 ntpd[20257]: Listening on routing socket on fd #22 for interface updates 配置ntp参数 内网环境，无法连通外网。主节点这里使用date -s调整时间【安装系统时设置时间】，ntp设为与本地同步从节点设置与主节点同步目的：保障集群各节点时间相同即可 【如果集群中某台机器可以连接外网，则设置此集群为ntp服务器，其他机器与此机器进行ntp时间同步】 主节点： 12345678910111213141516171819202122232425262728[root@vm01 ~]# vi /etc/ntp.conf# Permit all access over the loopback interface. This could# be tightened as well, but to do so would effect some of# the administrative functions.restrict 127.0.0.1restrict ::1# Hosts on local network are less restricted.#允许内网其他机器同步时间restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).#server 0.centos.pool.ntp.org iburst#server 1.centos.pool.ntp.org iburst#server 2.centos.pool.ntp.org iburst#server 3.centos.pool.ntp.org iburst#设置与本地时间同步server 127.127.1.0 preferfudge 127.127.1.0 stratum 10#broadcast 192.168.1.255 autokey # broadcast server#broadcastclient # broadcast client#broadcast 224.0.1.1 autokey # multicast server#multicastclient 224.0.1.1 # multicast client#manycastserver 239.255.254.254 # manycast server#manycastclient 239.255.254.254 autokey # manycast client 查看： 1234[root@vm01 ~]# ntpq -p remote refid st t when poll reach delay offset jitter==============================================================================*LOCAL(0) .LOCL. 5 l 19 64 77 0.000 0.000 0.000 从节点： 123456789101112131415161718192021222324252627[root@vm02 ~]# vi /etc/ntp.confrestrict 127.0.0.1restrict ::1# Hosts on local network are less restricted.#restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap# Use public servers from the pool.ntp.org project.# Please consider joining the pool (http://www.pool.ntp.org/join.html).#server 0.centos.pool.ntp.org iburst#server 1.centos.pool.ntp.org iburst#server 2.centos.pool.ntp.org iburst#server 3.centos.pool.ntp.org iburst#设置与主节点ip同步server 192.168.133.3 prefer#设置副设置与本地同步server 127.127.1.0fudge 127.127.1.0 stratum 10#broadcast 192.168.1.255 autokey # broadcast server#broadcastclient # broadcast client#broadcast 224.0.1.1 autokey # multicast server#multicastclient 224.0.1.1 # multicast client#manycastserver 239.255.254.254 # manycast server#manycastclient 239.255.254.254 autokey # manycast client 查看： 12345[root@vm03 ntp]# ntpq -p remote refid st t when poll reach delay offset jitter============================================================================== vm01 LOCAL(0) 11 u 26 64 1 0.297 9.103 0.000*LOCAL(0) .LOCL. 10 l 25 64 1 0.000 0.000 0.000 5.修改yum源，增加HDP的yum源安装httpd服务器上传，安装，启动，设置开机自启 12345678910111213141516171819202122232425262728293031323334353637383940[root@vm01 httpd]# lltotal 3100-rw-r--r--. 1 root root 105728 Aug 15 11:59 apr-1.4.8-3.el7_4.1.x86_64.rpm-rw-r--r--. 1 root root 94132 Aug 15 11:59 apr-util-1.5.2-6.el7.x86_64.rpm-rw-r--r--. 1 root root 2844220 Aug 15 10:08 httpd-2.4.6-89.el7.centos.x86_64.rpm-rw-r--r--. 1 root root 92616 Aug 15 10:08 httpd-tools-2.4.6-89.el7.centos.x86_64.rpm-rw-r--r--. 1 root root 31264 Aug 15 11:59 mailcap-2.1.41-2.el7.noarch.rpm[root@vm01 httpd]# pwd/opt/apps/httpd[root@vm01 httpd]# rpm -ivh apr-1.4.8-3.el7_4.1.x86_64.rpmwarning: apr-1.4.8-3.el7_4.1.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:apr-1.4.8-3.el7_4.1 ################################# [100%][root@vm01 httpd]# rpm -ivh apr-util-1.5.2-6.el7.x86_64.rpmwarning: apr-util-1.5.2-6.el7.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:apr-util-1.5.2-6.el7 ################################# [100%][root@vm01 httpd]# rpm -ivh mailcap-2.1.41-2.el7.noarch.rpmwarning: mailcap-2.1.41-2.el7.noarch.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:mailcap-2.1.41-2.el7 ################################# [100%][root@vm01 httpd]# rpm -ivh httpd-tools-2.4.6-89.el7.centos.x86_64.rpmwarning: httpd-tools-2.4.6-89.el7.centos.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:httpd-tools-2.4.6-89.el7.centos ################################# [100%][root@vm01 httpd]# rpm -ivh httpd-2.4.6-89.el7.centos.x86_64.rpmwarning: httpd-2.4.6-89.el7.centos.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEYPreparing... ################################# [100%]Updating / installing... 1:httpd-2.4.6-89.el7.centos ################################# [100%][root@vm01 httpd]# systemctl start httpd[root@vm01 httpd]# systemctl enable httpdCreated symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service. HDP安装包上传至/var/www/html文件夹12345678[root@vm01 ambari]# lltotal 8949860-rw-r--r--. 1 root root 1823779835 Jul 23 18:26 ambari-2.6.2.2-centos7.tar.gz-rw-r--r--. 1 root root 7249933344 Jul 23 18:24 HDP-2.6.5.0-centos7-rpm.tar.gz-rw-r--r--. 1 root root 328623 Jul 23 18:24 HDP-GPL-2.6.5.0-centos7-gpl.tar.gz-rw-r--r--. 1 root root 90606616 Jul 23 18:24 HDP-UTILS-1.1.0.22-centos7.tar.gz[root@vm01 ambari]# pwd/var/www/html/ambari 解压： 1234[root@vm01 ambari]# tar -zxvf ambari-2.6.2.2-centos7.tar.gz[root@vm01 ambari]# tar -zxvf HDP-2.6.5.0-centos7-rpm.tar.gz[root@vm01 ambari]# tar -zxvf HDP-GPL-2.6.5.0-centos7-gpl.tar.gz[root@vm01 ambari]# tar -zxvf HDP-UTILS-1.1.0.22-centos7.tar.gz 删除： 1234[root@vm01 ambari]# rm -rf ambari-2.6.2.2-centos7.tar.gz[root@vm01 ambari]# rm -rf HDP-2.6.5.0-centos7-rpm.tar.gz[root@vm01 ambari]# rm -rf HDP-GPL-2.6.5.0-centos7-gpl.tar.gz[root@vm01 ambari]# rm -rf HDP-UTILS-1.1.0.22-centos7.tar.gz 访问：http://192.168.133.3/ambari/ 查看是否成功 制作hdp本地源上传，安装 12345678910111213141516171819202122232425[root@vm01 yum]# pwd/opt/apps/yum[root@vm01 yum]# lltotal 244-rw-r--r-- 1 root root 95840 Aug 10 2017 createrepo-0.9.9-28.el7.noarch.rpm-rw-r--r-- 1 root root 83984 Jul 4 2014 deltarpm-3.6-3.el7.x86_64.rpm-rw-r--r-- 1 root root 32084 Jul 4 2014 python-deltarpm-3.6-3.el7.x86_64.rpm-rw-r--r-- 1 root root 29388 Nov 12 2018 yum-plugin-priorities-1.1.31-50.el7.noarch.rpm[root@vm01 yum]# rpm -ivh deltarpm-3.6-3.el7.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:deltarpm-3.6-3.el7 ################################# [100%][root@vm01 yum]# rpm -ivh python-deltarpm-3.6-3.el7.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:python-deltarpm-3.6-3.el7 ################################# [100%][root@vm01 yum]# rpm -ivh createrepo-0.9.9-28.el7.noarch.rpmPreparing... ################################# [100%]Updating / installing... 1:createrepo-0.9.9-28.el7 ################################# [100%][root@vm01 yum]# rpm -ivh yum-plugin-priorities-1.1.31-50.el7.noarch.rpmPreparing... ################################# [100%]Updating / installing... 1:yum-plugin-priorities-1.1.31-50.e################################# [100%] 12345678[root@vm01 yum]# createrepo ./Spawning worker 0 with 4 pkgsWorkers FinishedSaving Primary metadataSaving file lists metadataSaving other metadataGenerating sqlite DBsSqlite DBs complete 修改源的地址123456789101112131415161718192021222324252627282930[root@vm01 yum]# vi /var/www/html/ambari/ambari/centos7/2.6.2.2-1/ambari.repo#VERSION_NUMBER=2.6.2.2-1[ambari-2.6.2.2]name=ambari Version - ambari-2.6.2.2baseurl=http://192.168.133.3/ambari/ambari/centos7/2.6.2.2-1/gpgcheck=1gpgkey=http://192.168.133.3/ambari/ambari/centos7/2.6.2.2-1/RPM-GPG-KEY/RPM-GPG-KEY-Jenkinsenabled=1priority=1[root@vm01 yum]# cp /var/www/html/ambari/ambari/centos7/2.6.2.2-1/ambari.repo /etc/yum.repos.d/[root@vm01 yum]# vi /var/www/html/ambari/HDP/centos7/2.6.5.0-292/hdp.repo#VERSION_NUMBER=2.6.5.0-292[HDP-2.6.5.0]name=HDP Version - HDP-2.6.5.0baseurl=http://192.168.133.3/ambari/HDP/centos7/2.6.5.0-292/gpgcheck=1gpgkey=http://192.168.133.3/ambari/HDP/centos7/2.6.5.0-292/RPM-GPG-KEY/RPM-GPG-KEY-Jenkinsenabled=1priority=1[HDP-UTILS-1.1.0.22]name=HDP-UTILS Version - HDP-UTILS-1.1.0.22baseurl=http://192.168.133.3/ambari/HDP/centos7/2.6.5.0-292/gpgcheck=1gpgkey=http://192.168.133.3/ambari/HDP/centos7/2.6.5.0-292/RPM-GPG-KEY/RPM-GPG-KEY-Jenkinsenabled=1priority=1[root@vm01 yum]# cp /var/www/html/ambari/HDP/centos7/2.6.5.0-292/hdp.repo /etc/yum.repos.d/ 将ambari.repo；hdp.repo源拷贝到其他节点 12345678[root@vm01 yum]# scp /etc/yum.repos.d/ambari.repo vm02:/etc/yum.repos.d/ambari.repo 100% 267 248.2KB/s 00:00[root@vm01 yum]# scp /etc/yum.repos.d/ambari.repo vm03:/etc/yum.repos.d/ambari.repo 100% 267 117.9KB/s 00:00[root@vm01 yum]# scp /etc/yum.repos.d/hdp.repo vm03:/etc/yum.repos.d/hdp.repo 100% 508 422.7KB/s 00:00[root@vm01 yum]# scp /etc/yum.repos.d/hdp.repo vm02:/etc/yum.repos.d/hdp.repo 100% 508 451.1KB/s 00:00 6.安装ambari-sever【以mysql为数据库安装】安装mysql【系统如果为迷你版，则部分组件没有被安装，再次安装时需要联网进行】注意：linux系统为最小化安装，通过下载官网压缩包离线安装时，还需要系统方面的某些小依赖包。导致mysql离线安装失败linux系统为虚拟化主机或者桌面版就可以直接安装 系统为虚拟化主机版本：上传官网的压缩包，解压，按照顺序安装 12345678910111213141516171819202122232425262728293031323334353637383940[root@localhost mysql_5.7.27]# ll总用量 1037224-rw-r--r--. 1 root root 531056640 7月 24 16:09 mysql-5.7.27-1.el7.x86_64.rpm-bundle.tar-rw-r--r--. 1 7155 31415 25365436 6月 12 14:42 mysql-community-client-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 281248 6月 12 14:42 mysql-community-common-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 3833396 6月 12 14:42 mysql-community-devel-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 47074656 6月 12 14:42 mysql-community-embedded-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 24079736 6月 12 14:42 mysql-community-embedded-compat-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 129991352 6月 12 14:42 mysql-community-embedded-devel-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 2272032 6月 12 14:42 mysql-community-libs-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 2116432 6月 12 14:42 mysql-community-libs-compat-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 173500088 6月 12 14:43 mysql-community-server-5.7.27-1.el7.x86_64.rpm-rw-r--r--. 1 7155 31415 122530756 6月 12 14:43 mysql-community-test-5.7.27-1.el7.x86_64.rpm#删除mariadb，否则会有冲突[root@vm01 mysql]# rpm -qa | grep mariadbmariadb-libs-5.5.56-2.el7.x86_64[root@vm01 mysql]# rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64#安装mysql，按照顺序[root@localhost mysql_5.7.27]# rpm -ivh mysql-community-common-5.7.27-1.el7.x86_64.rpm警告：mysql-community-common-5.7.27-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:mysql-community-common-5.7.27-1.e################################# [100%][root@localhost mysql_5.7.27]# rpm -ivh mysql-community-libs-5.7.27-1.el7.x86_64.rpm警告：mysql-community-libs-5.7.27-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:mysql-community-libs-5.7.27-1.el7################################# [100%][root@localhost mysql_5.7.27]# rpm -ivh mysql-community-client-5.7.27-1.el7.x86_64.rpm警告：mysql-community-client-5.7.27-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:mysql-community-client-5.7.27-1.e################################# [100%][root@localhost mysql_5.7.27]# rpm -ivh mysql-community-server-5.7.27-1.el7.x86_64.rpm警告：mysql-community-server-5.7.27-1.el7.x86_64.rpm: 头V3 DSA/SHA1 Signature, 密钥 ID 5072e1f5: NOKEY准备中... ################################# [100%]正在升级/安装... 1:mysql-community-server-5.7.27-1.e################################# [100%] 启动，设置开机自启123456789101112131415161718[root@vm01 mysql_5.7.27]# systemctl start mysqld[root@vm01 mysql_5.7.27]# systemctl enable mysqld[root@vm01 mysql_5.7.27]# systemctl status mysqld● mysqld.service - MySQL Server Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled) Active: active (running) since Wed 2019-07-24 16:22:28 CST; 15s ago Docs: man:mysqld(8) http://dev.mysql.com/doc/refman/en/using-systemd.html Main PID: 11260 (mysqld) CGroup: /system.slice/mysqld.service └─11260 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pidJul 24 16:22:25 vm01 systemd[1]: Starting MySQL Server...Jul 24 16:22:28 vm01 systemd[1]: Started MySQL Server.[root@vm01 mysql_5.7.27]# vi /etc/rc.local#增加systemctl start mysqld 获取临时密码登录mysql，设置密码，设置远程登录12345[root@vm01 mysql_5.7.27]# grep 'temporary password' /var/log/mysqld.log2019-07-24T08:22:25.615573Z 1 [Note] A temporary password is generated for root@localhost: 8BdMN2JWj*q&gt;[root@vm01 mysql_5.7.27]# mysql -uroot -pEnter password:Welcome to the MySQL monitor. Commands end with ; or \g. 123456789101112131415#设置mysql登录密码为123456mysql&gt; alter user 'root'@'localhost' identified by '123456';ERROR 1819 (HY000): Your password does not satisfy the current policy requirements#出错，密码不符合mysql的安全策略，降低mysql的全局密码验证策略mysql&gt; set global validate_password_policy=0;Query OK, 0 rows affected (0.00 sec)#设置密码长度mysql&gt; set global validate_password_length=6;Query OK, 0 rows affected (0.00 sec)#设置密码为123456mysql&gt; alter user 'root'@'localhost' identified by '123456';Query OK, 0 rows affected (0.00 sec) 设置远程登录 12345mysql&gt; grant all privileges on *.* to 'root'@'%' identified by '123456';Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; FLUSH PRIVILEGES;Query OK, 0 rows affected (0.00 sec) 安装postgresql123456789101112131415161718[root@vm01 postgresql]# lltotal 7256-rw-r--r-- 1 root root 3175716 Aug 24 2018 postgresql-9.2.24-1.el7_5.x86_64.rpm-rw-r--r-- 1 root root 239640 Aug 24 2018 postgresql-libs-9.2.24-1.el7_5.x86_64.rpm-rw-r--r-- 1 root root 4006220 Aug 24 2018 postgresql-server-9.2.24-1.el7_5.x86_64.rpm[root@vm01 postgresql]# rpm -ivh postgresql-libs-9.2.24-1.el7_5.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:postgresql-libs-9.2.24-1.el7_5 ################################# [100%][root@vm01 postgresql]# rpm -ivh postgresql-9.2.24-1.el7_5.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:postgresql-9.2.24-1.el7_5 ################################# [100%][root@vm01 postgresql]# rpm -ivh postgresql-server-9.2.24-1.el7_5.x86_64.rpmPreparing... ################################# [100%]Updating / installing... 1:postgresql-server-9.2.24-1.el7_5 ################################# [100%] 安装ambari-server123456789101112131415[root@vm01 yum.repos.d]# lltotal 40-rw-r--r--. 1 root root 267 Aug 15 13:40 ambari.repo-rw-r--r--. 1 root root 1664 Apr 29 2018 CentOS-Base.repo-rw-r--r--. 1 root root 1309 Apr 29 2018 CentOS-CR.repo-rw-r--r--. 1 root root 649 Apr 29 2018 CentOS-Debuginfo.repo-rw-r--r--. 1 root root 314 Apr 29 2018 CentOS-fasttrack.repo-rw-r--r--. 1 root root 630 Apr 29 2018 CentOS-Media.repo-rw-r--r--. 1 root root 1331 Apr 29 2018 CentOS-Sources.repo-rw-r--r--. 1 root root 4768 Apr 29 2018 CentOS-Vault.repo-rw-r--r--. 1 root root 514 Aug 15 13:42 hdp.repo#yum默认使用的是base网络源，将其改名。离线状态下将其mv掉，使用我们自己的yum源[root@vm01 yum.repos.d]# mv CentOS-Base.repo CentOS-Base.repo_bak[root@vm01 yum.repos.d]# yum -y install ambari-server 登录mysql，执行以下语句1234567891011121314151617181920212223242526272829303132333435CREATE DATABASE ambari; use ambari; CREATE USER 'ambari'@'%' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%'; CREATE USER 'ambari'@'localhost' IDENTIFIED BY '123456';GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'localhost'; CREATE USER 'ambari'@'master' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'master'; FLUSH PRIVILEGES; source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql show tables; use mysql; select Host,User Password from user where user='ambari'; CREATE DATABASE hive; use hive; CREATE USER 'hive'@'%' IDENTIFIED BY '123456';GRANT ALL PRIVILEGES ON *.* TO 'hive'@'%'; CREATE USER 'hive'@'localhost' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'localhost'; CREATE USER 'hive'@'master' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'master'; FLUSH PRIVILEGES; CREATE DATABASE oozie; use oozie; CREATE USER 'oozie'@'%' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'%'; CREATE USER 'oozie'@'localhost' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'localhost';CREATE USER 'oozie'@'master' IDENTIFIED BY '123456'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'master';FLUSH PRIVILEGES; 建立mysql和ambari-server的连接上传mysql-connection-java-5.1.40.tar.gz包，解压 123456789101112131415161718192021[root@vm01 mysql_connect]# lltotal 4348drwxr-xr-x 3 root root 178 Aug 7 2018 mysql-connector-java-5.1.47-rw-r--r-- 1 root root 4452049 Jul 24 17:03 mysql-connector-java-5.1.47.tar.gz[root@vm01 mysql_connect]# cd mysql-connector-java-5.1.47[root@vm01 mysql-connector-java-5.1.47]# lltotal 2448-rw-r--r-- 1 root root 91845 Aug 7 2018 build.xml-rw-r--r-- 1 root root 248527 Aug 7 2018 CHANGES-rw-r--r-- 1 root root 18122 Aug 7 2018 COPYING-rw-r--r-- 1 root root 1007505 Aug 7 2018 mysql-connector-java-5.1.47-bin.jar-rw-r--r-- 1 root root 1007502 Aug 7 2018 mysql-connector-java-5.1.47.jar-rw-r--r-- 1 root root 61407 Aug 7 2018 README-rw-r--r-- 1 root root 63658 Aug 7 2018 README.txtdrwxr-xr-x 8 root root 79 Aug 7 2018 src[root@vm01 mysql-connector-java-5.1.47]# mkdir /usr/share/java[root@vm01 mysql-connector-java-5.1.47]# cp mysql-connector-java-5.1.47.jar /usr/share/java/mysql-connector-java.jar[root@vm01 mysql-connector-java-5.1.47]# cp /usr/share/java/mysql-connector-java.jar /var/lib/ambari-server/resources/mysql-jdbc-driver.jar[root@vm01 mysql-connector-java-5.1.47]# vi /etc/ambari-server/conf/ambari.properties#增加server.jdbc.driver.path=/usr/share/java/mysql-connector-java.jar 初始化设置ambari-server12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455[root@vm01 mysql_5.7.27]# ambari-server setupUsing python /usr/bin/pythonSetup ambari-serverChecking SELinux...SELinux status is 'disabled'Customize user account for ambari-server daemon [y/n] (n)? yEnter user account for ambari-server daemon (root):Adjusting ambari-server permissions and ownership...Checking firewall status...Checking JDK...[1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8[2] Oracle JDK 1.7 + Java Cryptography Extension (JCE) Policy Files 7[3] Custom JDK==============================================================================#自定义jdk位置Enter choice (1): 3WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.WARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.Path to JAVA_HOME: /opt/apps/jdk/jdk1.8.0_144Validating JDK on Ambari Server...done.Checking GPL software agreement...GPL License for LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.htmlEnable Ambari Server to download and install GPL Licensed LZO packages [y/n] (n)? yCompleting setup...Configuring database...Enter advanced database configuration [y/n] (n)? yConfiguring database...==============================================================================Choose one of the following options:[1] - PostgreSQL (Embedded)[2] - Oracle[3] - MySQL / MariaDB[4] - PostgreSQL[5] - Microsoft SQL Server (Tech Preview)[6] - SQL Anywhere[7] - BDB==============================================================================#选择ambari储存的数据库为mysqlEnter choice (1): 3#设置数据库的配置信息，括号内为默认，可以更改Hostname (localhost): vm01Port (3306):Database name (ambari):Username (ambari):Enter Database Password (bigdata):Re-enter password:Configuring ambari database...Configuring remote database connection properties...WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sqlProceed with configuring remote database connection properties [y/n] (y)? yExtracting system views...ambari-admin-2.6.2.2.1.jar...........Adjusting ambari-server permissions and ownership...Ambari Server 'setup' completed successfully. 启动ambari1234567891011[root@vm01 mysql_5.7.27]# ambari-server startUsing python /usr/bin/pythonStarting ambari-serverAmbari Server running with administrator privileges.Organizing resource files at /var/lib/ambari-server/resources...Ambari database consistency check started...Server PID at: /var/run/ambari-server/ambari-server.pidServer out at: /var/log/ambari-server/ambari-server.outServer log at: /var/log/ambari-server/ambari-server.logWaiting for server start............................................................ERROR: Exiting with exit code 1.REASON: Server not yet listening on http port 8080 after 50 seconds. Exiting. 如果没有启动成功，修改等待时间： 1234567891011121314151617181920[root@vm01 mysql_5.7.27]# vi /etc/ambari-server/conf/ambari.properties#增加server.startup.web.timeout=120[root@vm01 mysql_5.7.27]# ambari-server restartUsing python /usr/bin/pythonRestarting ambari-serverWaiting for server stop...Ambari Server stoppedAmbari Server running with administrator privileges.Organizing resource files at /var/lib/ambari-server/resources...Ambari database consistency check started...Server PID at: /var/run/ambari-server/ambari-server.pidServer out at: /var/log/ambari-server/ambari-server.outServer log at: /var/log/ambari-server/ambari-server.logWaiting for server start.......................Server started listening on 8080DB configs consistency check: no errors and warnings were found. 7.错误处理如果在安装过程中出现一些问题，则将一切都回滚清除，重新设置注意：最好删除mysql中创建的数据库，然后mysql中user表创建的用户【重新设置时需要从上面的步骤重新导入】 123[root@vm01 mysql_5.7.27]# ambari-server stop[root@vm01 mysql_5.7.27]# ambari-server reset[root@vm01 mysql_5.7.27]# ambari-server setup 8.安装HDP集群组件登录：http://192.168.133.3:8080/#/login用户名，密码：admin依照安装向导进行设置 安装向导：点击launch install wizard 输入集群名称 设置版本，设置本地仓库地址 设置主机名，配置id_rsa 完成免密登录配置后，将id_rsa文件下载到本地 1234567[root@vm01 ssh]# cd ~/.ssh/[root@vm01 .ssh]# lltotal 16-rw-------. 1 root root 391 Aug 15 10:20 authorized_keys-rw-------. 1 root root 1679 Aug 15 10:19 id_rsa-rw-r--r--. 1 root root 391 Aug 15 10:19 id_rsa.pub-rw-r--r--. 1 root root 540 Aug 15 10:21 known_hosts 完成配置 选择组件 选择组件安装位置 选择slaves和clients 配置参数 配置hive时注意： 1234567[root@vm01 .ssh]# ambari-server setup --jdbc-db=mysql --jdbc-driver=/usr/share/java/mysql-connector-java.jarUsing python /usr/bin/pythonSetup ambari-serverCopying /usr/share/java/mysql-connector-java.jar to /var/lib/ambari-server/resourcesIf you are updating existing jdbc driver jar for mysql with mysql-connector-java.jar. Please remove the old driver jar, from all hosts. Restarting services that need the driver, will automatically copy the new jar to the hosts.JDBC driver was successfully initialized.Ambari Server 'setup' completed successfully. 一路点击完成下一步即可]]></content>
      <categories>
        <category>BigData</category>
      </categories>
      <tags>
        <tag>HDP</tag>
      </tags>
  </entry>
</search>
